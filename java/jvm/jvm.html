<!doctype html>
<html lang="en-US" data-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-rc.0" />
    <meta name="theme" content="VuePress Theme Hope 2.0.0-rc.13" />
    <style>
      html {
        background: var(--bg-color, #fff);
      }

      html[data-theme="dark"] {
        background: var(--bg-color, #1d1e1f);
      }

      body {
        background: var(--bg-color);
      }
    </style>
    <script>
      const userMode = localStorage.getItem("vuepress-theme-hope-scheme");
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches;

      if (userMode === "dark" || (userMode !== "light" && systemDarkMode)) {
        document.documentElement.setAttribute("data-theme", "dark");
      }
    </script>
    <meta property="og:url" content="https://liz-in-tech.github.io/pinkpig/java/jvm/jvm.html"><meta property="og:site_name" content="Liz"><meta property="og:title" content="JVM"><meta property="og:description" content="JVM 1ã€æ¦‚è¿° JavaæŠ€æœ¯ä½“ç³» ä¼˜ç‚¹ å¹³å°æ— å…³æ€§&amp;è¯­è¨€æ— å…³æ€§ å¹³å°æ— å…³æ€§ ä¸€æ¬¡ç¼–è¯‘ï¼Œåˆ°å¤„è¿è¡Œ å„ç¡¬ä»¶å¹³å°æœ‰é’ˆå¯¹æ€§çš„JVMï¼Œå¯ä»¥å°†åŒä¸€ä»½å­—èŠ‚ç æ–‡ä»¶è§£é‡Šä¸ºå¯¹åº”å¹³å°çš„æœºå™¨ç  è¯­è¨€æ— å…³æ€§ ä»»ä½•èƒ½ç¼–è¯‘æˆå­—èŠ‚ç æ–‡ä»¶çš„è¯­è¨€ï¼Œéƒ½èƒ½è¢«JVMè¿è¡Œã€‚JVM åªè®¤è¯† .class æ–‡ä»¶ï¼Œå®ƒä¸å…³å¿ƒæ˜¯ä½•ç§è¯­è¨€ç”Ÿæˆäº† .class æ–‡ä»¶ï¼Œåªè¦ .class æ–‡ä»¶ç¬¦åˆ JVM çš„è§„èŒƒå°±èƒ½è¿è¡Œã€‚ ç›®å‰å·²ç»æœ‰ JRubyã€Jythonã€Scala ç­‰è¯­è¨€èƒ½å¤Ÿåœ¨ JVM ä¸Šè¿è¡Œã€‚å®ƒä»¬æœ‰å„è‡ªçš„è¯­æ³•è§„åˆ™ï¼Œä¸è¿‡å®ƒä»¬çš„ç¼–è¯‘å™¨éƒ½èƒ½å°†å„è‡ªçš„æºç ç¼–è¯‘æˆç¬¦åˆ JVM è§„èŒƒçš„ .class æ–‡ä»¶ï¼Œä»è€Œèƒ½å¤Ÿå€ŸåŠ© JVM è¿è¡Œå®ƒä»¬ã€‚"><meta property="og:type" content="article"><meta property="og:locale" content="en-US"><meta property="og:updated_time" content="2025-02-16T15:28:18.000Z"><meta property="article:author" content="Liz"><meta property="article:modified_time" content="2025-02-16T15:28:18.000Z"><script type="application/ld+json">{"@context":"https://schema.org","@type":"Article","headline":"JVM","image":[""],"dateModified":"2025-02-16T15:28:18.000Z","author":[{"@type":"Person","name":"Liz","url":"https://github.com/liz-in-tech"}]}</script><link rel="icon" herf="/blogger.png"><link rel="icon" href="/pinkpig/blogger.png"><title>JVM | Liz</title><meta name="description" content="JVM 1ã€æ¦‚è¿° JavaæŠ€æœ¯ä½“ç³» ä¼˜ç‚¹ å¹³å°æ— å…³æ€§&amp;è¯­è¨€æ— å…³æ€§ å¹³å°æ— å…³æ€§ ä¸€æ¬¡ç¼–è¯‘ï¼Œåˆ°å¤„è¿è¡Œ å„ç¡¬ä»¶å¹³å°æœ‰é’ˆå¯¹æ€§çš„JVMï¼Œå¯ä»¥å°†åŒä¸€ä»½å­—èŠ‚ç æ–‡ä»¶è§£é‡Šä¸ºå¯¹åº”å¹³å°çš„æœºå™¨ç  è¯­è¨€æ— å…³æ€§ ä»»ä½•èƒ½ç¼–è¯‘æˆå­—èŠ‚ç æ–‡ä»¶çš„è¯­è¨€ï¼Œéƒ½èƒ½è¢«JVMè¿è¡Œã€‚JVM åªè®¤è¯† .class æ–‡ä»¶ï¼Œå®ƒä¸å…³å¿ƒæ˜¯ä½•ç§è¯­è¨€ç”Ÿæˆäº† .class æ–‡ä»¶ï¼Œåªè¦ .class æ–‡ä»¶ç¬¦åˆ JVM çš„è§„èŒƒå°±èƒ½è¿è¡Œã€‚ ç›®å‰å·²ç»æœ‰ JRubyã€Jythonã€Scala ç­‰è¯­è¨€èƒ½å¤Ÿåœ¨ JVM ä¸Šè¿è¡Œã€‚å®ƒä»¬æœ‰å„è‡ªçš„è¯­æ³•è§„åˆ™ï¼Œä¸è¿‡å®ƒä»¬çš„ç¼–è¯‘å™¨éƒ½èƒ½å°†å„è‡ªçš„æºç ç¼–è¯‘æˆç¬¦åˆ JVM è§„èŒƒçš„ .class æ–‡ä»¶ï¼Œä»è€Œèƒ½å¤Ÿå€ŸåŠ© JVM è¿è¡Œå®ƒä»¬ã€‚">
    <link rel="preload" href="/pinkpig/assets/style-B4ayxgRu.css" as="style"><link rel="stylesheet" href="/pinkpig/assets/style-B4ayxgRu.css">
    <link rel="modulepreload" href="/pinkpig/assets/app-vfVXwivP.js"><link rel="modulepreload" href="/pinkpig/assets/jvm.html-IRdkLO52.js"><link rel="modulepreload" href="/pinkpig/assets/plugin-vue_export-helper-x3n3nnut.js"><link rel="modulepreload" href="/pinkpig/assets/jvm.html-6rKN8Wso.js">
    <link rel="prefetch" href="/pinkpig/assets/index.html-ibkdGA84.js" as="script"><link rel="prefetch" href="/pinkpig/assets/intro.html-VEF0ZusF.js" as="script"><link rel="prefetch" href="/pinkpig/assets/CSAPP.html-DfrX1UAP.js" as="script"><link rel="prefetch" href="/pinkpig/assets/Netty.html-p8gk6fJ_.js" as="script"><link rel="prefetch" href="/pinkpig/assets/RPC.html-7C88YC2N.js" as="script"><link rel="prefetch" href="/pinkpig/assets/competition.html-9FBFPDQz.js" as="script"><link rel="prefetch" href="/pinkpig/assets/æ“ä½œç³»ç»Ÿ.html-1QgCNUH3.js" as="script"><link rel="prefetch" href="/pinkpig/assets/æµè§ˆå™¨æŠ€èƒ½.html-uFcrAJVS.js" as="script"><link rel="prefetch" href="/pinkpig/assets/ç½‘ç»œ.html-36AG3eKy.js" as="script"><link rel="prefetch" href="/pinkpig/assets/è®¡ç®—æœºæŠ€èƒ½.html-H-ZX4k04.js" as="script"><link rel="prefetch" href="/pinkpig/assets/AntDesign.html-5NgDnkhT.js" as="script"><link rel="prefetch" href="/pinkpig/assets/CSS.html-DWW8u9ge.js" as="script"><link rel="prefetch" href="/pinkpig/assets/Expo.html-lJQuUz4Q.js" as="script"><link rel="prefetch" href="/pinkpig/assets/Frontend.html-a7NJdFWI.js" as="script"><link rel="prefetch" href="/pinkpig/assets/HTML.html-9wodgV5c.js" as="script"><link rel="prefetch" href="/pinkpig/assets/JavaScript.html-lvtDI2LR.js" as="script"><link rel="prefetch" href="/pinkpig/assets/Practice.html-lui81Yar.js" as="script"><link rel="prefetch" href="/pinkpig/assets/React.html-b8iVrI2O.js" as="script"><link rel="prefetch" href="/pinkpig/assets/npm.html-cf-i0MG_.js" as="script"><link rel="prefetch" href="/pinkpig/assets/commen_mistakes.html-mGgYvOuL.js" as="script"><link rel="prefetch" href="/pinkpig/assets/grammar.html-H-3z-vXH.js" as="script"><link rel="prefetch" href="/pinkpig/assets/new_concept_english3.html--aWr1mmm.js" as="script"><link rel="prefetch" href="/pinkpig/assets/new_concept_english_detail.html-MQS8h2D6.js" as="script"><link rel="prefetch" href="/pinkpig/assets/pronunciation.html-d7en6ro-.js" as="script"><link rel="prefetch" href="/pinkpig/assets/sentence_pattern_and_expression.html-bv8MyCdJ.js" as="script"><link rel="prefetch" href="/pinkpig/assets/use_ai.html-ntl4HqyR.js" as="script"><link rel="prefetch" href="/pinkpig/assets/frequent_use_command.html-dqa2WnIu.js" as="script"><link rel="prefetch" href="/pinkpig/assets/Gitä½¿ç”¨æ‰‹å†Œ.html-2FKeMxuw.js" as="script"><link rel="prefetch" href="/pinkpig/assets/Markdown.html-p0NdC-RI.js" as="script"><link rel="prefetch" href="/pinkpig/assets/photoshop.html-1AQeTxWq.js" as="script"><link rel="prefetch" href="/pinkpig/assets/interview_code.html-oTzIHCpd.js" as="script"><link rel="prefetch" href="/pinkpig/assets/quick_recovery.html-57YZ5vgN.js" as="script"><link rel="prefetch" href="/pinkpig/assets/solve_trick.html-R1zd6M1x.js" as="script"><link rel="prefetch" href="/pinkpig/assets/å¤šå±‚è¿·å®«.html-5S0uvLI1.js" as="script"><link rel="prefetch" href="/pinkpig/assets/ç®—æ³•æå‡.html-3eGbfge7.js" as="script"><link rel="prefetch" href="/pinkpig/assets/ç»å…¸é¢˜æ±‡æ€»ï¼ˆæ¯ä¸ªç»†åˆ†ç±»é™å®š10é¢˜ä»¥å†…ï¼‰.html-q2-dePgM.js" as="script"><link rel="prefetch" href="/pinkpig/assets/Java8å­¦ä¹ ç¬”è®°.html-gBdmNduj.js" as="script"><link rel="prefetch" href="/pinkpig/assets/åŸºç¡€.html-1_ocEQ4I.js" as="script"><link rel="prefetch" href="/pinkpig/assets/é›†åˆ.html-B3Wp3Upx.js" as="script"><link rel="prefetch" href="/pinkpig/assets/juc.html-5GKFP4UE.js" as="script"><link rel="prefetch" href="/pinkpig/assets/spring.html-s5U1LwF9.js" as="script"><link rel="prefetch" href="/pinkpig/assets/IDEA_Keymap.html--yTwT5Pe.js" as="script"><link rel="prefetch" href="/pinkpig/assets/IDEA_Problem_and_plugin.html-fhQh8RqL.js" as="script"><link rel="prefetch" href="/pinkpig/assets/Maven--javaåŒ…ç®¡ç†å·¥å…·.html-scnAhanr.js" as="script"><link rel="prefetch" href="/pinkpig/assets/careers.html-yiJQBxx-.js" as="script"><link rel="prefetch" href="/pinkpig/assets/common.html-8eP_H2he.js" as="script"><link rel="prefetch" href="/pinkpig/assets/communication.html-Ws1GaxQj.js" as="script"><link rel="prefetch" href="/pinkpig/assets/computers.html-E9ZVn5M0.js" as="script"><link rel="prefetch" href="/pinkpig/assets/describing_something.html-qB30C2Nz.js" as="script"><link rel="prefetch" href="/pinkpig/assets/dreams.html-KfGof6S4.js" as="script"><link rel="prefetch" href="/pinkpig/assets/graduating.html-P8cgR_ex.js" as="script"><link rel="prefetch" href="/pinkpig/assets/greetings.html-5eDIKNUU.js" as="script"><link rel="prefetch" href="/pinkpig/assets/hobbies.html-j7YJS0Uj.js" as="script"><link rel="prefetch" href="/pinkpig/assets/immigration.html-N3b_zhs7.js" as="script"><link rel="prefetch" href="/pinkpig/assets/introducing_someone.html-8g3aWQlk.js" as="script"><link rel="prefetch" href="/pinkpig/assets/phone.html-83IoFm_-.js" as="script"><link rel="prefetch" href="/pinkpig/assets/routine.html-HbuB0pac.js" as="script"><link rel="prefetch" href="/pinkpig/assets/time_and_weather.html-iKp7YvRN.js" as="script"><link rel="prefetch" href="/pinkpig/assets/traits.html-2kgfa3hS.js" as="script"><link rel="prefetch" href="/pinkpig/assets/agent.html-QB2ZVQXT.js" as="script"><link rel="prefetch" href="/pinkpig/assets/agent_research.html-cd0HxqYs.js" as="script"><link rel="prefetch" href="/pinkpig/assets/computer_use_same.html-xXCG-hp_.js" as="script"><link rel="prefetch" href="/pinkpig/assets/langchain.html-Ox9GztVV.js" as="script"><link rel="prefetch" href="/pinkpig/assets/datasets.html-K1XG0SIL.js" as="script"><link rel="prefetch" href="/pinkpig/assets/learn_llm.html-qym0-ZxB.js" as="script"><link rel="prefetch" href="/pinkpig/assets/llama_advanced.html-naBkMCZ4.js" as="script"><link rel="prefetch" href="/pinkpig/assets/llm.html-4XbXBx3X.js" as="script"><link rel="prefetch" href="/pinkpig/assets/llm_train.html-nZm9Cxtp.js" as="script"><link rel="prefetch" href="/pinkpig/assets/titoken.html-zZgSoab3.js" as="script"><link rel="prefetch" href="/pinkpig/assets/nlp.html-rCJo44hM.js" as="script"><link rel="prefetch" href="/pinkpig/assets/018_autorag.html-y8K5hhje.js" as="script"><link rel="prefetch" href="/pinkpig/assets/rag_opensource.html-fe7-lWiI.js" as="script"><link rel="prefetch" href="/pinkpig/assets/GraphQL.html-zq9chJmn.js" as="script"><link rel="prefetch" href="/pinkpig/assets/MicroService.html-gqQ9Z22K.js" as="script"><link rel="prefetch" href="/pinkpig/assets/MybatisPlus.html-sXrDLPET.js" as="script"><link rel="prefetch" href="/pinkpig/assets/rocketmq.html-Hl75cf25.js" as="script"><link rel="prefetch" href="/pinkpig/assets/SQL.html-h6ZRnzFD.js" as="script"><link rel="prefetch" href="/pinkpig/assets/mysql.html-w2oyLSBD.js" as="script"><link rel="prefetch" href="/pinkpig/assets/redis.html-RgiRoRd9.js" as="script"><link rel="prefetch" href="/pinkpig/assets/Docker.html-v652K6De.js" as="script"><link rel="prefetch" href="/pinkpig/assets/K8S.html-hVxZM-yZ.js" as="script"><link rel="prefetch" href="/pinkpig/assets/docker_from_xmind.html-etYvtf7i.js" as="script"><link rel="prefetch" href="/pinkpig/assets/linux.html-GKFxuA1k.js" as="script"><link rel="prefetch" href="/pinkpig/assets/linux_command.html-iB7MbZV8.js" as="script"><link rel="prefetch" href="/pinkpig/assets/wsl.html-oi6sho5k.js" as="script"><link rel="prefetch" href="/pinkpig/assets/english_words.html-QD9WjIVg.js" as="script"><link rel="prefetch" href="/pinkpig/assets/experience.html-NGzTOw4o.js" as="script"><link rel="prefetch" href="/pinkpig/assets/paper_find.html--xIE94bO.js" as="script"><link rel="prefetch" href="/pinkpig/assets/01_python_environment.html-Ogc-g3Pl.js" as="script"><link rel="prefetch" href="/pinkpig/assets/02_python_data_type.html-SsgcwWnj.js" as="script"><link rel="prefetch" href="/pinkpig/assets/03_python_operator.html-WW78TP0B.js" as="script"><link rel="prefetch" href="/pinkpig/assets/04_python_method.html-gy5ccBYv.js" as="script"><link rel="prefetch" href="/pinkpig/assets/05_python_builtin_module.html-W4QAcEOF.js" as="script"><link rel="prefetch" href="/pinkpig/assets/06_python_popular_package.html-4W72Pdg1.js" as="script"><link rel="prefetch" href="/pinkpig/assets/07_python_web.html-2wx4z3ck.js" as="script"><link rel="prefetch" href="/pinkpig/assets/00_deep_learning_frameworks.html-6aphJD4D.js" as="script"><link rel="prefetch" href="/pinkpig/assets/01_ai_concept.html-FUCs1g0L.js" as="script"><link rel="prefetch" href="/pinkpig/assets/02_neural_net_train.html-YPETtbT8.js" as="script"><link rel="prefetch" href="/pinkpig/assets/03_pytorch_operation.html-yukjJeR7.js" as="script"><link rel="prefetch" href="/pinkpig/assets/04_pytorch_practice_nn.html-6bU2zAkC.js" as="script"><link rel="prefetch" href="/pinkpig/assets/05_linear_nn.html-V-M3_Tfb.js" as="script"><link rel="prefetch" href="/pinkpig/assets/06_heterogeneous_graph.html-eXFNwBOH.js" as="script"><link rel="prefetch" href="/pinkpig/assets/AI_evolution.html-dPUJTcbb.js" as="script"><link rel="prefetch" href="/pinkpig/assets/0.æ—¶ç©ºå¤æ‚åº¦.html-Ed0mUuFP.js" as="script"><link rel="prefetch" href="/pinkpig/assets/1.åˆ†æ²»æ€æƒ³_é€’å½’å®ç°.html-ZR8C9fAr.js" as="script"><link rel="prefetch" href="/pinkpig/assets/2.äºŒè¿›åˆ¶_ä½è¿ç®—.html-IPYNI70m.js" as="script"><link rel="prefetch" href="/pinkpig/assets/3.æ’åº.html-ezbMcwpP.js" as="script"><link rel="prefetch" href="/pinkpig/assets/4.äºŒåˆ†æŸ¥æ‰¾.html-6XjBZtvX.js" as="script"><link rel="prefetch" href="/pinkpig/assets/5.åŠ¨æ€è§„åˆ’_è´ªå¿ƒ.html-JlAVeSTu.js" as="script"><link rel="prefetch" href="/pinkpig/assets/6.å­—ç¬¦ä¸².html-H_Kw0VHp.js" as="script"><link rel="prefetch" href="/pinkpig/assets/7.æ•°å­¦.html-JB3Fd046.js" as="script"><link rel="prefetch" href="/pinkpig/assets/8.ç®—æ³•æŠ€å·§.html-0zv2JKDG.js" as="script"><link rel="prefetch" href="/pinkpig/assets/1.æ•°ç»„.html-2pX8ASkd.js" as="script"><link rel="prefetch" href="/pinkpig/assets/2.é“¾è¡¨.html-MDTUDdof.js" as="script"><link rel="prefetch" href="/pinkpig/assets/3.æ ˆ.html-VhlnLXDW.js" as="script"><link rel="prefetch" href="/pinkpig/assets/4.é˜Ÿåˆ—.html-5RW94C74.js" as="script"><link rel="prefetch" href="/pinkpig/assets/5.å †ï¼ˆä¼˜å…ˆé˜Ÿåˆ—ï¼‰.html-9UtOuX_z.js" as="script"><link rel="prefetch" href="/pinkpig/assets/6.æ ‘.html-eY_fw8EL.js" as="script"><link rel="prefetch" href="/pinkpig/assets/7.å›¾.html-C6zmof_l.js" as="script"><link rel="prefetch" href="/pinkpig/assets/8.å“ˆå¸Œè¡¨ï¼ˆæ•£åˆ—è¡¨ï¼‰.html-rEshAQ6r.js" as="script"><link rel="prefetch" href="/pinkpig/assets/Javaè¯­è¨€åŸºç¡€.html-zkZgse3g.js" as="script"><link rel="prefetch" href="/pinkpig/assets/pythonç®—æ³•åˆ·é¢˜è¯­æ³•å¿«é€Ÿæ¢å¤.html-MwR2aQKw.js" as="script"><link rel="prefetch" href="/pinkpig/assets/404.html-ELYBSFNe.js" as="script"><link rel="prefetch" href="/pinkpig/assets/index.html-ZtH9hb0Y.js" as="script"><link rel="prefetch" href="/pinkpig/assets/index.html-ndBqxueE.js" as="script"><link rel="prefetch" href="/pinkpig/assets/index.html-FhfXXQqd.js" as="script"><link rel="prefetch" href="/pinkpig/assets/index.html-Y18Gk6ug.js" as="script"><link rel="prefetch" href="/pinkpig/assets/index.html-ik3y9HJ8.js" as="script"><link rel="prefetch" href="/pinkpig/assets/index.html-PYFEr-gw.js" as="script"><link rel="prefetch" href="/pinkpig/assets/index.html-n6sTAWGG.js" as="script"><link rel="prefetch" href="/pinkpig/assets/index.html-SpiN3Ual.js" as="script"><link rel="prefetch" href="/pinkpig/assets/index.html-lySh48SJ.js" as="script"><link rel="prefetch" href="/pinkpig/assets/index.html-QLcoUYFo.js" as="script"><link rel="prefetch" href="/pinkpig/assets/index.html-OkAhqWR6.js" as="script"><link rel="prefetch" href="/pinkpig/assets/index.html-WjAYn9Z-.js" as="script"><link rel="prefetch" href="/pinkpig/assets/index.html-2CIdeSnB.js" as="script"><link rel="prefetch" href="/pinkpig/assets/index.html-ayy3EF9I.js" as="script"><link rel="prefetch" href="/pinkpig/assets/index.html-s_gR8OaW.js" as="script"><link rel="prefetch" href="/pinkpig/assets/index.html-dwZlzFOb.js" as="script"><link rel="prefetch" href="/pinkpig/assets/index.html-H364LLkr.js" as="script"><link rel="prefetch" href="/pinkpig/assets/index.html-oeeST0kk.js" as="script"><link rel="prefetch" href="/pinkpig/assets/index.html-MDiPagDx.js" as="script"><link rel="prefetch" href="/pinkpig/assets/index.html-RmQTNmcI.js" as="script"><link rel="prefetch" href="/pinkpig/assets/index.html-uTiIdO0F.js" as="script"><link rel="prefetch" href="/pinkpig/assets/index.html-TrYac60Q.js" as="script"><link rel="prefetch" href="/pinkpig/assets/index.html-OWFxg9Im.js" as="script"><link rel="prefetch" href="/pinkpig/assets/index.html-PfTXE4w9.js" as="script"><link rel="prefetch" href="/pinkpig/assets/index.html--tUsRM8W.js" as="script"><link rel="prefetch" href="/pinkpig/assets/index.html-2LBMckbl.js" as="script"><link rel="prefetch" href="/pinkpig/assets/index.html-jSFk7HPD.js" as="script"><link rel="prefetch" href="/pinkpig/assets/index.html-aX5SAJZk.js" as="script"><link rel="prefetch" href="/pinkpig/assets/index.html-avJpz5gY.js" as="script"><link rel="prefetch" href="/pinkpig/assets/index.html-7kqkDjc1.js" as="script"><link rel="prefetch" href="/pinkpig/assets/index.html-11KJ3gwb.js" as="script"><link rel="prefetch" href="/pinkpig/assets/index.html-LQuERQvK.js" as="script"><link rel="prefetch" href="/pinkpig/assets/index.html-6iizFISA.js" as="script"><link rel="prefetch" href="/pinkpig/assets/index.html-qSCg3dme.js" as="script"><link rel="prefetch" href="/pinkpig/assets/index.html-3AOtZ1O7.js" as="script"><link rel="prefetch" href="/pinkpig/assets/index.html-NUrjn_rx.js" as="script"><link rel="prefetch" href="/pinkpig/assets/index.html-ZkjR0Tnl.js" as="script"><link rel="prefetch" href="/pinkpig/assets/index.html-4fJRFXlS.js" as="script"><link rel="prefetch" href="/pinkpig/assets/index.html-0Zni0yS2.js" as="script"><link rel="prefetch" href="/pinkpig/assets/index.html-x4TH_xzP.js" as="script"><link rel="prefetch" href="/pinkpig/assets/index.html-bUj5_ism.js" as="script"><link rel="prefetch" href="/pinkpig/assets/index.html-M3KBctL2.js" as="script"><link rel="prefetch" href="/pinkpig/assets/index.html-yZYnH68c.js" as="script"><link rel="prefetch" href="/pinkpig/assets/index.html-KzgtbF_l.js" as="script"><link rel="prefetch" href="/pinkpig/assets/index.html-8WjFejoc.js" as="script"><link rel="prefetch" href="/pinkpig/assets/index.html-xtYkLxjR.js" as="script"><link rel="prefetch" href="/pinkpig/assets/index.html-xfwIgr3s.js" as="script"><link rel="prefetch" href="/pinkpig/assets/index.html-AVn-_fFT.js" as="script"><link rel="prefetch" href="/pinkpig/assets/index.html-V6IelPdJ.js" as="script"><link rel="prefetch" href="/pinkpig/assets/index.html-wvgAZYvE.js" as="script"><link rel="prefetch" href="/pinkpig/assets/index.html-Bp62bPd5.js" as="script"><link rel="prefetch" href="/pinkpig/assets/index.html-FTMRL3lu.js" as="script"><link rel="prefetch" href="/pinkpig/assets/index.html-Ob7dvR-M.js" as="script"><link rel="prefetch" href="/pinkpig/assets/index.html-2oWEcuGm.js" as="script"><link rel="prefetch" href="/pinkpig/assets/index.html-Di6h8Ky1.js" as="script"><link rel="prefetch" href="/pinkpig/assets/index.html-5GuLlprQ.js" as="script"><link rel="prefetch" href="/pinkpig/assets/index.html-dbwd_1YG.js" as="script"><link rel="prefetch" href="/pinkpig/assets/index.html-dQ2QFe76.js" as="script"><link rel="prefetch" href="/pinkpig/assets/index.html-DKIbv2Jr.js" as="script"><link rel="prefetch" href="/pinkpig/assets/index.html-kmPKSOrX.js" as="script"><link rel="prefetch" href="/pinkpig/assets/index.html-PjKCTcgX.js" as="script"><link rel="prefetch" href="/pinkpig/assets/index.html-j0J10-eI.js" as="script"><link rel="prefetch" href="/pinkpig/assets/index.html-WHhL-UfW.js" as="script"><link rel="prefetch" href="/pinkpig/assets/index.html-FHbtXQBu.js" as="script"><link rel="prefetch" href="/pinkpig/assets/index.html-qiYtPT_N.js" as="script"><link rel="prefetch" href="/pinkpig/assets/intro.html-0FI-I_-i.js" as="script"><link rel="prefetch" href="/pinkpig/assets/CSAPP.html-hMRpxI4h.js" as="script"><link rel="prefetch" href="/pinkpig/assets/Netty.html-YlSg2ni5.js" as="script"><link rel="prefetch" href="/pinkpig/assets/RPC.html-db3W_h5j.js" as="script"><link rel="prefetch" href="/pinkpig/assets/competition.html-vyCICRSt.js" as="script"><link rel="prefetch" href="/pinkpig/assets/æ“ä½œç³»ç»Ÿ.html-2vbSNahZ.js" as="script"><link rel="prefetch" href="/pinkpig/assets/æµè§ˆå™¨æŠ€èƒ½.html--8fmpV0a.js" as="script"><link rel="prefetch" href="/pinkpig/assets/ç½‘ç»œ.html-izQuxkSO.js" as="script"><link rel="prefetch" href="/pinkpig/assets/è®¡ç®—æœºæŠ€èƒ½.html-34-ax18h.js" as="script"><link rel="prefetch" href="/pinkpig/assets/AntDesign.html-9dOgKbl8.js" as="script"><link rel="prefetch" href="/pinkpig/assets/CSS.html-Db1Pkvv1.js" as="script"><link rel="prefetch" href="/pinkpig/assets/Expo.html-d-XGnFuY.js" as="script"><link rel="prefetch" href="/pinkpig/assets/Frontend.html-ccGhBf0f.js" as="script"><link rel="prefetch" href="/pinkpig/assets/HTML.html-WCAclZ0l.js" as="script"><link rel="prefetch" href="/pinkpig/assets/JavaScript.html-pASmRWis.js" as="script"><link rel="prefetch" href="/pinkpig/assets/Practice.html-O1R24dzX.js" as="script"><link rel="prefetch" href="/pinkpig/assets/React.html-fOiW8MyX.js" as="script"><link rel="prefetch" href="/pinkpig/assets/npm.html-pw4pLWZQ.js" as="script"><link rel="prefetch" href="/pinkpig/assets/commen_mistakes.html-FZshMBKd.js" as="script"><link rel="prefetch" href="/pinkpig/assets/grammar.html-Pw8_KwYE.js" as="script"><link rel="prefetch" href="/pinkpig/assets/new_concept_english3.html-28GGy9t0.js" as="script"><link rel="prefetch" href="/pinkpig/assets/new_concept_english_detail.html-iMraolDR.js" as="script"><link rel="prefetch" href="/pinkpig/assets/pronunciation.html--g5RYWLd.js" as="script"><link rel="prefetch" href="/pinkpig/assets/sentence_pattern_and_expression.html-c9LiebcG.js" as="script"><link rel="prefetch" href="/pinkpig/assets/use_ai.html-qJGe2dH6.js" as="script"><link rel="prefetch" href="/pinkpig/assets/frequent_use_command.html-Sdobwm7a.js" as="script"><link rel="prefetch" href="/pinkpig/assets/Gitä½¿ç”¨æ‰‹å†Œ.html-5QjlxQbf.js" as="script"><link rel="prefetch" href="/pinkpig/assets/Markdown.html-puwf-CDx.js" as="script"><link rel="prefetch" href="/pinkpig/assets/photoshop.html-zV0zmON_.js" as="script"><link rel="prefetch" href="/pinkpig/assets/interview_code.html-csHNnOP9.js" as="script"><link rel="prefetch" href="/pinkpig/assets/quick_recovery.html-3RQlDIUZ.js" as="script"><link rel="prefetch" href="/pinkpig/assets/solve_trick.html-gTNeKXj-.js" as="script"><link rel="prefetch" href="/pinkpig/assets/å¤šå±‚è¿·å®«.html-Kbax-zYw.js" as="script"><link rel="prefetch" href="/pinkpig/assets/ç®—æ³•æå‡.html-n-OyNn9Q.js" as="script"><link rel="prefetch" href="/pinkpig/assets/ç»å…¸é¢˜æ±‡æ€»ï¼ˆæ¯ä¸ªç»†åˆ†ç±»é™å®š10é¢˜ä»¥å†…ï¼‰.html--BO_6nFn.js" as="script"><link rel="prefetch" href="/pinkpig/assets/Java8å­¦ä¹ ç¬”è®°.html-xHBUKwA5.js" as="script"><link rel="prefetch" href="/pinkpig/assets/åŸºç¡€.html-1GQGDkuV.js" as="script"><link rel="prefetch" href="/pinkpig/assets/é›†åˆ.html-_pYhaIY1.js" as="script"><link rel="prefetch" href="/pinkpig/assets/juc.html-omq9vdKO.js" as="script"><link rel="prefetch" href="/pinkpig/assets/spring.html-xSXIQJtS.js" as="script"><link rel="prefetch" href="/pinkpig/assets/IDEA_Keymap.html-7KOY18Mn.js" as="script"><link rel="prefetch" href="/pinkpig/assets/IDEA_Problem_and_plugin.html-BTrlYydp.js" as="script"><link rel="prefetch" href="/pinkpig/assets/Maven--javaåŒ…ç®¡ç†å·¥å…·.html-wtIW1FsZ.js" as="script"><link rel="prefetch" href="/pinkpig/assets/careers.html-7fCyuy0y.js" as="script"><link rel="prefetch" href="/pinkpig/assets/common.html-H7_9p6mA.js" as="script"><link rel="prefetch" href="/pinkpig/assets/communication.html-jT6_vGkn.js" as="script"><link rel="prefetch" href="/pinkpig/assets/computers.html-jOkLBLPd.js" as="script"><link rel="prefetch" href="/pinkpig/assets/describing_something.html-K9wqMrQh.js" as="script"><link rel="prefetch" href="/pinkpig/assets/dreams.html-5he73G_w.js" as="script"><link rel="prefetch" href="/pinkpig/assets/graduating.html-QOaU97-q.js" as="script"><link rel="prefetch" href="/pinkpig/assets/greetings.html-2KNALpHh.js" as="script"><link rel="prefetch" href="/pinkpig/assets/hobbies.html-epLcCJVy.js" as="script"><link rel="prefetch" href="/pinkpig/assets/immigration.html-EOSQCc3t.js" as="script"><link rel="prefetch" href="/pinkpig/assets/introducing_someone.html-nXQoTy-I.js" as="script"><link rel="prefetch" href="/pinkpig/assets/phone.html-fdTc0jM2.js" as="script"><link rel="prefetch" href="/pinkpig/assets/routine.html-TQ1vEHzA.js" as="script"><link rel="prefetch" href="/pinkpig/assets/time_and_weather.html-vzvPaVph.js" as="script"><link rel="prefetch" href="/pinkpig/assets/traits.html-JrFQzhQJ.js" as="script"><link rel="prefetch" href="/pinkpig/assets/agent.html-3dCp3rsT.js" as="script"><link rel="prefetch" href="/pinkpig/assets/agent_research.html-7thiC7Jw.js" as="script"><link rel="prefetch" href="/pinkpig/assets/computer_use_same.html-rcBijmuQ.js" as="script"><link rel="prefetch" href="/pinkpig/assets/langchain.html-fFySGveN.js" as="script"><link rel="prefetch" href="/pinkpig/assets/datasets.html-PFzZ6yvM.js" as="script"><link rel="prefetch" href="/pinkpig/assets/learn_llm.html--1WMvxfo.js" as="script"><link rel="prefetch" href="/pinkpig/assets/llama_advanced.html-U3wvGylP.js" as="script"><link rel="prefetch" href="/pinkpig/assets/llm.html-kvv3Fz9Z.js" as="script"><link rel="prefetch" href="/pinkpig/assets/llm_train.html-9bc7aiuy.js" as="script"><link rel="prefetch" href="/pinkpig/assets/titoken.html-sf90CNON.js" as="script"><link rel="prefetch" href="/pinkpig/assets/nlp.html-PiwDc_WU.js" as="script"><link rel="prefetch" href="/pinkpig/assets/018_autorag.html-erUKuavQ.js" as="script"><link rel="prefetch" href="/pinkpig/assets/rag_opensource.html-17z-X13L.js" as="script"><link rel="prefetch" href="/pinkpig/assets/GraphQL.html-1OMi5yZh.js" as="script"><link rel="prefetch" href="/pinkpig/assets/MicroService.html-wbj7F9Bv.js" as="script"><link rel="prefetch" href="/pinkpig/assets/MybatisPlus.html-nmXwkv_R.js" as="script"><link rel="prefetch" href="/pinkpig/assets/rocketmq.html-EnCb4OYy.js" as="script"><link rel="prefetch" href="/pinkpig/assets/SQL.html-BZ7RLbdL.js" as="script"><link rel="prefetch" href="/pinkpig/assets/mysql.html-eh2ZayjY.js" as="script"><link rel="prefetch" href="/pinkpig/assets/redis.html-cf8TfKmf.js" as="script"><link rel="prefetch" href="/pinkpig/assets/Docker.html-QAGLNzv4.js" as="script"><link rel="prefetch" href="/pinkpig/assets/K8S.html-PMHFUO6l.js" as="script"><link rel="prefetch" href="/pinkpig/assets/docker_from_xmind.html-zUt7L-AJ.js" as="script"><link rel="prefetch" href="/pinkpig/assets/linux.html-M2CiDPnW.js" as="script"><link rel="prefetch" href="/pinkpig/assets/linux_command.html-mzk8DHfs.js" as="script"><link rel="prefetch" href="/pinkpig/assets/wsl.html-hqNW_rPY.js" as="script"><link rel="prefetch" href="/pinkpig/assets/english_words.html-FVvsWrR2.js" as="script"><link rel="prefetch" href="/pinkpig/assets/experience.html-qn4NnOTT.js" as="script"><link rel="prefetch" href="/pinkpig/assets/paper_find.html-7lB0tPRF.js" as="script"><link rel="prefetch" href="/pinkpig/assets/01_python_environment.html-nae1R2Po.js" as="script"><link rel="prefetch" href="/pinkpig/assets/02_python_data_type.html-dP5E9RDl.js" as="script"><link rel="prefetch" href="/pinkpig/assets/03_python_operator.html-UBhAibGg.js" as="script"><link rel="prefetch" href="/pinkpig/assets/04_python_method.html-gWRKzO6G.js" as="script"><link rel="prefetch" href="/pinkpig/assets/05_python_builtin_module.html-24QekEzP.js" as="script"><link rel="prefetch" href="/pinkpig/assets/06_python_popular_package.html-13ja68Lg.js" as="script"><link rel="prefetch" href="/pinkpig/assets/07_python_web.html-6EHRtBCX.js" as="script"><link rel="prefetch" href="/pinkpig/assets/00_deep_learning_frameworks.html-rJquABb-.js" as="script"><link rel="prefetch" href="/pinkpig/assets/01_ai_concept.html-6uOivfsK.js" as="script"><link rel="prefetch" href="/pinkpig/assets/02_neural_net_train.html-2mJLyHKf.js" as="script"><link rel="prefetch" href="/pinkpig/assets/03_pytorch_operation.html-j6oiL7x7.js" as="script"><link rel="prefetch" href="/pinkpig/assets/04_pytorch_practice_nn.html-xIBcxiYd.js" as="script"><link rel="prefetch" href="/pinkpig/assets/05_linear_nn.html-v11Lj80J.js" as="script"><link rel="prefetch" href="/pinkpig/assets/06_heterogeneous_graph.html-y-vmR-mn.js" as="script"><link rel="prefetch" href="/pinkpig/assets/AI_evolution.html-ilRDY8RW.js" as="script"><link rel="prefetch" href="/pinkpig/assets/0.æ—¶ç©ºå¤æ‚åº¦.html-kdCheTPx.js" as="script"><link rel="prefetch" href="/pinkpig/assets/1.åˆ†æ²»æ€æƒ³_é€’å½’å®ç°.html-1rp8K1nR.js" as="script"><link rel="prefetch" href="/pinkpig/assets/2.äºŒè¿›åˆ¶_ä½è¿ç®—.html-ex7Z_3Ir.js" as="script"><link rel="prefetch" href="/pinkpig/assets/3.æ’åº.html-iRU7JBaH.js" as="script"><link rel="prefetch" href="/pinkpig/assets/4.äºŒåˆ†æŸ¥æ‰¾.html-clSFZTox.js" as="script"><link rel="prefetch" href="/pinkpig/assets/5.åŠ¨æ€è§„åˆ’_è´ªå¿ƒ.html-mZzs197i.js" as="script"><link rel="prefetch" href="/pinkpig/assets/6.å­—ç¬¦ä¸².html-1cvCbkDi.js" as="script"><link rel="prefetch" href="/pinkpig/assets/7.æ•°å­¦.html-peyEhOTe.js" as="script"><link rel="prefetch" href="/pinkpig/assets/8.ç®—æ³•æŠ€å·§.html-d7I0UxAA.js" as="script"><link rel="prefetch" href="/pinkpig/assets/1.æ•°ç»„.html-0NgBpav1.js" as="script"><link rel="prefetch" href="/pinkpig/assets/2.é“¾è¡¨.html-N2Si4omC.js" as="script"><link rel="prefetch" href="/pinkpig/assets/3.æ ˆ.html-5d6zLX6f.js" as="script"><link rel="prefetch" href="/pinkpig/assets/4.é˜Ÿåˆ—.html-PHolO5X8.js" as="script"><link rel="prefetch" href="/pinkpig/assets/5.å †ï¼ˆä¼˜å…ˆé˜Ÿåˆ—ï¼‰.html-E-OjpWUt.js" as="script"><link rel="prefetch" href="/pinkpig/assets/6.æ ‘.html-X3S74j_K.js" as="script"><link rel="prefetch" href="/pinkpig/assets/7.å›¾.html-s3OrOc4I.js" as="script"><link rel="prefetch" href="/pinkpig/assets/8.å“ˆå¸Œè¡¨ï¼ˆæ•£åˆ—è¡¨ï¼‰.html--oZcY4BO.js" as="script"><link rel="prefetch" href="/pinkpig/assets/Javaè¯­è¨€åŸºç¡€.html-TnJpdBTf.js" as="script"><link rel="prefetch" href="/pinkpig/assets/pythonç®—æ³•åˆ·é¢˜è¯­æ³•å¿«é€Ÿæ¢å¤.html-temQOSQM.js" as="script"><link rel="prefetch" href="/pinkpig/assets/404.html-1zkiCw6I.js" as="script"><link rel="prefetch" href="/pinkpig/assets/index.html-0nkIHzWd.js" as="script"><link rel="prefetch" href="/pinkpig/assets/index.html-ssl6KdWZ.js" as="script"><link rel="prefetch" href="/pinkpig/assets/index.html-tXIIiRpa.js" as="script"><link rel="prefetch" href="/pinkpig/assets/index.html-SJAWfXJo.js" as="script"><link rel="prefetch" href="/pinkpig/assets/index.html-xHO-cEE-.js" as="script"><link rel="prefetch" href="/pinkpig/assets/index.html-3QkL4req.js" as="script"><link rel="prefetch" href="/pinkpig/assets/index.html-eY9GgDPn.js" as="script"><link rel="prefetch" href="/pinkpig/assets/index.html-0aP7eCCD.js" as="script"><link rel="prefetch" href="/pinkpig/assets/index.html-hG3f2vBP.js" as="script"><link rel="prefetch" href="/pinkpig/assets/index.html-swLMuwhV.js" as="script"><link rel="prefetch" href="/pinkpig/assets/index.html-njiZD4bA.js" as="script"><link rel="prefetch" href="/pinkpig/assets/index.html-vOZAL3qg.js" as="script"><link rel="prefetch" href="/pinkpig/assets/index.html-ra6l1I19.js" as="script"><link rel="prefetch" href="/pinkpig/assets/index.html-sPpUEHS-.js" as="script"><link rel="prefetch" href="/pinkpig/assets/index.html-8Q-juE2E.js" as="script"><link rel="prefetch" href="/pinkpig/assets/index.html-eE7f8CVv.js" as="script"><link rel="prefetch" href="/pinkpig/assets/index.html-lnQv4DAt.js" as="script"><link rel="prefetch" href="/pinkpig/assets/index.html-1dbxcVKk.js" as="script"><link rel="prefetch" href="/pinkpig/assets/index.html-zfBwgKkK.js" as="script"><link rel="prefetch" href="/pinkpig/assets/index.html-iWPYknH4.js" as="script"><link rel="prefetch" href="/pinkpig/assets/index.html-aO2VHxQX.js" as="script"><link rel="prefetch" href="/pinkpig/assets/index.html-ZUJEyj2W.js" as="script"><link rel="prefetch" href="/pinkpig/assets/index.html-Frollt2G.js" as="script"><link rel="prefetch" href="/pinkpig/assets/index.html-rx9BcFnQ.js" as="script"><link rel="prefetch" href="/pinkpig/assets/index.html-LJBJoMfc.js" as="script"><link rel="prefetch" href="/pinkpig/assets/index.html-RR0HYK1M.js" as="script"><link rel="prefetch" href="/pinkpig/assets/index.html-lqAjMtN3.js" as="script"><link rel="prefetch" href="/pinkpig/assets/index.html-v0zHE9aW.js" as="script"><link rel="prefetch" href="/pinkpig/assets/index.html-KDRk9UBw.js" as="script"><link rel="prefetch" href="/pinkpig/assets/index.html-zmE63-xt.js" as="script"><link rel="prefetch" href="/pinkpig/assets/index.html-HPBcgU_K.js" as="script"><link rel="prefetch" href="/pinkpig/assets/index.html-dmLrLswz.js" as="script"><link rel="prefetch" href="/pinkpig/assets/index.html-t0JkPlhe.js" as="script"><link rel="prefetch" href="/pinkpig/assets/index.html-1TxOobRp.js" as="script"><link rel="prefetch" href="/pinkpig/assets/index.html-trNvXAGo.js" as="script"><link rel="prefetch" href="/pinkpig/assets/index.html-l6xoSLwX.js" as="script"><link rel="prefetch" href="/pinkpig/assets/index.html-8HBdAD80.js" as="script"><link rel="prefetch" href="/pinkpig/assets/index.html-OHvDKkmS.js" as="script"><link rel="prefetch" href="/pinkpig/assets/index.html-KCGofTsu.js" as="script"><link rel="prefetch" href="/pinkpig/assets/index.html-NVUiBzMb.js" as="script"><link rel="prefetch" href="/pinkpig/assets/index.html-wu_NyiNG.js" as="script"><link rel="prefetch" href="/pinkpig/assets/index.html-DdS2YlAl.js" as="script"><link rel="prefetch" href="/pinkpig/assets/index.html-HtqnURI8.js" as="script"><link rel="prefetch" href="/pinkpig/assets/index.html--pOTA_Hn.js" as="script"><link rel="prefetch" href="/pinkpig/assets/index.html-qTWdXEnm.js" as="script"><link rel="prefetch" href="/pinkpig/assets/index.html-_OhQtkg5.js" as="script"><link rel="prefetch" href="/pinkpig/assets/index.html-IckcDGsw.js" as="script"><link rel="prefetch" href="/pinkpig/assets/index.html-ULQ91NsI.js" as="script"><link rel="prefetch" href="/pinkpig/assets/index.html-Lxtvy7Xp.js" as="script"><link rel="prefetch" href="/pinkpig/assets/index.html-NQ0339ad.js" as="script"><link rel="prefetch" href="/pinkpig/assets/index.html-xdVjVGJK.js" as="script"><link rel="prefetch" href="/pinkpig/assets/index.html-phxg8RX8.js" as="script"><link rel="prefetch" href="/pinkpig/assets/index.html-ssDwF-cL.js" as="script"><link rel="prefetch" href="/pinkpig/assets/index.html-mojsyWGW.js" as="script"><link rel="prefetch" href="/pinkpig/assets/index.html-SnTmHzI_.js" as="script"><link rel="prefetch" href="/pinkpig/assets/index.html-EYN6LMii.js" as="script"><link rel="prefetch" href="/pinkpig/assets/index.html-urDbkL47.js" as="script"><link rel="prefetch" href="/pinkpig/assets/index.html-ebMZV3c6.js" as="script"><link rel="prefetch" href="/pinkpig/assets/index.html-W2fHisTs.js" as="script"><link rel="prefetch" href="/pinkpig/assets/index.html-5CbDSpaq.js" as="script"><link rel="prefetch" href="/pinkpig/assets/index.html-NCjqDhFp.js" as="script"><link rel="prefetch" href="/pinkpig/assets/index.html-EyfXXGCI.js" as="script"><link rel="prefetch" href="/pinkpig/assets/index.html-QjhDmVZG.js" as="script"><link rel="prefetch" href="/pinkpig/assets/index.html-jQ-B7uGQ.js" as="script"><link rel="prefetch" href="/pinkpig/assets/photoswipe.esm-08_zHRDQ.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><!--[--><!--[--><span tabindex="-1"></span><a href="#main-content" class="vp-skip-link sr-only">Skip to main content</a><!--]--><!--[--><div class="theme-container has-toc"><!--[--><header id="navbar" class="vp-navbar"><div class="vp-navbar-start"><button type="button" class="vp-toggle-sidebar-button" title="Toggle Sidebar"><span class="icon"></span></button><!--[--><!----><!--]--><!--[--><a class="vp-link vp-brand vp-brand" href="/pinkpig/"><img class="vp-nav-logo" src="/pinkpig/blogger.png" alt><!----><span class="vp-site-name hide-in-pad">Liz</span></a><!--]--><!--[--><!----><!--]--></div><div class="vp-navbar-center"><!--[--><!----><!--]--><!--[--><nav class="vp-nav-links"><div class="nav-item hide-in-mobile"><a aria-label="Language" class="vp-link nav-link nav-link" href="/pinkpig/language/"><!---->Language<!----></a></div><div class="nav-item hide-in-mobile"><a aria-label="LLM" class="vp-link nav-link nav-link" href="/pinkpig/llm/"><!---->LLM<!----></a></div><div class="nav-item hide-in-mobile"><a aria-label="Python" class="vp-link nav-link nav-link" href="/pinkpig/python/"><!---->Python<!----></a></div><div class="nav-item hide-in-mobile"><a aria-label="Java" class="vp-link nav-link active nav-link active" href="/pinkpig/java/"><!---->Java<!----></a></div><div class="nav-item hide-in-mobile"><a aria-label="Frontend" class="vp-link nav-link nav-link" href="/pinkpig/frontend/"><!---->Frontend<!----></a></div><div class="nav-item hide-in-mobile"><a aria-label="Middleware" class="vp-link nav-link nav-link" href="/pinkpig/middleware/"><!---->Middleware<!----></a></div><div class="nav-item hide-in-mobile"><a aria-label="CS" class="vp-link nav-link nav-link" href="/pinkpig/cs/"><!---->CS<!----></a></div><div class="nav-item hide-in-mobile"><a aria-label="Operations" class="vp-link nav-link nav-link" href="/pinkpig/operations/"><!---->Operations<!----></a></div><div class="nav-item hide-in-mobile"><a aria-label="Tools" class="vp-link nav-link nav-link" href="/pinkpig/tools/"><!---->Tools<!----></a></div></nav><!--]--><!--[--><!----><!--]--></div><div class="vp-navbar-end"><!--[--><!----><!--]--><!--[--><!----><div class="nav-item vp-repo"><a class="vp-repo-link" href="https://github.com/liz-in-tech" target="_blank" rel="noopener noreferrer" aria-label="GitHub"><svg xmlns="http://www.w3.org/2000/svg" class="icon github-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="github icon" style="width:1.25rem;height:1.25rem;vertical-align:middle;"><path d="M511.957 21.333C241.024 21.333 21.333 240.981 21.333 512c0 216.832 140.544 400.725 335.574 465.664 24.49 4.395 32.256-10.07 32.256-23.083 0-11.69.256-44.245 0-85.205-136.448 29.61-164.736-64.64-164.736-64.64-22.315-56.704-54.4-71.765-54.4-71.765-44.587-30.464 3.285-29.824 3.285-29.824 49.195 3.413 75.179 50.517 75.179 50.517 43.776 75.008 114.816 53.333 142.762 40.79 4.523-31.66 17.152-53.377 31.19-65.537-108.971-12.458-223.488-54.485-223.488-242.602 0-53.547 19.114-97.323 50.517-131.67-5.035-12.33-21.93-62.293 4.779-129.834 0 0 41.258-13.184 134.912 50.346a469.803 469.803 0 0 1 122.88-16.554c41.642.213 83.626 5.632 122.88 16.554 93.653-63.488 134.784-50.346 134.784-50.346 26.752 67.541 9.898 117.504 4.864 129.834 31.402 34.347 50.474 78.123 50.474 131.67 0 188.586-114.73 230.016-224.042 242.09 17.578 15.232 33.578 44.672 33.578 90.454v135.85c0 13.142 7.936 27.606 32.854 22.87C862.25 912.597 1002.667 728.747 1002.667 512c0-271.019-219.648-490.667-490.71-490.667z"></path></svg></a></div><div class="nav-item hide-in-mobile"><button type="button" id="appearance-switch"><svg xmlns="http://www.w3.org/2000/svg" class="icon auto-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="auto icon" style="display:block;"><path d="M512 992C246.92 992 32 777.08 32 512S246.92 32 512 32s480 214.92 480 480-214.92 480-480 480zm0-840c-198.78 0-360 161.22-360 360 0 198.84 161.22 360 360 360s360-161.16 360-360c0-198.78-161.22-360-360-360zm0 660V212c165.72 0 300 134.34 300 300 0 165.72-134.28 300-300 300z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon dark-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="dark icon" style="display:none;"><path d="M524.8 938.667h-4.267a439.893 439.893 0 0 1-313.173-134.4 446.293 446.293 0 0 1-11.093-597.334A432.213 432.213 0 0 1 366.933 90.027a42.667 42.667 0 0 1 45.227 9.386 42.667 42.667 0 0 1 10.24 42.667 358.4 358.4 0 0 0 82.773 375.893 361.387 361.387 0 0 0 376.747 82.774 42.667 42.667 0 0 1 54.187 55.04 433.493 433.493 0 0 1-99.84 154.88 438.613 438.613 0 0 1-311.467 128z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon light-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="light icon" style="display:none;"><path d="M952 552h-80a40 40 0 0 1 0-80h80a40 40 0 0 1 0 80zM801.88 280.08a41 41 0 0 1-57.96-57.96l57.96-58a41.04 41.04 0 0 1 58 58l-58 57.96zM512 752a240 240 0 1 1 0-480 240 240 0 0 1 0 480zm0-560a40 40 0 0 1-40-40V72a40 40 0 0 1 80 0v80a40 40 0 0 1-40 40zm-289.88 88.08-58-57.96a41.04 41.04 0 0 1 58-58l57.96 58a41 41 0 0 1-57.96 57.96zM192 512a40 40 0 0 1-40 40H72a40 40 0 0 1 0-80h80a40 40 0 0 1 40 40zm30.12 231.92a41 41 0 0 1 57.96 57.96l-57.96 58a41.04 41.04 0 0 1-58-58l58-57.96zM512 832a40 40 0 0 1 40 40v80a40 40 0 0 1-80 0v-80a40 40 0 0 1 40-40zm289.88-88.08 58 57.96a41.04 41.04 0 0 1-58 58l-57.96-58a41 41 0 0 1 57.96-57.96z"></path></svg></button></div><form class="search-box" role="search"><input type="search" autocomplete="off" spellcheck="false" value><!----></form><!--]--><!--[--><!----><!--]--><button type="button" class="vp-toggle-navbar-button" aria-label="Toggle Navbar" aria-expanded="false" aria-controls="nav-screen"><span><span class="vp-top"></span><span class="vp-middle"></span><span class="vp-bottom"></span></span></button></div></header><!----><!--]--><!----><div class="toggle-sidebar-wrapper"><span class="arrow start"></span></div><aside id="sidebar" class="vp-sidebar"><!--[--><!----><!--]--><ul class="vp-sidebar-links"><li><section class="vp-sidebar-group"><button class="vp-sidebar-heading clickable active" type="button"><span class="font-icon icon fa-fw fa-sm fas fa-book" style=""></span><span class="vp-sidebar-title">Java</span><span class="vp-arrow down"></span></button><ul class="vp-sidebar-links"><li><section class="vp-sidebar-group"><button class="vp-sidebar-heading clickable" type="button"><!----><span class="vp-sidebar-title">Basic</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-heading clickable" type="button"><!----><span class="vp-sidebar-title">Juc</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-heading clickable active" type="button"><!----><span class="vp-sidebar-title">Jvm</span><span class="vp-arrow down"></span></button><ul class="vp-sidebar-links"><li><!--[--><a aria-label="JVM" class="vp-link nav-link active vp-sidebar-link vp-sidebar-page active nav-link active vp-sidebar-link vp-sidebar-page active" href="/pinkpig/java/jvm/jvm.html"><span class="font-icon icon fa-fw fa-sm fas fa-lightbulb" style=""></span>JVM<!----></a><ul class="vp-sidebar-sub-headers"><li class="vp-sidebar-sub-header"><a aria-label="1ã€æ¦‚è¿°" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/pinkpig/java/jvm/jvm.html#_1ã€æ¦‚è¿°"><!---->1ã€æ¦‚è¿°<!----></a><ul class="vp-sidebar-sub-headers"><li class="vp-sidebar-sub-header"><a aria-label="JavaæŠ€æœ¯ä½“ç³»" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/pinkpig/java/jvm/jvm.html#javaæŠ€æœ¯ä½“ç³»"><!---->JavaæŠ€æœ¯ä½“ç³»<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="JDKã€JREã€JVM" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/pinkpig/java/jvm/jvm.html#jdkã€jreã€jvm"><!---->JDKã€JREã€JVM<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="Javaå‘å±•å²" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/pinkpig/java/jvm/jvm.html#javaå‘å±•å²"><!---->Javaå‘å±•å²<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="Javaè™šæ‹Ÿæœº" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/pinkpig/java/jvm/jvm.html#javaè™šæ‹Ÿæœº"><!---->Javaè™šæ‹Ÿæœº<!----></a><ul class="vp-sidebar-sub-headers"></ul></li></ul></li><li class="vp-sidebar-sub-header"><a aria-label="2ã€ç±»åŠ è½½æœºåˆ¶" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/pinkpig/java/jvm/jvm.html#_2ã€ç±»åŠ è½½æœºåˆ¶"><!---->2ã€ç±»åŠ è½½æœºåˆ¶<!----></a><ul class="vp-sidebar-sub-headers"><li class="vp-sidebar-sub-header"><a aria-label="Classæ–‡ä»¶ç»“æ„" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/pinkpig/java/jvm/jvm.html#classæ–‡ä»¶ç»“æ„"><!---->Classæ–‡ä»¶ç»“æ„<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="ç±»åŠ è½½è¿‡ç¨‹/ç±»çš„ç”Ÿå‘½å‘¨æœŸ" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/pinkpig/java/jvm/jvm.html#ç±»åŠ è½½è¿‡ç¨‹-ç±»çš„ç”Ÿå‘½å‘¨æœŸ"><!---->ç±»åŠ è½½è¿‡ç¨‹/ç±»çš„ç”Ÿå‘½å‘¨æœŸ<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="ç±»åŠ è½½å™¨" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/pinkpig/java/jvm/jvm.html#ç±»åŠ è½½å™¨"><!---->ç±»åŠ è½½å™¨<!----></a><ul class="vp-sidebar-sub-headers"></ul></li></ul></li><li class="vp-sidebar-sub-header"><a aria-label="3ã€è‡ªåŠ¨å†…å­˜ç®¡ç†" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/pinkpig/java/jvm/jvm.html#_3ã€è‡ªåŠ¨å†…å­˜ç®¡ç†"><!---->3ã€è‡ªåŠ¨å†…å­˜ç®¡ç†<!----></a><ul class="vp-sidebar-sub-headers"><li class="vp-sidebar-sub-header"><a aria-label="å†…å­˜åŒºåŸŸåˆ’åˆ†" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/pinkpig/java/jvm/jvm.html#å†…å­˜åŒºåŸŸåˆ’åˆ†"><!---->å†…å­˜åŒºåŸŸåˆ’åˆ†<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="å†…å­˜åˆ†é…" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/pinkpig/java/jvm/jvm.html#å†…å­˜åˆ†é…"><!---->å†…å­˜åˆ†é…<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="å†…å­˜å›æ”¶" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/pinkpig/java/jvm/jvm.html#å†…å­˜å›æ”¶"><!---->å†…å­˜å›æ”¶<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="å†…å­˜æ³„æ¼ã€å†…å­˜æº¢å‡º" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/pinkpig/java/jvm/jvm.html#å†…å­˜æ³„æ¼ã€å†…å­˜æº¢å‡º"><!---->å†…å­˜æ³„æ¼ã€å†…å­˜æº¢å‡º<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="JVMè°ƒä¼˜" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/pinkpig/java/jvm/jvm.html#jvmè°ƒä¼˜"><!---->JVMè°ƒä¼˜<!----></a><ul class="vp-sidebar-sub-headers"></ul></li></ul></li><li class="vp-sidebar-sub-header"><a aria-label="4ã€æ€ä¹ˆå›æ”¶" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/pinkpig/java/jvm/jvm.html#_4ã€æ€ä¹ˆå›æ”¶"><!---->4ã€æ€ä¹ˆå›æ”¶<!----></a><ul class="vp-sidebar-sub-headers"><li class="vp-sidebar-sub-header"><a aria-label="åƒåœ¾æ”¶é›†ç®—æ³•" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/pinkpig/java/jvm/jvm.html#åƒåœ¾æ”¶é›†ç®—æ³•"><!---->åƒåœ¾æ”¶é›†ç®—æ³•<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="è¯„ä¼°" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/pinkpig/java/jvm/jvm.html#è¯„ä¼°"><!---->è¯„ä¼°<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="é€‰æ‹©æ–¹æ¡ˆ" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/pinkpig/java/jvm/jvm.html#é€‰æ‹©æ–¹æ¡ˆ"><!---->é€‰æ‹©æ–¹æ¡ˆ<!----></a><ul class="vp-sidebar-sub-headers"></ul></li></ul></li></ul><!--]--></li></ul></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-heading clickable" type="button"><!----><span class="vp-sidebar-title">Spring</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-heading clickable" type="button"><!----><span class="vp-sidebar-title">Tools</span><span class="vp-arrow end"></span></button><!----></section></li></ul></section></li></ul><!--[--><!----><!--]--></aside><!--[--><main id="main-content" class="vp-page"><!--[--><!--[--><!----><!--]--><!----><nav class="vp-breadcrumb disable"></nav><div class="vp-page-title"><h1><span class="font-icon icon fa-fw fa-sm fas fa-lightbulb" style=""></span>JVM</h1><div class="page-info"><span class="page-author-info" aria-label="AuthorğŸ–Š" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon author-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="author icon"><path d="M649.6 633.6c86.4-48 147.2-144 147.2-249.6 0-160-128-288-288-288s-288 128-288 288c0 108.8 57.6 201.6 147.2 249.6-121.6 48-214.4 153.6-240 288-3.2 9.6 0 19.2 6.4 25.6 3.2 9.6 12.8 12.8 22.4 12.8h704c9.6 0 19.2-3.2 25.6-12.8 6.4-6.4 9.6-16 6.4-25.6-25.6-134.4-121.6-240-243.2-288z"></path></svg><span><a class="page-author-item" href="https://github.com/liz-in-tech" target="_blank" rel="noopener noreferrer">Liz</a></span><span property="author" content="Liz"></span></span><!----><span class="page-date-info" aria-label="Writing DateğŸ“…" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon calendar-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="calendar icon"><path d="M716.4 110.137c0-18.753-14.72-33.473-33.472-33.473-18.753 0-33.473 14.72-33.473 33.473v33.473h66.993v-33.473zm-334.87 0c0-18.753-14.72-33.473-33.473-33.473s-33.52 14.72-33.52 33.473v33.473h66.993v-33.473zm468.81 33.52H716.4v100.465c0 18.753-14.72 33.473-33.472 33.473a33.145 33.145 0 01-33.473-33.473V143.657H381.53v100.465c0 18.753-14.72 33.473-33.473 33.473a33.145 33.145 0 01-33.473-33.473V143.657H180.6A134.314 134.314 0 0046.66 277.595v535.756A134.314 134.314 0 00180.6 947.289h669.74a134.36 134.36 0 00133.94-133.938V277.595a134.314 134.314 0 00-133.94-133.938zm33.473 267.877H147.126a33.145 33.145 0 01-33.473-33.473c0-18.752 14.72-33.473 33.473-33.473h736.687c18.752 0 33.472 14.72 33.472 33.473a33.145 33.145 0 01-33.472 33.473z"></path></svg><span><!----></span><meta property="datePublished" content="2024-10-29T16:42:17.000Z"></span><!----><span class="page-reading-time-info" aria-label="Reading TimeâŒ›" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon timer-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="timer icon"><path d="M799.387 122.15c4.402-2.978 7.38-7.897 7.38-13.463v-1.165c0-8.933-7.38-16.312-16.312-16.312H256.33c-8.933 0-16.311 7.38-16.311 16.312v1.165c0 5.825 2.977 10.874 7.637 13.592 4.143 194.44 97.22 354.963 220.201 392.763-122.204 37.542-214.893 196.511-220.2 389.397-4.661 5.049-7.638 11.651-7.638 19.03v5.825h566.49v-5.825c0-7.379-2.849-13.981-7.509-18.9-5.049-193.016-97.867-351.985-220.2-389.527 123.24-37.67 216.446-198.453 220.588-392.892zM531.16 450.445v352.632c117.674 1.553 211.787 40.778 211.787 88.676H304.097c0-48.286 95.149-87.382 213.728-88.676V450.445c-93.077-3.107-167.901-81.297-167.901-177.093 0-8.803 6.99-15.793 15.793-15.793 8.803 0 15.794 6.99 15.794 15.793 0 80.261 63.69 145.635 142.01 145.635s142.011-65.374 142.011-145.635c0-8.803 6.99-15.793 15.794-15.793s15.793 6.99 15.793 15.793c0 95.019-73.789 172.82-165.96 177.093z"></path></svg><span>About 54 min</span><meta property="timeRequired" content="PT54M"></span><!----><!----></div><hr></div><div class="toc-place-holder"><aside id="toc"><!--[--><!----><!--]--><div class="toc-header">On This Page<button type="button" class="print-button" title="Print"><svg xmlns="http://www.w3.org/2000/svg" class="icon print-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="print icon"><path d="M819.2 364.8h-44.8V128c0-17.067-14.933-32-32-32H281.6c-17.067 0-32 14.933-32 32v236.8h-44.8C145.067 364.8 96 413.867 96 473.6v192c0 59.733 49.067 108.8 108.8 108.8h44.8V896c0 17.067 14.933 32 32 32h460.8c17.067 0 32-14.933 32-32V774.4h44.8c59.733 0 108.8-49.067 108.8-108.8v-192c0-59.733-49.067-108.8-108.8-108.8zM313.6 160h396.8v204.8H313.6V160zm396.8 704H313.6V620.8h396.8V864zM864 665.6c0 25.6-19.2 44.8-44.8 44.8h-44.8V588.8c0-17.067-14.933-32-32-32H281.6c-17.067 0-32 14.933-32 32v121.6h-44.8c-25.6 0-44.8-19.2-44.8-44.8v-192c0-25.6 19.2-44.8 44.8-44.8h614.4c25.6 0 44.8 19.2 44.8 44.8v192z"></path></svg></button></div><div class="toc-wrapper"><ul class="toc-list"><!--[--><li class="toc-item"><a class="vp-link toc-link level2 toc-link level2" href="#_1ã€æ¦‚è¿°">1ã€æ¦‚è¿°</a></li><li><ul class="toc-list"><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="#javaæŠ€æœ¯ä½“ç³»">JavaæŠ€æœ¯ä½“ç³»</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="#jdkã€jreã€jvm">JDKã€JREã€JVM</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="#javaå‘å±•å²">Javaå‘å±•å²</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="#javaè™šæ‹Ÿæœº">Javaè™šæ‹Ÿæœº</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level2 toc-link level2" href="#_2ã€ç±»åŠ è½½æœºåˆ¶">2ã€ç±»åŠ è½½æœºåˆ¶</a></li><li><ul class="toc-list"><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="#classæ–‡ä»¶ç»“æ„">Classæ–‡ä»¶ç»“æ„</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="#ç±»åŠ è½½è¿‡ç¨‹-ç±»çš„ç”Ÿå‘½å‘¨æœŸ">ç±»åŠ è½½è¿‡ç¨‹/ç±»çš„ç”Ÿå‘½å‘¨æœŸ</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="#ç±»åŠ è½½å™¨">ç±»åŠ è½½å™¨</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level2 toc-link level2" href="#_3ã€è‡ªåŠ¨å†…å­˜ç®¡ç†">3ã€è‡ªåŠ¨å†…å­˜ç®¡ç†</a></li><li><ul class="toc-list"><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="#å†…å­˜åŒºåŸŸåˆ’åˆ†">å†…å­˜åŒºåŸŸåˆ’åˆ†</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="#å†…å­˜åˆ†é…">å†…å­˜åˆ†é…</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="#å†…å­˜å›æ”¶">å†…å­˜å›æ”¶</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="#å†…å­˜æ³„æ¼ã€å†…å­˜æº¢å‡º">å†…å­˜æ³„æ¼ã€å†…å­˜æº¢å‡º</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="#jvmè°ƒä¼˜">JVMè°ƒä¼˜</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level2 toc-link level2" href="#_4ã€æ€ä¹ˆå›æ”¶">4ã€æ€ä¹ˆå›æ”¶</a></li><li><ul class="toc-list"><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="#åƒåœ¾æ”¶é›†ç®—æ³•">åƒåœ¾æ”¶é›†ç®—æ³•</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="#è¯„ä¼°">è¯„ä¼°</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="#é€‰æ‹©æ–¹æ¡ˆ">é€‰æ‹©æ–¹æ¡ˆ</a></li><!----><!--]--></ul></li><!--]--></ul><div class="toc-marker" style="top:-1.7rem;"></div></div><!--[--><!----><!--]--></aside></div><!--[--><!----><!--]--><div class="theme-hope-content"><h1 id="jvm" tabindex="-1"><a class="header-anchor" href="#jvm" aria-hidden="true">#</a> JVM</h1><h2 id="_1ã€æ¦‚è¿°" tabindex="-1"><a class="header-anchor" href="#_1ã€æ¦‚è¿°" aria-hidden="true">#</a> 1ã€æ¦‚è¿°</h2><h3 id="javaæŠ€æœ¯ä½“ç³»" tabindex="-1"><a class="header-anchor" href="#javaæŠ€æœ¯ä½“ç³»" aria-hidden="true">#</a> JavaæŠ€æœ¯ä½“ç³»</h3><h4 id="ä¼˜ç‚¹" tabindex="-1"><a class="header-anchor" href="#ä¼˜ç‚¹" aria-hidden="true">#</a> ä¼˜ç‚¹</h4><h5 id="å¹³å°æ— å…³æ€§-è¯­è¨€æ— å…³æ€§" tabindex="-1"><a class="header-anchor" href="#å¹³å°æ— å…³æ€§-è¯­è¨€æ— å…³æ€§" aria-hidden="true">#</a> å¹³å°æ— å…³æ€§&amp;è¯­è¨€æ— å…³æ€§</h5><figure><img src="/pinkpig/assets/jvm_001-23csEfPe.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><h6 id="å¹³å°æ— å…³æ€§" tabindex="-1"><a class="header-anchor" href="#å¹³å°æ— å…³æ€§" aria-hidden="true">#</a> å¹³å°æ— å…³æ€§</h6><p>ä¸€æ¬¡ç¼–è¯‘ï¼Œåˆ°å¤„è¿è¡Œ</p><p>å„ç¡¬ä»¶å¹³å°æœ‰é’ˆå¯¹æ€§çš„JVMï¼Œå¯ä»¥å°†åŒä¸€ä»½å­—èŠ‚ç æ–‡ä»¶è§£é‡Šä¸ºå¯¹åº”å¹³å°çš„æœºå™¨ç </p><h6 id="è¯­è¨€æ— å…³æ€§" tabindex="-1"><a class="header-anchor" href="#è¯­è¨€æ— å…³æ€§" aria-hidden="true">#</a> è¯­è¨€æ— å…³æ€§</h6><p>ä»»ä½•èƒ½ç¼–è¯‘æˆå­—èŠ‚ç æ–‡ä»¶çš„è¯­è¨€ï¼Œéƒ½èƒ½è¢«JVMè¿è¡Œã€‚JVM åªè®¤è¯† .class æ–‡ä»¶ï¼Œå®ƒä¸å…³å¿ƒæ˜¯ä½•ç§è¯­è¨€ç”Ÿæˆäº† .class æ–‡ä»¶ï¼Œåªè¦ .class æ–‡ä»¶ç¬¦åˆ JVM çš„è§„èŒƒå°±èƒ½è¿è¡Œã€‚ ç›®å‰å·²ç»æœ‰ JRubyã€Jythonã€Scala ç­‰è¯­è¨€èƒ½å¤Ÿåœ¨ JVM ä¸Šè¿è¡Œã€‚å®ƒä»¬æœ‰å„è‡ªçš„è¯­æ³•è§„åˆ™ï¼Œä¸è¿‡å®ƒä»¬çš„ç¼–è¯‘å™¨éƒ½èƒ½å°†å„è‡ªçš„æºç ç¼–è¯‘æˆç¬¦åˆ JVM è§„èŒƒçš„ .class æ–‡ä»¶ï¼Œä»è€Œèƒ½å¤Ÿå€ŸåŠ© JVM è¿è¡Œå®ƒä»¬ã€‚</p><p>Java è¯­è¨€ä¸­çš„å„ç§å˜é‡ã€å…³é”®å­—å’Œè¿ç®—ç¬¦å·çš„è¯­ä¹‰æœ€ç»ˆéƒ½æ˜¯ç”±å¤šæ¡å­—èŠ‚ç å‘½ä»¤ç»„åˆè€Œæˆçš„ï¼Œ å› æ­¤å­—èŠ‚ç å‘½ä»¤æ‰€èƒ½æä¾›çš„è¯­ä¹‰æè¿°èƒ½åŠ›è‚¯å®šä¼šæ¯” Java è¯­è¨€æœ¬èº«æ›´åŠ å¼ºå¤§ã€‚ å› æ­¤ï¼Œæœ‰ä¸€äº› Java è¯­è¨€æœ¬èº«æ— æ³•æœ‰æ•ˆæ”¯æŒçš„è¯­è¨€ç‰¹æ€§ï¼Œä¸ä»£è¡¨å­—èŠ‚ç æœ¬èº«æ— æ³•æœ‰æ•ˆæ”¯ æŒã€‚</p><h6 id="ä¸ºä»€ä¹ˆè¯´-java-è¯­è¨€-ç¼–è¯‘ä¸è§£é‡Šå¹¶å­˜" tabindex="-1"><a class="header-anchor" href="#ä¸ºä»€ä¹ˆè¯´-java-è¯­è¨€-ç¼–è¯‘ä¸è§£é‡Šå¹¶å­˜" aria-hidden="true">#</a> ä¸ºä»€ä¹ˆè¯´ Java è¯­è¨€â€œç¼–è¯‘ä¸è§£é‡Šå¹¶å­˜â€ï¼Ÿ</h6><p>####### <img src="/pinkpig/assets/jvm_002-tc-APl22.png" alt="" loading="lazy"></p><figure><img src="/pinkpig/assets/jvm_003-Li7ZT0OP.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><h5 id="è‡ªåŠ¨åŒ–å†…å­˜ç®¡ç†" tabindex="-1"><a class="header-anchor" href="#è‡ªåŠ¨åŒ–å†…å­˜ç®¡ç†" aria-hidden="true">#</a> è‡ªåŠ¨åŒ–å†…å­˜ç®¡ç†</h5><h6 id="å†…å­˜è‡ªåŠ¨åˆ†é…ä¸å†…å­˜å›æ”¶-åƒåœ¾æ”¶é›†-æŠ€æœ¯" tabindex="-1"><a class="header-anchor" href="#å†…å­˜è‡ªåŠ¨åˆ†é…ä¸å†…å­˜å›æ”¶-åƒåœ¾æ”¶é›†-æŠ€æœ¯" aria-hidden="true">#</a> å†…å­˜è‡ªåŠ¨åˆ†é…ä¸å†…å­˜å›æ”¶ï¼ˆåƒåœ¾æ”¶é›†ï¼‰æŠ€æœ¯</h6><p>é¿å…äº†ç»å¤§éƒ¨åˆ†å†…å­˜æ³„æ¼å’ŒæŒ‡é’ˆè¶Šç•Œé—®é¢˜</p><h5 id="çƒ­ç‚¹ä»£ç æ£€æµ‹å’Œè¿è¡Œæ—¶ç¼–è¯‘åŠä¼˜åŒ–" tabindex="-1"><a class="header-anchor" href="#çƒ­ç‚¹ä»£ç æ£€æµ‹å’Œè¿è¡Œæ—¶ç¼–è¯‘åŠä¼˜åŒ–" aria-hidden="true">#</a> çƒ­ç‚¹ä»£ç æ£€æµ‹å’Œè¿è¡Œæ—¶ç¼–è¯‘åŠä¼˜åŒ–</h5><p>è¿è¡Œæ—¶é—´å¢é•¿å¯è·å¾—æ›´é«˜æ€§èƒ½</p><h5 id="å®Œå–„çš„åº”ç”¨ç¨‹åºæ¥å£" tabindex="-1"><a class="header-anchor" href="#å®Œå–„çš„åº”ç”¨ç¨‹åºæ¥å£" aria-hidden="true">#</a> å®Œå–„çš„åº”ç”¨ç¨‹åºæ¥å£</h5><p>ä¸°å¯Œçš„ç¬¬ä¸‰æ–¹ç±»åº“</p><h4 id="ç»„æˆ" tabindex="-1"><a class="header-anchor" href="#ç»„æˆ" aria-hidden="true">#</a> ç»„æˆ</h4><h5 id="ç¼–ç¨‹è¯­è¨€" tabindex="-1"><a class="header-anchor" href="#ç¼–ç¨‹è¯­è¨€" aria-hidden="true">#</a> ç¼–ç¨‹è¯­è¨€</h5><p>ç‹­ä¹‰ï¼šJava</p><p>å¹¿ä¹‰ï¼šJavaã€Kotlinã€Scalaã€Clojureã€JRubyã€Groovyç­‰å¯è¿è¡ŒäºJVMä¸Šçš„ç¼–ç¨‹è¯­è¨€</p><p>å„ç¡¬ä»¶å¹³å°çš„JVMå®ç°</p><p>Classæ–‡ä»¶æ ¼å¼</p><p>Javaç±»åº“API</p><p>ç¬¬ä¸‰æ–¹ç±»åº“</p><h3 id="jdkã€jreã€jvm" tabindex="-1"><a class="header-anchor" href="#jdkã€jreã€jvm" aria-hidden="true">#</a> JDKã€JREã€JVM</h3><figure><img src="/pinkpig/assets/jvm_004-byehlgXq.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><h3 id="javaå‘å±•å²" tabindex="-1"><a class="header-anchor" href="#javaå‘å±•å²" aria-hidden="true">#</a> Javaå‘å±•å²</h3><p>å‘å¸ƒ 1995å¹´</p><p>Java SE 8(LTS) 2014å¹´3æœˆ</p><p>Java SE 11(LTS) 2018å¹´9æœˆ</p><p>Java SE 17(LTS) 2021å¹´9æœˆ</p><p>Java SE 21(LTS) 2023å¹´9æœˆ</p><h3 id="javaè™šæ‹Ÿæœº" tabindex="-1"><a class="header-anchor" href="#javaè™šæ‹Ÿæœº" aria-hidden="true">#</a> Javaè™šæ‹Ÿæœº</h3><h4 id="æ ‡å‡†è§„èŒƒ" tabindex="-1"><a class="header-anchor" href="#æ ‡å‡†è§„èŒƒ" aria-hidden="true">#</a> æ ‡å‡†è§„èŒƒ</h4><p>JVMæœ‰å¤šç§å®ç°ç‰ˆæœ¬ï¼Œéƒ½è¦éµå¾ªç»Ÿä¸€çš„æ ‡å‡†è§„èŒƒ</p><h4 id="å®ç°" tabindex="-1"><a class="header-anchor" href="#å®ç°" aria-hidden="true">#</a> å®ç°</h4><h5 id="hotspotè™šæ‹Ÿæœº" tabindex="-1"><a class="header-anchor" href="#hotspotè™šæ‹Ÿæœº" aria-hidden="true">#</a> HotSpotè™šæ‹Ÿæœº</h5><p>ä½¿ç”¨èŒƒå›´æœ€å¹¿çš„JVM</p><p>HotSpotï¼Œé¡¾åæ€ä¹‰ï¼Œæ˜¯åŸºäºçƒ­ç‚¹ä»£ç æ¢æµ‹çš„ï¼Œæœ‰JITå³æ—¶ç¼–è¯‘åŠŸèƒ½ï¼Œèƒ½æä¾›æ›´é«˜è´¨é‡çš„æœ¬åœ°ä»£ç </p><h4 id="jvmä½“ç³»æ¶æ„" tabindex="-1"><a class="header-anchor" href="#jvmä½“ç³»æ¶æ„" aria-hidden="true">#</a> JVMä½“ç³»æ¶æ„</h4><p>HotSpot JVM Architecture ä¸»è¦åŒ…æ‹¬3ä¸ªç»„ä»¶</p><figure><img src="/pinkpig/assets/jvm_005-CvygPLAk.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><figure><img src="/pinkpig/assets/jvm_006-y9d8hMfG.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><h5 id="ç±»è£…è½½å­ç³»ç»Ÿ-class-loader-subsystem" tabindex="-1"><a class="header-anchor" href="#ç±»è£…è½½å­ç³»ç»Ÿ-class-loader-subsystem" aria-hidden="true">#</a> ç±»è£…è½½å­ç³»ç»Ÿ Class Loader Subsystem</h5><p>ç±»åŠ è½½è¿‡ç¨‹</p><p>ç±»åŠ è½½å™¨</p><h5 id="è¿è¡Œæ—¶æ•°æ®åŒº-runtime-data-areas" tabindex="-1"><a class="header-anchor" href="#è¿è¡Œæ—¶æ•°æ®åŒº-runtime-data-areas" aria-hidden="true">#</a> è¿è¡Œæ—¶æ•°æ®åŒº Runtime Data Areas</h5><p>å†…å­˜æ¨¡å‹</p><h5 id="å­—èŠ‚ç æ‰§è¡Œå¼•æ“-execution-engine" tabindex="-1"><a class="header-anchor" href="#å­—èŠ‚ç æ‰§è¡Œå¼•æ“-execution-engine" aria-hidden="true">#</a> å­—èŠ‚ç æ‰§è¡Œå¼•æ“ Execution Engine</h5><h6 id="interpreter-è§£é‡Šå™¨" tabindex="-1"><a class="header-anchor" href="#interpreter-è§£é‡Šå™¨" aria-hidden="true">#</a> Interpreter è§£é‡Šå™¨</h6><p>é¡ºåºè¯»å–å¹¶æ‰§è¡Œå­—èŠ‚ç æŒ‡ä»¤</p><h6 id="jit-just-in-time-compiler-å³æ—¶ç¼–è¯‘" tabindex="-1"><a class="header-anchor" href="#jit-just-in-time-compiler-å³æ—¶ç¼–è¯‘" aria-hidden="true">#</a> JIT (Just In Time Compiler) å³æ—¶ç¼–è¯‘</h6><p>æŠµæ¶ˆäº†Interpreteræ‰§è¡Œé€Ÿåº¦æ…¢çš„ç¼ºç‚¹å¹¶æé«˜äº†æ€§èƒ½ã€‚ JITç¼–è¯‘å™¨åŒæ—¶ç¼–è¯‘å­—èŠ‚ç çš„ç±»ä¼¼éƒ¨åˆ†ï¼ˆçƒ­ç‚¹ä»£ç ï¼‰ï¼Œä»è€Œå‡å°‘äº†ç¼–è¯‘æ‰€éœ€çš„æ€»æ—¶é—´ã€‚</p><h6 id="gc-garbage-collection" tabindex="-1"><a class="header-anchor" href="#gc-garbage-collection" aria-hidden="true">#</a> GCï¼ˆGarbage Collectionï¼‰</h6><p>å¼•ç”¨åˆ†ç±»</p><p>åˆ¤æ–­å¯¹è±¡æ˜¯å¦å­˜æ´»</p><p>åƒåœ¾æ”¶é›†ç®—æ³•</p><p>åƒåœ¾æ”¶é›†å™¨</p><p>JVMæ€§èƒ½è°ƒä¼˜</p><h2 id="_2ã€ç±»åŠ è½½æœºåˆ¶" tabindex="-1"><a class="header-anchor" href="#_2ã€ç±»åŠ è½½æœºåˆ¶" aria-hidden="true">#</a> 2ã€ç±»åŠ è½½æœºåˆ¶</h2><h3 id="classæ–‡ä»¶ç»“æ„" tabindex="-1"><a class="header-anchor" href="#classæ–‡ä»¶ç»“æ„" aria-hidden="true">#</a> Classæ–‡ä»¶ç»“æ„</h3><p>Class æ–‡ä»¶æ˜¯äºŒè¿›åˆ¶æ–‡ä»¶ï¼Œå®ƒçš„å†…å®¹å…·æœ‰ä¸¥æ ¼çš„è§„èŒƒï¼Œæ–‡ä»¶ä¸­æ²¡æœ‰ä»»ä½•ç©ºæ ¼ï¼Œå…¨éƒ½æ˜¯è¿ç»­çš„0/1ã€‚Class æ–‡ä»¶ä¸­çš„æ‰€æœ‰å†…å®¹è¢«åˆ†ä¸ºä¸¤ç§ç±»å‹ï¼šæ— ç¬¦å·æ•°ã€è¡¨ã€‚</p><pre><code>   æ— ç¬¦å·æ•°ï¼šæ— ç¬¦å·æ•°è¡¨ç¤º Class æ–‡ä»¶ä¸­çš„å€¼ï¼Œè¿™äº›å€¼æ²¡æœ‰ä»»ä½•ç±»å‹ï¼Œä½†æœ‰ä¸åŒçš„é•¿åº¦ã€‚u1ã€u2ã€u4ã€u8 åˆ†åˆ«ä»£è¡¨ 1/2/4/8 å­—èŠ‚çš„æ— ç¬¦å·æ•°ã€‚
   è¡¨ï¼šç”±å¤šä¸ªæ— ç¬¦å·æ•°æˆ–è€…å…¶ä»–è¡¨ä½œä¸ºæ•°æ®é¡¹æ„æˆçš„å¤åˆæ•°æ®ç±»å‹ã€‚
</code></pre><h4 id="æ„æˆ" tabindex="-1"><a class="header-anchor" href="#æ„æˆ" aria-hidden="true">#</a> æ„æˆ</h4><h5 id="é­”æ•°" tabindex="-1"><a class="header-anchor" href="#é­”æ•°" aria-hidden="true">#</a> é­”æ•°</h5><p>1-4å­—èŠ‚</p><p>è¡¨ç¤ºClassæ–‡ä»¶ç±»å‹</p><p>16 è¿›åˆ¶è¡¨ç¤ºçš„â€œCAFE BABEâ€</p><h5 id="ç‰ˆæœ¬ä¿¡æ¯" tabindex="-1"><a class="header-anchor" href="#ç‰ˆæœ¬ä¿¡æ¯" aria-hidden="true">#</a> ç‰ˆæœ¬ä¿¡æ¯</h5><h6 id="_5-8å­—èŠ‚" tabindex="-1"><a class="header-anchor" href="#_5-8å­—èŠ‚" aria-hidden="true">#</a> 5-8å­—èŠ‚</h6><p>5-6 æ¬¡ç‰ˆæœ¬å·</p><p>7-8 ä¸»ç‰ˆæœ¬å·</p><h6 id="è¡¨ç¤ºjdkç‰ˆæœ¬" tabindex="-1"><a class="header-anchor" href="#è¡¨ç¤ºjdkç‰ˆæœ¬" aria-hidden="true">#</a> è¡¨ç¤ºJDKç‰ˆæœ¬</h6><p>é«˜ç‰ˆæœ¬çš„ JDK èƒ½å‘ä¸‹å…¼å®¹ä»¥å‰ç‰ˆæœ¬çš„ Class æ–‡ä»¶ï¼Œä½†ä¸èƒ½è¿è¡Œä»¥åç‰ˆæœ¬çš„ Class æ–‡ä»¶ï¼Œå³ä½¿æ–‡ ä»¶æ ¼å¼å¹¶æœªå‘ç”Ÿä»»ä½•å˜åŒ–ï¼Œè™šæ‹Ÿæœºä¹Ÿå¿…éœ€æ‹’ç»æ‰§è¡Œè¶…è¿‡å…¶ç‰ˆæœ¬å·çš„ Class æ–‡ä»¶</p><h5 id="å¸¸é‡æ± " tabindex="-1"><a class="header-anchor" href="#å¸¸é‡æ± " aria-hidden="true">#</a> å¸¸é‡æ± </h5><h6 id="å­—é¢å€¼å¸¸é‡" tabindex="-1"><a class="header-anchor" href="#å­—é¢å€¼å¸¸é‡" aria-hidden="true">#</a> å­—é¢å€¼å¸¸é‡</h6><p>å­—é¢å€¼å¸¸é‡å°±æ˜¯æˆ‘ä»¬åœ¨ç¨‹åºä¸­å®šä¹‰çš„å­—ç¬¦ä¸²ã€è¢« final ä¿®é¥°çš„å€¼</p><h6 id="ç¬¦å·å¼•ç”¨" tabindex="-1"><a class="header-anchor" href="#ç¬¦å·å¼•ç”¨" aria-hidden="true">#</a> ç¬¦å·å¼•ç”¨</h6><p>ç¬¦å·å¼•ç”¨å°±æ˜¯æˆ‘ä»¬å®šä¹‰çš„å„ç§åå­—ï¼šç±»å’Œæ¥å£çš„å…¨é™å®šåã€å­—æ®µçš„åå­—å’Œæè¿°ç¬¦ã€æ–¹æ³•çš„åå­—å’Œæè¿°ç¬¦</p><h5 id="è®¿é—®æ ‡å¿—" tabindex="-1"><a class="header-anchor" href="#è®¿é—®æ ‡å¿—" aria-hidden="true">#</a> è®¿é—®æ ‡å¿—</h5><p>è¯†åˆ«ä¸€äº›ç±»æˆ–è€…æ¥å£å±‚æ¬¡çš„è®¿é—®ä¿¡æ¯ï¼ŒåŒ…æ‹¬ï¼šè¿™ä¸ª Class æ˜¯ç±»è¿˜æ˜¯æ¥å£ï¼›æ˜¯å¦å®šä¹‰ä¸º public ç±»å‹ï¼›æ˜¯å¦è¢« abstract/finalä¿®é¥°</p><p>ç±»ç´¢å¼•ã€çˆ¶ç±»ç´¢å¼•ã€æ¥å£ç´¢å¼•é›†åˆ</p><h5 id="å­—æ®µè¡¨é›†åˆ" tabindex="-1"><a class="header-anchor" href="#å­—æ®µè¡¨é›†åˆ" aria-hidden="true">#</a> å­—æ®µè¡¨é›†åˆ</h5><p>å­˜å‚¨æœ¬ç±»æ¶‰åŠåˆ°çš„æˆå‘˜å˜é‡ï¼ŒåŒ…æ‹¬å®ä¾‹å˜é‡å’Œç±»å˜é‡ï¼Œä½†ä¸åŒ…æ‹¬æ–¹æ³•ä¸­çš„å±€éƒ¨å˜é‡</p><p>æ–¹æ³•è¡¨é›†åˆ</p><h5 id="å±æ€§è¡¨é›†åˆ" tabindex="-1"><a class="header-anchor" href="#å±æ€§è¡¨é›†åˆ" aria-hidden="true">#</a> å±æ€§è¡¨é›†åˆ</h5><p>æ–¹æ³•è¡¨çš„å±æ€§è¡¨é›†åˆä¸­æœ‰ä¸€å¼  Code å±æ€§è¡¨ï¼Œç”¨äºå­˜å‚¨å½“å‰æ–¹æ³•ç»ç¼–è¯‘å™¨ç¼–è¯‘åçš„å­—èŠ‚ç æŒ‡ä»¤</p><h3 id="ç±»åŠ è½½è¿‡ç¨‹-ç±»çš„ç”Ÿå‘½å‘¨æœŸ" tabindex="-1"><a class="header-anchor" href="#ç±»åŠ è½½è¿‡ç¨‹-ç±»çš„ç”Ÿå‘½å‘¨æœŸ" aria-hidden="true">#</a> ç±»åŠ è½½è¿‡ç¨‹/ç±»çš„ç”Ÿå‘½å‘¨æœŸ</h3><p>ç±»åŠ è½½è¿‡ç¨‹å³æ˜¯æŒ‡JVMè™šæ‹ŸæœºæŠŠ.classæ–‡ä»¶ä¸­ç±»ä¿¡æ¯åŠ è½½è¿›å†…å­˜ï¼Œå¹¶è¿›è¡Œè§£æç”Ÿæˆå¯¹åº”çš„classå¯¹è±¡çš„è¿‡ç¨‹ã€‚ JVMä¸æ˜¯ä¸€å¼€å§‹å°±æŠŠæ‰€æœ‰çš„ç±»éƒ½åŠ è½½è¿›å†…å­˜ä¸­ï¼Œè€Œæ˜¯åªæœ‰ç¬¬ä¸€æ¬¡é‡åˆ°æŸä¸ªéœ€è¦è¿è¡Œçš„ç±»æ—¶æ‰ä¼šåŠ è½½ï¼Œä¸”åªåŠ è½½ä¸€æ¬¡ã€‚ï¼ˆJVMåœ¨æ‰§è¡ŒæŸæ®µä»£ç æ—¶ï¼Œé‡åˆ°äº†class Aï¼Œ ç„¶è€Œæ­¤æ—¶å†…å­˜ä¸­å¹¶æ²¡æœ‰class Açš„ç›¸å…³ä¿¡æ¯ï¼Œäºæ˜¯JVMå°±ä¼šåˆ°ç›¸åº”çš„classæ–‡ä»¶ä¸­å»å¯»æ‰¾class Açš„ç±»ä¿¡æ¯ï¼Œå¹¶åŠ è½½è¿›å†…å­˜ä¸­ï¼Œè¿™å°±æ˜¯æˆ‘ä»¬æ‰€è¯´çš„ç±»åŠ è½½è¿‡ç¨‹ã€‚ï¼‰</p><p>ç±»åŠ è½½è¿‡ç¨‹åŒ…æ‹¬5ä¸ªé˜¶æ®µï¼šåŠ è½½ã€éªŒè¯ã€å‡†å¤‡ã€è§£æã€åˆå§‹åŒ–</p><p>ç±»çš„ç”Ÿå‘½å‘¨æœŸåŒ…æ‹¬7å„é˜¶æ®µï¼šç±»åŠ è½½5ä¸ªé˜¶æ®µã€ä½¿ç”¨ã€å¸è½½</p><p>éªŒè¯ã€å‡†å¤‡ã€è§£æ3ä¸ªé˜¶æ®µç»Ÿç§°ä¸ºè¿æ¥</p><figure><img src="/pinkpig/assets/jvm_007-fp66yIEd.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><figure><img src="/pinkpig/assets/jvm_008-1_Ufdpln.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><figure><img src="/pinkpig/assets/jvm_009-fsk0Xhkq.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><h4 id="_5ä¸ªé˜¶æ®µ" tabindex="-1"><a class="header-anchor" href="#_5ä¸ªé˜¶æ®µ" aria-hidden="true">#</a> 5ä¸ªé˜¶æ®µ</h4><h5 id="åŠ è½½-æŠŠclasså­—èŠ‚ç æ–‡ä»¶ä»å„ä¸ªæ¥æºé€šè¿‡ç±»åŠ è½½å™¨è£…è½½å…¥å†…å­˜ä¸­" tabindex="-1"><a class="header-anchor" href="#åŠ è½½-æŠŠclasså­—èŠ‚ç æ–‡ä»¶ä»å„ä¸ªæ¥æºé€šè¿‡ç±»åŠ è½½å™¨è£…è½½å…¥å†…å­˜ä¸­" aria-hidden="true">#</a> åŠ è½½ï¼šæŠŠclasså­—èŠ‚ç æ–‡ä»¶ä»å„ä¸ªæ¥æºé€šè¿‡ç±»åŠ è½½å™¨è£…è½½å…¥å†…å­˜ä¸­</h5><h6 id="åŠ è½½-æ˜¯-ç±»åŠ è½½-è¿‡ç¨‹çš„ä¸€ä¸ªé˜¶æ®µ-ä¸èƒ½æ··æ·†è¿™ä¸¤ä¸ªåè¯ã€‚åœ¨åŠ è½½é˜¶æ®µ-è™šæ‹Ÿæœºéœ€è¦å®Œæˆ-3-ä»¶" tabindex="-1"><a class="header-anchor" href="#åŠ è½½-æ˜¯-ç±»åŠ è½½-è¿‡ç¨‹çš„ä¸€ä¸ªé˜¶æ®µ-ä¸èƒ½æ··æ·†è¿™ä¸¤ä¸ªåè¯ã€‚åœ¨åŠ è½½é˜¶æ®µ-è™šæ‹Ÿæœºéœ€è¦å®Œæˆ-3-ä»¶" aria-hidden="true">#</a> â€œåŠ è½½â€æ˜¯â€œç±»åŠ è½½â€è¿‡ç¨‹çš„ä¸€ä¸ªé˜¶æ®µï¼Œä¸èƒ½æ··æ·†è¿™ä¸¤ä¸ªåè¯ã€‚åœ¨åŠ è½½é˜¶æ®µï¼Œè™šæ‹Ÿæœºéœ€è¦å®Œæˆ 3 ä»¶</h6><p>äº‹ï¼š 1ã€é€šè¿‡ç±»çš„å…¨é™å®šåè·å–è¯¥ç±»çš„äºŒè¿›åˆ¶å­—èŠ‚æµã€‚ 2ã€å°†äºŒè¿›åˆ¶å­—èŠ‚æµæ‰€ä»£è¡¨çš„é™æ€ç»“æ„è½¬åŒ–ä¸ºæ–¹æ³•åŒºçš„è¿è¡Œæ—¶æ•°æ®ç»“æ„ã€‚ 3ã€åœ¨å†…å­˜ä¸­ï¼ˆå †ä¸­ï¼‰åˆ›å»ºä¸€ä¸ªä»£è¡¨è¯¥ç±»çš„ java.lang.Class å¯¹è±¡ï¼Œä½œä¸ºæ–¹æ³•åŒºè¿™ä¸ªç±»çš„å„ç§æ•°æ®çš„è®¿é—®å…¥å£ã€‚ è·å–äºŒè¿›åˆ¶å­—èŠ‚æµ/å­—èŠ‚ç æ¥æºé€”å¾„ï¼š 1ã€ä» zip åŒ…ä¸­è¯»å–ï¼Œå¦‚ jarã€warç­‰ 2ã€ä»ç½‘ç»œä¸­è·å–ï¼Œå¦‚ Applet 3ã€é€šè¿‡åŠ¨æ€ä»£ç†æŠ€æœ¯ç”Ÿæˆä»£ç†ç±»çš„äºŒè¿›åˆ¶å­—èŠ‚æµ 4ã€ç”± JSP æ–‡ä»¶ç”Ÿæˆå¯¹åº”çš„ Class ç±» 5ã€ä»æ•°æ®åº“ä¸­è¯»å–ï¼Œå¦‚ æœ‰äº›ä¸­é—´ä»¶æœåŠ¡å™¨å¯ä»¥é€‰æ‹©æŠŠç¨‹åºå®‰è£…åˆ°æ•°æ®åº“ä¸­æ¥å®Œæˆç¨‹åºä»£ç åœ¨ é›†ç¾¤é—´çš„åˆ†å‘ã€‚</p><h5 id="éªŒè¯-ä¸»è¦æ˜¯ä¸ºäº†ä¿è¯åŠ è½½è¿›æ¥çš„å­—èŠ‚æµç¬¦åˆè™šæ‹Ÿæœºè§„èŒƒ-ä¸ä¼šé€ æˆå®‰å…¨é”™è¯¯" tabindex="-1"><a class="header-anchor" href="#éªŒè¯-ä¸»è¦æ˜¯ä¸ºäº†ä¿è¯åŠ è½½è¿›æ¥çš„å­—èŠ‚æµç¬¦åˆè™šæ‹Ÿæœºè§„èŒƒ-ä¸ä¼šé€ æˆå®‰å…¨é”™è¯¯" aria-hidden="true">#</a> éªŒè¯ï¼šä¸»è¦æ˜¯ä¸ºäº†ä¿è¯åŠ è½½è¿›æ¥çš„å­—èŠ‚æµç¬¦åˆè™šæ‹Ÿæœºè§„èŒƒï¼Œä¸ä¼šé€ æˆå®‰å…¨é”™è¯¯</h5><figure><img src="/pinkpig/assets/jvm_010-BMwGUqM9.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><h6 id="æ–‡ä»¶æ ¼å¼éªŒè¯" tabindex="-1"><a class="header-anchor" href="#æ–‡ä»¶æ ¼å¼éªŒè¯" aria-hidden="true">#</a> æ–‡ä»¶æ ¼å¼éªŒè¯</h6><p>éªŒè¯å­—èŠ‚æµæ˜¯å¦ç¬¦åˆ Class æ–‡ä»¶æ ¼å¼çš„è§„èŒƒï¼Œå¹¶ä¸”èƒ½è¢«å½“å‰ç‰ˆæœ¬çš„è™šæ‹Ÿæœºå¤„ç†</p><p>æ¯”å¦‚å¸¸é‡ä¸­æ˜¯å¦æœ‰ä¸è¢«æ”¯æŒçš„å¸¸é‡ï¼Ÿæ–‡ä»¶ä¸­æ˜¯å¦æœ‰ä¸è§„èŒƒçš„æˆ–è€…é™„åŠ çš„å…¶ä»–ä¿¡æ¯ï¼Ÿ</p><h6 id="å…ƒæ•°æ®éªŒè¯" tabindex="-1"><a class="header-anchor" href="#å…ƒæ•°æ®éªŒè¯" aria-hidden="true">#</a> å…ƒæ•°æ®éªŒè¯</h6><p>æ¯”å¦‚è¯¥ç±»æ˜¯å¦ç»§æ‰¿äº†è¢«finalä¿®é¥°çš„ç±»ï¼Ÿç±»ä¸­çš„å­—æ®µï¼Œæ–¹æ³•æ˜¯å¦ä¸çˆ¶ç±»å†²çªï¼Ÿæ˜¯å¦å‡ºç°äº†ä¸åˆç†çš„é‡è½½ï¼Ÿ</p><h6 id="å­—èŠ‚ç éªŒè¯" tabindex="-1"><a class="header-anchor" href="#å­—èŠ‚ç éªŒè¯" aria-hidden="true">#</a> å­—èŠ‚ç éªŒè¯</h6><p>æœ¬é˜¶æ®µæ˜¯éªŒè¯è¿‡ç¨‹ä¸­æœ€å¤æ‚çš„ä¸€ä¸ªé˜¶æ®µï¼Œæ˜¯å¯¹æ–¹æ³•ä½“è¿›è¡Œè¯­ä¹‰åˆ†æï¼Œä¿è¯æ–¹æ³•åœ¨è¿è¡Œæ—¶ä¸ä¼šå‡ºç°å±å®³è™šæ‹Ÿæœºçš„äº‹ä»¶ã€‚</p><h6 id="ç¬¦å·å¼•ç”¨éªŒè¯" tabindex="-1"><a class="header-anchor" href="#ç¬¦å·å¼•ç”¨éªŒè¯" aria-hidden="true">#</a> ç¬¦å·å¼•ç”¨éªŒè¯</h6><p>æ¯”å¦‚æ ¡éªŒç¬¦å·å¼•ç”¨ä¸­é€šè¿‡å…¨é™å®šåæ˜¯å¦èƒ½å¤Ÿæ‰¾åˆ°å¯¹åº”çš„ç±»ï¼Ÿæ ¡éªŒç¬¦å·å¼•ç”¨ä¸­çš„è®¿é—®æ€§ï¼ˆprivateï¼Œpublicç­‰ï¼‰æ˜¯å¦å¯è¢«å½“å‰ç±»è®¿é—®ï¼Ÿ</p><h5 id="å‡†å¤‡" tabindex="-1"><a class="header-anchor" href="#å‡†å¤‡" aria-hidden="true">#</a> å‡†å¤‡</h5><h6 id="ä¸ºç±»å˜é‡-æˆ–ç§°é™æ€å˜é‡æˆ–é™æ€æˆå‘˜å˜é‡-è¢«staticä¿®é¥°çš„å˜é‡-åˆ†é…å†…å­˜å¹¶èµ‹é›¶å€¼" tabindex="-1"><a class="header-anchor" href="#ä¸ºç±»å˜é‡-æˆ–ç§°é™æ€å˜é‡æˆ–é™æ€æˆå‘˜å˜é‡-è¢«staticä¿®é¥°çš„å˜é‡-åˆ†é…å†…å­˜å¹¶èµ‹é›¶å€¼" aria-hidden="true">#</a> ä¸ºç±»å˜é‡ï¼ˆæˆ–ç§°é™æ€å˜é‡æˆ–é™æ€æˆå‘˜å˜é‡ï¼Œè¢«staticä¿®é¥°çš„å˜é‡ï¼‰åˆ†é…å†…å­˜å¹¶èµ‹é›¶å€¼</h6><p>Noteï¼šæ³¨æ„ä¸æ˜¯å®ä¾‹å˜é‡ æ‰©å±•ï¼šç±»å˜é‡å’Œå±€éƒ¨å˜é‡çš„åŒºåˆ«</p><p>ç±»å˜é‡ä¼šèµ‹é›¶å€¼ï¼Œå±€éƒ¨å˜é‡ä¸ä¼šèµ‹é›¶å€¼ï¼Œå¦‚æœå±€éƒ¨å˜é‡æ²¡æœ‰è¢«åˆå§‹åŒ–å°±ä¼šç¼–è¯‘æŠ¥é”™</p><p>ç¤ºä¾‹ï¼šæ­¤æ—¶A==0</p><figure><img src="/pinkpig/assets/jvm_011-k2dbtuHb.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><h5 id="è§£æ" tabindex="-1"><a class="header-anchor" href="#è§£æ" aria-hidden="true">#</a> è§£æ</h5><h6 id="å°†å¸¸é‡æ± ä¸­çš„ç¬¦å·å¼•ç”¨-ç±»ã€æ¥å£ã€å­—æ®µå’Œæ–¹æ³•çš„ç¬¦å·å¼•ç”¨-æ›¿æ¢ä¸ºç›´æ¥å¼•ç”¨" tabindex="-1"><a class="header-anchor" href="#å°†å¸¸é‡æ± ä¸­çš„ç¬¦å·å¼•ç”¨-ç±»ã€æ¥å£ã€å­—æ®µå’Œæ–¹æ³•çš„ç¬¦å·å¼•ç”¨-æ›¿æ¢ä¸ºç›´æ¥å¼•ç”¨" aria-hidden="true">#</a> å°†å¸¸é‡æ± ä¸­çš„ç¬¦å·å¼•ç”¨ï¼ˆç±»ã€æ¥å£ã€å­—æ®µå’Œæ–¹æ³•çš„ç¬¦å·å¼•ç”¨ï¼‰æ›¿æ¢ä¸ºç›´æ¥å¼•ç”¨</h6><p>ä¸¤ä¸ªé‡ç‚¹ï¼š</p><p>####### â— ç¬¦å·å¼•ç”¨ã€‚å³ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œä½†æ˜¯è¿™ä¸ªå­—ç¬¦ä¸²ç»™å‡ºäº†ä¸€äº›èƒ½å¤Ÿå”¯ä¸€æ€§è¯†åˆ«ä¸€ä¸ªæ–¹æ³•ï¼Œä¸€ä¸ªå˜é‡ï¼Œä¸€ä¸ªç±»çš„ç›¸å…³ä¿¡æ¯ã€‚ ç¬¦å·å¼•ç”¨ä¸è™šæ‹Ÿæœºå®ç°çš„å†…å­˜å¸ƒå±€æ— å…³ï¼Œå¼• ç”¨çš„ç›®æ ‡å¹¶ä¸ä¸€å®šæ˜¯å·²ç»åŠ è½½åˆ°è™šæ‹Ÿæœºå†…å­˜å½“ä¸­çš„å†…å®¹ã€‚</p><p>####### â— ç›´æ¥å¼•ç”¨ã€‚å¯ä»¥ç†è§£ä¸ºä¸€ä¸ªå†…å­˜åœ°å€ï¼Œæˆ–è€…ä¸€ä¸ªåç§»é‡ã€‚ ç›´æ¥å¼•ç”¨æ˜¯å¯ä»¥ç›´æ¥æŒ‡å‘ç›®æ ‡çš„æŒ‡é’ˆã€ç›¸å¯¹åç§»é‡æˆ–è€…æ˜¯ä¸€ä¸ªèƒ½é—´æ¥å®šä½åˆ°ç›®æ ‡çš„å¥æŸ„ã€‚</p><p>ç›´æ¥å¼•ç”¨æ˜¯å’Œè™šæ‹Ÿæœºå®ç°çš„å†…å­˜å¸ƒå±€ç›´æ¥ç›¸å…³çš„ï¼ŒåŒä¸€ä¸ªç¬¦å·å¼•ç”¨åœ¨ä¸åŒè™šæ‹Ÿæœºå®ä¾‹ä¸Šç¿»è¯‘å‡ºæ¥çš„ç›´æ¥å¼•ç”¨ä¸€èˆ¬ä¸ä¼šç›¸åŒã€‚å¦‚æœæœ‰äº†ç›´æ¥å¼•ç”¨ï¼Œé‚£å¼•ç”¨çš„ç›®æ ‡å¿…å®šå·²ç»åœ¨è™šæ‹Ÿæœºçš„å†…å­˜ä¸­å­˜åœ¨ã€‚</p><p>è™šæ‹Ÿæœºå®ç°å¯ä»¥å¯¹ç¬¬ä¸€æ¬¡è§£æçš„ç»“æœè¿›è¡Œç¼“å­˜ï¼Œè­¬å¦‚åœ¨è¿è¡Œæ—¶ç›´æ¥å¼•ç”¨å¸¸é‡æ± ä¸­çš„è®°å½•ï¼Œå¹¶æŠŠå¸¸é‡æ ‡è¯†ä¸ºå·²è§£æçŠ¶æ€ï¼Œä»è€Œé¿å…è§£æåŠ¨ä½œé‡å¤è¿›è¡Œã€‚</p><p>ä¸¾ä¸ªä¾‹å­æ¥è¯´ï¼Œç°åœ¨è°ƒç”¨æ–¹æ³•hello()ï¼Œè¿™ä¸ªæ–¹æ³•çš„åœ°å€æ˜¯1234567ï¼Œé‚£ä¹ˆhelloå°±æ˜¯ç¬¦å·å¼•ç”¨ï¼Œ1234567å°±æ˜¯ç›´æ¥å¼•ç”¨ã€‚</p><p>åœ¨è§£æé˜¶æ®µï¼Œè™šæ‹Ÿæœºä¼šæŠŠæ‰€æœ‰çš„ç±»åï¼Œæ–¹æ³•åï¼Œå­—æ®µåè¿™äº›ç¬¦å·å¼•ç”¨æ›¿æ¢ä¸ºå…·ä½“çš„å†…å­˜åœ°å€æˆ–åç§»é‡ï¼Œä¹Ÿå°±æ˜¯ç›´æ¥å¼•ç”¨ã€‚</p><h5 id="åˆå§‹åŒ–-å¯¹ç±»çš„é™æ€å˜é‡åˆå§‹åŒ–" tabindex="-1"><a class="header-anchor" href="#åˆå§‹åŒ–-å¯¹ç±»çš„é™æ€å˜é‡åˆå§‹åŒ–" aria-hidden="true">#</a> åˆå§‹åŒ–ï¼šå¯¹ç±»çš„é™æ€å˜é‡åˆå§‹åŒ–</h5><h6 id="æ‰§è¡Œæ‰€æœ‰ç”¨æˆ·è‡ªå®šä¹‰çš„åˆå§‹å€¼èµ‹å€¼æ“ä½œ" tabindex="-1"><a class="header-anchor" href="#æ‰§è¡Œæ‰€æœ‰ç”¨æˆ·è‡ªå®šä¹‰çš„åˆå§‹å€¼èµ‹å€¼æ“ä½œ" aria-hidden="true">#</a> æ‰§è¡Œæ‰€æœ‰ç”¨æˆ·è‡ªå®šä¹‰çš„åˆå§‹å€¼èµ‹å€¼æ“ä½œ</h6><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>åˆå§‹åŒ–é˜¶æ®µå°±æ˜¯æ‰§è¡Œç±»æ„é€ å™¨&lt;clinit&gt;()æ–¹æ³•çš„è¿‡ç¨‹ã€‚&lt;clinit&gt;()å¹¶ä¸æ˜¯ç¨‹åºå‘˜åœ¨Javaä»£ç ä¸­ç›´æ¥ç¼–å†™çš„æ–¹æ³•ï¼Œå®ƒæ˜¯Javacç¼–è¯‘å™¨çš„è‡ªåŠ¨ç”Ÿæˆç‰©ï¼Œ&lt;clinit&gt;()æ–¹æ³•æ˜¯ç”±ç¼–è¯‘å™¨è‡ªåŠ¨æ”¶é›†ç±»ä¸­çš„æ‰€æœ‰ç±»å˜é‡çš„èµ‹å€¼åŠ¨ä½œå’Œé™æ€è¯­å¥å—ï¼ˆstatic{}å—ï¼‰ä¸­çš„
è¯­å¥åˆå¹¶äº§ç”Ÿçš„ï¼Œã€æ‰§è¡Œèµ‹å€¼æ“ä½œå’Œç±»çš„é™æ€ä»£ç å—æ¥åˆå§‹åŒ–é™æ€æˆå‘˜å˜é‡ã€‘
ç¤ºä¾‹ï¼šåœ¨æ­¤é˜¶æ®µï¼Œæ‰§è¡Œäº†A=1ååˆæ‰§è¡Œäº†A=2ï¼ˆæ‰€æœ‰çš„ç”¨æˆ·è‡ªå®šä¹‰çš„åˆå§‹å€¼éƒ½åœ¨åˆå§‹åŒ–é˜¶æ®µèµ‹å€¼ï¼‰ï¼Œæ‰§è¡Œé¡ºåºæ˜¯æ–‡ä»¶ä¸­å‡ºç°çš„é¡ºåº
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="/pinkpig/assets/jvm_011-k2dbtuHb.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>ç¼–è¯‘å™¨æ”¶é›†çš„é¡ºåºæ˜¯ç”±è¯­å¥åœ¨æºæ–‡ä»¶ä¸­å‡ºç°çš„é¡ºåºå†³å®šçš„ï¼Œé™æ€è¯­å¥å—ä¸­åªèƒ½è®¿é—® åˆ°å®šä¹‰åœ¨é™æ€è¯­å¥å—ä¹‹å‰çš„å˜é‡ï¼Œå®šä¹‰åœ¨å®ƒä¹‹åçš„å˜é‡ï¼Œåœ¨å‰é¢çš„é™æ€è¯­å¥å—å¯ä»¥èµ‹å€¼ï¼Œä½†æ˜¯ä¸èƒ½è®¿ é—®</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>Â·&lt;clinit&gt;()æ–¹æ³•å¯¹äºç±»æˆ–æ¥å£æ¥è¯´å¹¶ä¸æ˜¯å¿…éœ€çš„ï¼Œå¦‚æœä¸€ä¸ªç±»ä¸­æ²¡æœ‰é™æ€è¯­å¥å—ï¼Œä¹Ÿæ²¡æœ‰å¯¹å˜é‡çš„
èµ‹å€¼æ“ä½œï¼Œé‚£ä¹ˆç¼–è¯‘å™¨å¯ä»¥ä¸ä¸ºè¿™ä¸ªç±»ç”Ÿæˆ&lt;clinit&gt;()æ–¹æ³•
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>Java è™šæ‹Ÿæœºè§„èŒƒæ²¡æœ‰å¼ºåˆ¶çº¦æŸç±»åŠ è½½è¿‡ç¨‹çš„ç¬¬ä¸€é˜¶æ®µï¼ˆå³ï¼šåŠ è½½ï¼‰ä»€ä¹ˆæ—¶å€™å¼€å§‹ï¼Œä½†å¯¹äºâ€œåˆ å§‹åŒ–â€é˜¶æ®µï¼Œæœ‰ç€ä¸¥æ ¼çš„è§„å®šã€‚æœ‰ä¸”ä»…æœ‰ 5 ç§æƒ…å†µå¿…é¡»ç«‹å³å¯¹ç±»è¿›è¡Œåˆå§‹åŒ–</p><h6 id="ä¸»åŠ¨å¼•ç”¨ä¸è¢«åŠ¨å¼•ç”¨" tabindex="-1"><a class="header-anchor" href="#ä¸»åŠ¨å¼•ç”¨ä¸è¢«åŠ¨å¼•ç”¨" aria-hidden="true">#</a> ä¸»åŠ¨å¼•ç”¨ä¸è¢«åŠ¨å¼•ç”¨</h6><p>è¿™ 5 ç§åœºæ™¯ä¸­çš„è¡Œä¸ºç§°ä¸ºå¯¹ä¸€ä¸ªç±»è¿›è¡Œä¸»åŠ¨å¼•ç”¨ï¼Œé™¤æ­¤ä¹‹å¤–ï¼Œå…¶å®ƒæ‰€æœ‰å¼•ç”¨ç±»çš„æ–¹å¼éƒ½ä¸ä¼šè§¦ å‘åˆå§‹åŒ–ï¼Œç§°ä¸ºè¢«åŠ¨å¼•ç”¨ã€‚</p><p>####### è¢«åŠ¨å¼•ç”¨æƒ…å½¢ä¸¾ä¾‹ é€šè¿‡å­ç±»å¼•ç”¨çˆ¶ç±»çš„é™æ€å­—æ®µï¼Œä¸ä¼šå¯¼è‡´å­ç±»åˆå§‹åŒ–ã€‚</p><p>å¯¹äºé™æ€å­—æ®µï¼Œåªæœ‰ç›´æ¥å®šä¹‰è¿™ä¸ªå­—æ®µçš„ç±»æ‰ä¼šè¢«åˆå§‹åŒ–ï¼Œå› æ­¤é€šè¿‡å…¶å­ç±»æ¥å¼•ç”¨çˆ¶ç±»ä¸­å®šä¹‰ çš„é™æ€å­—æ®µï¼Œåªä¼šè§¦å‘çˆ¶ç±»çš„åˆå§‹åŒ–è€Œä¸ä¼šè§¦å‘å­ç±»çš„åˆå§‹åŒ–ã€‚</p><figure><img src="/pinkpig/assets/jvm_012-DfFBentZ.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>é€šè¿‡æ•°ç»„å®šä¹‰æ¥å¼•ç”¨ç±»ï¼Œä¸ä¼šè§¦å‘æ­¤ç±»çš„åˆå§‹åŒ–ã€‚</p><p>ä¸ä¼šè§¦å‘æ•°ç»„ç±»å‹çš„åˆå§‹åŒ–ï¼Œä½†ä¼šè§¦å‘â€œ[L å…¨ç±»åâ€è¿™ä¸ªç±»çš„åˆå§‹åŒ–ï¼Œå®ƒç”±è™šæ‹Ÿæœºè‡ªåŠ¨ç”Ÿ æˆï¼Œç›´æ¥ç»§æ‰¿è‡ª java.lang.Objectï¼Œåˆ›å»ºåŠ¨ä½œç”±å­—èŠ‚ç æŒ‡ä»¤ newarray è§¦å‘ã€‚</p><figure><img src="/pinkpig/assets/jvm_013-ToDWMVIO.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>å¸¸é‡åœ¨ç¼–è¯‘é˜¶æ®µä¼šå­˜å…¥è°ƒç”¨ç±»çš„å¸¸é‡æ± ä¸­ï¼Œæœ¬è´¨ä¸Šå¹¶æ²¡æœ‰ç›´æ¥å¼•ç”¨åˆ°å®šä¹‰å¸¸é‡çš„ç±»ï¼Œå› æ­¤ä¸ä¼šè§¦å‘å®šä¹‰å¸¸é‡çš„ç±»çš„åˆå§‹åŒ–ï¼Œè°ƒç”¨ç±»å’Œå®šä¹‰å¸¸é‡çš„ç±»åœ¨ç¼–è¯‘æˆ Class ä¹‹åå°±æ²¡æœ‰ä»»ä½•è”ç³»äº†ã€‚</p><figure><img src="/pinkpig/assets/jvm_014-OQJf3eiW.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><h6 id="_5ç§æƒ…å½¢" tabindex="-1"><a class="header-anchor" href="#_5ç§æƒ…å½¢" aria-hidden="true">#</a> 5ç§æƒ…å½¢</h6><p>åœ¨é‡åˆ° newã€putstaticã€getstaticã€invokestatic å­—èŠ‚ç æŒ‡ä»¤æ—¶ï¼Œå¦‚æœç±»å°šæœªåˆå§‹åŒ–ï¼Œåˆ™éœ€è¦å…ˆè§¦å‘å…¶åˆå§‹åŒ–ã€‚</p><p>å¯¹ç±»è¿›è¡Œåå°„è°ƒç”¨æ—¶ï¼Œå¦‚æœç±»è¿˜æ²¡æœ‰åˆå§‹åŒ–ï¼Œåˆ™éœ€è¦å…ˆè§¦å‘å…¶åˆå§‹åŒ–ã€‚</p><p>åˆå§‹åŒ–ä¸€ä¸ªç±»æ—¶ï¼Œå¦‚æœå…¶çˆ¶ç±»è¿˜æ²¡æœ‰åˆå§‹åŒ–ï¼Œåˆ™éœ€è¦å…ˆåˆå§‹åŒ–çˆ¶ç±»ã€‚ å¦‚æœåŒæ—¶åŒ…å«å¤šä¸ªé™æ€å˜é‡å’Œé™æ€ä»£ç å—ï¼Œåˆ™æŒ‰ç…§è‡ªä¸Šè€Œä¸‹çš„é¡ºåºä¾æ¬¡æ‰§è¡Œã€‚</p><p>è™šæ‹Ÿæœºå¯åŠ¨æ—¶ï¼Œç”¨äºéœ€è¦æŒ‡å®šä¸€ä¸ªåŒ…å« main() æ–¹æ³•çš„ä¸»ç±»ï¼Œè™šæ‹Ÿæœºä¼šå…ˆåˆå§‹åŒ–è¿™ä¸ªä¸»ç±»ã€‚</p><p>å½“ä½¿ç”¨ JDK 1.7 çš„åŠ¨æ€è¯­è¨€æ”¯æŒæ—¶ï¼Œå¦‚æœä¸€ä¸ª java.lang.invoke.MethodHandle å®ä¾‹æœ€åçš„è§£æç»“æœä¸º REF_getStaticã€REF_putStaticã€REF_invokeStatic çš„æ–¹æ³•å¥æŸ„ï¼Œå¹¶ä¸”è¿™ä¸ªæ–¹æ³•å¥æŸ„æ‰€å¯¹åº”çš„ç±»è¿˜æ²¡åˆå§‹åŒ–ï¼Œåˆ™éœ€è¦å…ˆè§¦å‘å…¶åˆå§‹åŒ–ã€‚</p><p>åŠ è½½ã€éªŒè¯ã€å‡†å¤‡ã€åˆå§‹åŒ–å’Œå¸è½½è¿™ 5 ä¸ªé˜¶æ®µçš„é¡ºåºæ˜¯ç¡®å®šçš„ï¼Œç±»çš„åŠ è½½è¿‡ç¨‹å¿…é¡»æŒ‰ç…§è¿™ç§é¡º åºæŒ‰éƒ¨å°±ç­åœ°å¼€å§‹ï¼ˆæ³¨æ„æ˜¯â€œå¼€å§‹â€ï¼Œè€Œä¸æ˜¯â€œè¿›è¡Œâ€æˆ–â€œå®Œæˆâ€ï¼‰ï¼Œ è€Œè§£æé˜¶æ®µåˆ™ä¸ä¸€å®šï¼šå®ƒåœ¨æŸäº›æƒ…å†µä¸‹å¯ä»¥åœ¨åˆå§‹åŒ–åå†å¼€å§‹ï¼Œè¿™æ˜¯ä¸ºäº†æ”¯æŒ Java è¯­è¨€çš„è¿è¡Œæ—¶ç»‘å®šã€‚ åŠ è½½é˜¶æ®µä¸è¿æ¥é˜¶æ®µçš„éƒ¨åˆ†å†…å®¹äº¤å‰è¿›è¡Œï¼ŒåŠ è½½é˜¶æ®µå°šæœªå®Œæˆï¼Œè¿æ¥é˜¶æ®µå¯èƒ½å·²ç»å¼€å§‹äº†ã€‚ä½†è¿™ä¸¤ä¸ªé˜¶æ®µçš„å¼€å§‹æ—¶é—´ä»ç„¶ä¿æŒç€å›ºå®šçš„å…ˆåé¡ºåºã€‚</p><h4 id="æ¥å£çš„åŠ è½½è¿‡ç¨‹-vs-ç±»åŠ è½½è¿‡ç¨‹" tabindex="-1"><a class="header-anchor" href="#æ¥å£çš„åŠ è½½è¿‡ç¨‹-vs-ç±»åŠ è½½è¿‡ç¨‹" aria-hidden="true">#</a> æ¥å£çš„åŠ è½½è¿‡ç¨‹ vs ç±»åŠ è½½è¿‡ç¨‹</h4><p>æ¥å£åŠ è½½è¿‡ç¨‹ä¸ç±»åŠ è½½è¿‡ç¨‹ç¨æœ‰ä¸åŒã€‚ å½“ä¸€ä¸ªç±»åœ¨åˆå§‹åŒ–æ—¶ï¼Œè¦æ±‚å…¶çˆ¶ç±»å…¨éƒ¨éƒ½å·²ç»åˆå§‹åŒ–è¿‡äº†ï¼Œä½†æ˜¯ä¸€ä¸ªæ¥å£åœ¨åˆå§‹åŒ–æ—¶ï¼Œå¹¶ä¸è¦ æ±‚å…¶çˆ¶æ¥å£å…¨éƒ¨éƒ½å®Œæˆäº†åˆå§‹åŒ–ï¼Œå½“çœŸæ­£ç”¨åˆ°çˆ¶æ¥å£çš„æ—¶å€™æ‰ä¼šåˆå§‹åŒ–ã€‚</p><h4 id="ç±»åŠ è½½æœºåˆ¶å’Œspringä¸­beançš„ç”Ÿå‘½å‘¨æœŸ" tabindex="-1"><a class="header-anchor" href="#ç±»åŠ è½½æœºåˆ¶å’Œspringä¸­beançš„ç”Ÿå‘½å‘¨æœŸ" aria-hidden="true">#</a> ç±»åŠ è½½æœºåˆ¶å’Œspringä¸­Beançš„ç”Ÿå‘½å‘¨æœŸ</h4><h5 id="æ‰§è¡Œmainæ–¹æ³•ä¹‹å‰" tabindex="-1"><a class="header-anchor" href="#æ‰§è¡Œmainæ–¹æ³•ä¹‹å‰" aria-hidden="true">#</a> æ‰§è¡Œmainæ–¹æ³•ä¹‹å‰</h5><h6 id="ç¼–è¯‘" tabindex="-1"><a class="header-anchor" href="#ç¼–è¯‘" aria-hidden="true">#</a> ç¼–è¯‘</h6><p>å½“ä½¿ç”¨IntelliJ IDEAç­‰é›†æˆå¼€å‘ç¯å¢ƒï¼ˆIDEï¼‰ç¼–å†™Javaæºä»£ç æ—¶ï¼Œç¼–è¯‘é€šå¸¸æ˜¯åœ¨æ‚¨ç‚¹å‡»è¿è¡ŒæŒ‰é’®æ‰§è¡Œmainæ–¹æ³•ä¹‹å‰è‡ªåŠ¨è¿›è¡Œçš„ï¼ŒIDEAä¼šåœ¨åå°è‡ªåŠ¨è°ƒç”¨Javaç¼–è¯‘å™¨ï¼ˆjavacï¼‰æ¥ç¼–è¯‘æ›´æ–°åçš„æºä»£ç </p><p>ä¿®æ”¹ä»£ç çš„åŒæ—¶å°±è¿›è¡Œäº†ç¼–è¯‘ï¼Œè¿™æ ·å¯ä»¥ç«‹å³æ£€æŸ¥å’Œçº æ­£è¯­æ³•é”™è¯¯å’Œå…¶ä»–ç¼–è¯‘é”™è¯¯</p><h5 id="æ‰§è¡Œmainæ–¹æ³•" tabindex="-1"><a class="header-anchor" href="#æ‰§è¡Œmainæ–¹æ³•" aria-hidden="true">#</a> æ‰§è¡Œmainæ–¹æ³•</h5><h6 id="ç±»åŠ è½½æœºåˆ¶å’Œspringä¸­beançš„ç”Ÿå‘½å‘¨æœŸ-1" tabindex="-1"><a class="header-anchor" href="#ç±»åŠ è½½æœºåˆ¶å’Œspringä¸­beançš„ç”Ÿå‘½å‘¨æœŸ-1" aria-hidden="true">#</a> ç±»åŠ è½½æœºåˆ¶å’Œspringä¸­Beançš„ç”Ÿå‘½å‘¨æœŸ</h6><p>####### æ‰§è¡Œmainæ–¹æ³•åä¼šè§¦å‘ç±»åŠ è½½è¿‡ç¨‹ï¼ŒåŒæ—¶å¦‚æœä½¿ç”¨äº†Springæ¡†æ¶ï¼Œä¹Ÿä¼šæ¶‰åŠåˆ°Spring Beançš„ç”Ÿå‘½å‘¨æœŸï¼ŒåŒ…æ‹¬å®ä¾‹åŒ–ï¼ˆå…¶å®æ˜¯3æ­¥çš„ç»„åˆï¼‰ã€å±æ€§å¡«å……ã€åˆå§‹åŒ–å’Œé”€æ¯ç­‰é˜¶æ®µã€‚å…·ä½“å¦‚ä¸‹ï¼š ######## ç±»åŠ è½½ç»“æœï¼šå°†å­—èŠ‚ç æ–‡ä»¶åŠ è½½åˆ°å†…å­˜ä¸­ï¼Œç”Ÿæˆå¯¹åº”çš„Classå¯¹è±¡ã€‚ ######### åŠ è½½ ########## åœ¨å †ä¸­ä¸ºClasså¯¹è±¡åˆ†é…å†…å­˜ï¼Œç”ŸæˆClasså¯¹è±¡ Classå¯¹è±¡æ˜¯ç±»åŠ è½½ååœ¨å†…å­˜ä¸­çš„ä¸€ä¸ªæ•°æ®ç»“æ„ï¼ŒåŒ…å«äº†ç±»çš„ç»“æ„ä¿¡æ¯ï¼Œå¦‚ç±»çš„å­—æ®µã€æ–¹æ³•ã€çˆ¶ç±»ã€æ¥å£ç­‰ï¼Œå¯ä»¥é€šè¿‡åå°„æœºåˆ¶è·å–ç±»ç›¸å…³çš„ä¿¡æ¯ï¼ŒåŒ…æ‹¬å­—æ®µã€æ–¹æ³•ã€æ³¨è§£ç­‰ã€‚é€šè¿‡è¯¥å¯¹è±¡ï¼Œå¯ä»¥å¯¹ç±»è¿›è¡Œå®ä¾‹åŒ–ã€è°ƒç”¨æ–¹æ³•å’Œè®¿é—®å­—æ®µç­‰æ“ä½œã€‚</p><p>éªŒè¯</p><p>######### å‡†å¤‡ èµ‹é›¶å€¼</p><p>è§£æ</p><p>######### åˆå§‹åŒ– èµ‹åˆå§‹å€¼</p><p>######## Spring Beançš„å®ä¾‹åŒ–ï¼ˆå…¶å®æ˜¯3æ­¥çš„ç»„åˆï¼‰ï¼š ä¸ºå¯¹è±¡åœ¨å †å†…å­˜ä¸­åˆ†é…å†…å­˜ç©ºé—´ï¼Œç»™å±æ€§èµ‹é»˜è®¤å€¼ï¼Œæ‰§è¡Œæ„é€ å‡½æ•° åœ¨Springæ¡†æ¶ä¸­ï¼Œå½“Springå®¹å™¨åˆ›å»ºä¸€ä¸ªBeançš„å®ä¾‹æ—¶ï¼Œå®ƒä¼šæŒ‰ç…§ä»¥ä¸‹æ­¥éª¤è¿›è¡Œï¼š</p><p>######### åˆ†é…å†…å­˜ï¼šSpringå®¹å™¨ä¸ºBeanå¯¹è±¡åˆ†é…æ‰€éœ€çš„å†…å­˜ç©ºé—´ã€‚è¿™æ˜¯é€šè¿‡åœ¨å †å†…å­˜ä¸­åˆ†é…ä¸€å—å†…å­˜æ¥å®ç°çš„ã€‚å†…å­˜å¤§å°å–å†³äºBeançš„å®ä¾‹å˜é‡å’Œæ–¹æ³•æ‰€å ç”¨çš„ç©ºé—´ã€‚ åˆ†é…å†…å­˜</p><p>######### ç»™å±æ€§èµ‹é›¶å€¼ï¼šåœ¨åˆ†é…å†…å­˜ä¹‹åï¼ŒSpringå®¹å™¨ä¼šä¸ºBeançš„å±æ€§èµ‹äºˆé»˜è®¤å€¼ã€‚è¿™äº›é»˜è®¤å€¼å¯ä»¥æ˜¯åŸºæœ¬æ•°æ®ç±»å‹çš„é»˜è®¤å€¼ï¼ˆå¦‚0ã€falseã€nullï¼‰ï¼Œä¹Ÿå¯ä»¥æ˜¯å¼•ç”¨ç±»å‹çš„é»˜è®¤å€¼ï¼ˆå¦‚nullï¼‰ã€‚è¿™äº›é»˜è®¤å€¼å¯ä»¥åœ¨åç»­çš„å±æ€§å¡«å……é˜¶æ®µä¸­è¢«è¦†ç›–æˆ–ä¿®æ”¹ã€‚ èµ‹é›¶å€¼</p><p>######### æ‰§è¡Œæ„é€ å‡½æ•°ï¼šåœ¨åˆ†é…å†…å­˜å’Œå±æ€§èµ‹é»˜è®¤å€¼ä¹‹åï¼ŒSpringå®¹å™¨ä¼šè°ƒç”¨Beançš„æ„é€ å‡½æ•°æ¥åˆ›å»ºBeançš„å®ä¾‹ã€‚æ„é€ å‡½æ•°æ˜¯åˆå§‹åŒ–å¯¹è±¡çš„æ–¹æ³•ï¼Œå®ƒå¯ä»¥è¿›è¡Œä¸€äº›å¿…è¦çš„è®¾ç½®å’Œåˆå§‹åŒ–æ“ä½œã€‚æ„é€ å‡½æ•°æ‰§è¡Œåï¼ŒBeançš„å®ä¾‹å°±è¢«åˆ›å»ºå¹¶ä¿å­˜åœ¨å†…å­˜ä¸­ã€‚ èµ‹åˆå§‹å€¼</p><p>######## å±æ€§æ³¨å…¥/å±æ€§å¡«å…… é€šè¿‡setæ–¹æ³•ä¸ºå±æ€§èµ‹å€¼</p><p>######## åˆå§‹åŒ– æ‰§è¡Œinitæ–¹æ³•ï¼ˆNote:è¿™ä¸ªä¸æ˜¯æ„é€ å‡½æ•°ï¼Œinitæ–¹æ³•æ˜¯ä¸€ä¸ªæ™®é€šæ–¹æ³•ï¼‰</p><h4 id="javaç±»çš„åˆå§‹åŒ–é¡ºåº" tabindex="-1"><a class="header-anchor" href="#javaç±»çš„åˆå§‹åŒ–é¡ºåº" aria-hidden="true">#</a> Javaç±»çš„åˆå§‹åŒ–é¡ºåº</h4><h5 id="å¾…æ’åºé¡¹" tabindex="-1"><a class="header-anchor" href="#å¾…æ’åºé¡¹" aria-hidden="true">#</a> å¾…æ’åºé¡¹ï¼š</h5><p>Java çˆ¶ç±»æ„é€ å‡½æ•°ï¼Œçˆ¶ç±»é™æ€æˆå‘˜å˜é‡ï¼Œçˆ¶ç±»æ™®é€šæˆå‘˜å˜é‡ï¼Œçˆ¶ç±»é™æ€ä»£ç å—ï¼Œçˆ¶ç±»ä»£ç å—ï¼Œ å­ç±»æ„é€ å‡½æ•° å­ç±»é™æ€æˆå‘˜å˜é‡ï¼Œå­ç±»æ™®é€šæˆå‘˜å˜é‡ï¼Œå­ç±»é™æ€ä»£ç å—ï¼Œå­ç±»ä»£ç å—</p><h6 id="ç»“è®º" tabindex="-1"><a class="header-anchor" href="#ç»“è®º" aria-hidden="true">#</a> ç»“è®º</h6><p>####### æ— ç»§æ‰¿ é™æ€æˆå‘˜å˜é‡ï¼ˆç±»åŠ è½½è¿‡ç¨‹çš„è¿æ¥é˜¶æ®µçš„å‡†å¤‡é˜¶æ®µï¼‰ã€‹é™æ€ä»£ç å—ï¼ˆç±»åŠ è½½è¿‡ç¨‹çš„åˆå§‹åŒ–é˜¶æ®µï¼‰ ã€‹æˆå‘˜å˜é‡ã€‹ä»£ç å—ã€‹æ„é€ å‡½æ•°ï¼ˆBeançš„å®ä¾‹åŒ–ã€‚Noteï¼šSpringBeançš„ç”Ÿå‘½å‘¨æœŸä¸­åœ¨å®ä¾‹åŒ–ä¹‹åçš„å±æ€§æ³¨å…¥å’Œåˆå§‹åŒ–ï¼Œå¯ä»¥è§†ä¸ºéƒ½æ˜¯Springè‡ªå·±è°ƒç”¨çš„æ™®é€šæ–¹æ³•å®ç°çš„ï¼‰</p><p>####### æœ‰ç»§æ‰¿ çˆ¶ç±»é™æ€æˆå‘˜å˜é‡ã€‹çˆ¶ç±»é™æ€ä»£ç å—ã€‹å­ç±»é™æ€æˆå‘˜å˜é‡ã€‹å­ç±»é™æ€ä»£ç å— ã€‹çˆ¶ç±»æˆå‘˜å˜é‡ã€‹çˆ¶ç±»ä»£ç å—ã€‹çˆ¶ç±»æ„é€ å‡½æ•° ã€‹å­ç±»æˆå‘˜å˜é‡ã€‹å­ç±»ä»£ç å—ã€‹å­ç±»æ„é€ å‡½æ•°</p><h5 id="æ²¡æœ‰ç»§æ‰¿æƒ…å†µä¸‹" tabindex="-1"><a class="header-anchor" href="#æ²¡æœ‰ç»§æ‰¿æƒ…å†µä¸‹" aria-hidden="true">#</a> æ²¡æœ‰ç»§æ‰¿æƒ…å†µä¸‹</h5><ol><li><p>æ‰§è¡Œé¡ºåº</p><ol><li>é™æ€æˆå‘˜å˜é‡</li><li>é™æ€ä»£ç å—</li><li>æ™®é€šæˆå‘˜å˜é‡</li><li>æ™®é€šä»£ç å—</li><li>æ„é€ å‡½æ•°</li></ol></li><li><p>æ€»ç»“ï¼š</p><pre><code> 1. é™æ€-&gt;æ™®é€š
 2. å˜é‡-&gt;ä»£ç å—-&gt;æ„é€ å‡½æ•°
 3. æ„é€ å‡½æ•°æ˜¯æœ€åæ‰§è¡Œçš„
</code></pre></li><li><p>ä»£ç ç®€æ˜“å®ç°ï¼š</p><p>public class Father {</p><pre><code> private static String name = &quot;zct&quot;;
 private int age = 50;

 {
     System.out.println(&quot;father age: &quot;+age);
     System.out.println(&quot;father æˆ‘æ˜¯æ™®é€šä»£ç å—&quot;);
 }

 static{
     System.out.println(&quot;father static name: &quot;+name);
     System.out.println(&quot;father æˆ‘æ˜¯é™æ€ä»£ç å—&quot;);
 }

 public Father(){
     System.out.println(&quot;father æˆ‘æ˜¯æ„é€ å‡½æ•°&quot;);
 }
</code></pre><p>}</p></li><li><p>æµ‹è¯•ï¼š</p><p>@org.junit.Test public void test(){ Father father = new Father(); }</p></li><li><p>æµ‹è¯•ç»“æœï¼š</p><p>father static name: zct father æˆ‘æ˜¯é™æ€ä»£ç å— father age: 50 father æˆ‘æ˜¯æ™®é€šä»£ç å— father æˆ‘æ˜¯æ„é€ å‡½æ•°</p></li></ol><h5 id="æœ‰ç»§æ‰¿æƒ…å†µä¸‹" tabindex="-1"><a class="header-anchor" href="#æœ‰ç»§æ‰¿æƒ…å†µä¸‹" aria-hidden="true">#</a> æœ‰ç»§æ‰¿æƒ…å†µä¸‹</h5><ol><li><p>æ‰§è¡Œé¡ºåº</p><ol><li>çˆ¶ç±»çš„é™æ€æˆå‘˜å˜é‡</li><li>çˆ¶ç±»çš„é™æ€ä»£ç å—</li><li>å­ç±»çš„é™æ€æˆå‘˜å˜é‡</li><li>å­ç±»çš„é™æ€ä»£ç å—</li><li>çˆ¶ç±»çš„æˆå‘˜å˜é‡</li><li>çˆ¶ç±»çš„ä»£ç å—</li><li>çˆ¶ç±»çš„æ„é€ å‡½æ•°</li><li>å­ç±»çš„æˆå‘˜å˜é‡</li><li>å­ç±»çš„ä»£ç å—</li><li>å­ç±»çš„æ„é€ å‡½æ•°</li></ol></li><li><p>æ€»ç»“ï¼š</p><ol><li>å…ˆé™æ€å†æ™®é€šï¼Œå…ˆçˆ¶ç±»å†å­ç±» å¦‚æœå­ç±»æœ‰é™æ€æˆå‘˜å˜é‡å’Œé™æ€ä»£ç å—ï¼Œåˆ™æ‰§è¡Œå®Œçˆ¶ç±»çš„é™æ€æˆå‘˜å˜é‡å’Œé™æ€ä»£ç å—åï¼Œæ¥ç€æ‰§è¡Œå­ç±»çš„é™æ€å˜é‡å’Œé™æ€ä»£ç å—ï¼Œ å¦åˆ™ç›´æ¥æŒ‰ç…§çˆ¶ç±»çš„å˜é‡-&gt;ä»£ç å—-&gt;æ„é€ å‡½æ•°ï¼Œå†æ‰§è¡Œå­ç±»çš„å˜é‡-&gt;ä»£ç å—-&gt;æ„é€ å‡½æ•° éœ€è¦æ³¨æ„çš„æ˜¯å­ç±»çš„é™æ€å˜é‡å’Œé™æ€ä»£ç å—æ˜¯ä¼˜å…ˆäºçˆ¶ç±»çš„æ™®é€šæˆå‘˜å˜é‡å’Œä»£ç å—ä»¥åŠæ„é€ å‡½æ•°çš„ã€‚</li></ol></li><li><p>ä»£ç ç®€æ˜“å®ç°ï¼š</p><p>public class Son extends Father{</p><pre><code> private static String name = &quot;zlc&quot;;
 private int age = 26;
 {
     System.out.println(&quot;son age: &quot;+age);
     System.out.println(&quot;son æˆ‘æ˜¯æ™®é€šä»£ç å—&quot;);
 }

 static{
     System.out.println(&quot;son static name: &quot;+name);
     System.out.println(&quot;son æˆ‘æ˜¯é™æ€ä»£ç å—&quot;);
 }

 public Son(){
     System.out.println(&quot;son æˆ‘æ˜¯æ„é€ å‡½æ•°&quot;);
 }
</code></pre><p>}</p></li><li><p>æµ‹è¯•ï¼š</p><p>@org.junit.Test public void test(){ Son son = new Son(); }</p></li><li><p>æµ‹è¯•ç»“æœï¼š</p><p>father static name: zct father æˆ‘æ˜¯é™æ€ä»£ç å— son static name: zlc son æˆ‘æ˜¯é™æ€ä»£ç å— father age: 50 father æˆ‘æ˜¯æ™®é€šä»£ç å— father æˆ‘æ˜¯æ„é€ å‡½æ•° son age: 26 son æˆ‘æ˜¯æ™®é€šä»£ç å— son æˆ‘æ˜¯æ„é€ å‡½æ•°</p></li></ol><h3 id="ç±»åŠ è½½å™¨" tabindex="-1"><a class="header-anchor" href="#ç±»åŠ è½½å™¨" aria-hidden="true">#</a> ç±»åŠ è½½å™¨</h3><h4 id="åˆ¤æ–­ç±»æ˜¯å¦ç›¸åŒ" tabindex="-1"><a class="header-anchor" href="#åˆ¤æ–­ç±»æ˜¯å¦ç›¸åŒ" aria-hidden="true">#</a> åˆ¤æ–­ç±»æ˜¯å¦ç›¸åŒ</h4><p>ä»»æ„ä¸€ä¸ªç±»ï¼Œéƒ½ç”±åŠ è½½å®ƒçš„ç±»åŠ è½½å™¨å’Œè¿™ä¸ªç±»æœ¬èº«ä¸€åŒç¡®ç«‹å…¶åœ¨ Java è™šæ‹Ÿæœºä¸­çš„å”¯ä¸€æ€§</p><p>åŒä¸€ä¸ªç±»ï¼Œè¢«ä¸åŒç±»åŠ è½½å™¨åŠ è½½å‡ºæ¥ï¼Œä¼šæ˜¯ä¸åŒçš„ä¸¤ä¸ªç±»</p><h4 id="åŠ è½½å™¨ç§ç±»" tabindex="-1"><a class="header-anchor" href="#åŠ è½½å™¨ç§ç±»" aria-hidden="true">#</a> åŠ è½½å™¨ç§ç±»</h4><p>ç³»ç»Ÿæä¾›äº†3ç§ç±»åŠ è½½å™¨ã€‚ä¹Ÿå¯ä»¥è‡ªå®šä¹‰ç±»åŠ è½½å™¨ã€‚</p><figure><img src="/pinkpig/assets/jvm_015-oHs92TyQ.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><h5 id="_3ç§ç±»åŠ è½½å™¨" tabindex="-1"><a class="header-anchor" href="#_3ç§ç±»åŠ è½½å™¨" aria-hidden="true">#</a> 3ç§ç±»åŠ è½½å™¨</h5><h6 id="å¯åŠ¨ç±»åŠ è½½å™¨" tabindex="-1"><a class="header-anchor" href="#å¯åŠ¨ç±»åŠ è½½å™¨" aria-hidden="true">#</a> å¯åŠ¨ç±»åŠ è½½å™¨</h6><p>Bootstrap Class Loader</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>è´Ÿè´£åŠ è½½ &lt;JAVA_HOME&gt;\lib ç›®å½•ä¸­çš„æ‰€æœ‰ç±»åº“
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h6 id="å¹³å°ç±»åŠ è½½å™¨" tabindex="-1"><a class="header-anchor" href="#å¹³å°ç±»åŠ è½½å™¨" aria-hidden="true">#</a> å¹³å°ç±»åŠ è½½å™¨</h6><p>Platform Class Loader</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>è´Ÿè´£åŠ è½½ &lt;JAVA_HOME&gt;\lib\ext ç›®å½•ä¸­çš„æ‰€æœ‰ç±»åº“
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>åŸæœ¬çš„æ‰©å±•ç±»åŠ è½½å™¨Extension Class Loaderï¼ŒJDK9æ”¹äº†ï¼Œå¼•å…¥æ¨¡å—ï¼Œæ”¹ä¸ºå¹³å°ç±»åŠ è½½å™¨</p><h6 id="åº”ç”¨ç¨‹åºç±»åŠ è½½å™¨-ç³»ç»Ÿç±»åŠ è½½å™¨" tabindex="-1"><a class="header-anchor" href="#åº”ç”¨ç¨‹åºç±»åŠ è½½å™¨-ç³»ç»Ÿç±»åŠ è½½å™¨" aria-hidden="true">#</a> åº”ç”¨ç¨‹åºç±»åŠ è½½å™¨/ç³»ç»Ÿç±»åŠ è½½å™¨</h6><p>Application Class Loader è´Ÿè´£åŠ è½½ç”¨æˆ·ç±»è·¯å¾„ï¼ˆclasspathï¼‰ä¸Šæ‰€æŒ‡å®šçš„ç±»åº“</p><p>ç¨‹åºä¸­é»˜è®¤çš„ç±»åŠ è½½å™¨</p><h4 id="åŒäº²å§”æ´¾æ¨¡å‹" tabindex="-1"><a class="header-anchor" href="#åŒäº²å§”æ´¾æ¨¡å‹" aria-hidden="true">#</a> åŒäº²å§”æ´¾æ¨¡å‹</h4><p>æè¿°ç±»åŠ è½½å™¨ä¹‹é—´çš„å±‚æ¬¡å…³ç³»</p><figure><img src="/pinkpig/assets/jvm_016-Z9Zp9Vji.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>ç›®çš„ï¼šç¡®ä¿æ¯ä¸ªç±»çš„å”¯ä¸€</p><p>å·¥ä½œè¿‡ç¨‹ï¼šä¼˜å…ˆå§”æ´¾ç»™çˆ¶ç±»å»åŠ è½½ï¼Œçˆ¶ç±»æ— æ³•åŠ è½½ï¼Œåˆ™è‡ªå·±å°è¯•åŠ è½½</p><p>åœ¨ java.lang.ClassLoader ä¸­çš„ loadClass() æ–¹æ³•ä¸­å®ç°è¯¥è¿‡ç¨‹ã€‚</p><h5 id="å¦‚ä½•ç ´ååŒäº²å§”æ´¾æœºåˆ¶" tabindex="-1"><a class="header-anchor" href="#å¦‚ä½•ç ´ååŒäº²å§”æ´¾æœºåˆ¶" aria-hidden="true">#</a> å¦‚ä½•ç ´ååŒäº²å§”æ´¾æœºåˆ¶</h5><p>å¦‚æœä¸æƒ³æ‰“ç ´åŒäº²å§”æ´¾æ¨¡å‹ï¼Œå°±é‡å†™ ClassLoader ç±»ä¸­çš„ findClass() æ–¹æ³•å³å¯ï¼Œæ— æ³•è¢«çˆ¶ç±»åŠ è½½å™¨åŠ è½½çš„ç±»æœ€ç»ˆä¼šé€šè¿‡è¿™ä¸ªæ–¹æ³•è¢«åŠ è½½</p><p>å¦‚æœæƒ³æ‰“ç ´åŒäº²å§”æ´¾æ¨¡å‹åˆ™éœ€è¦é‡å†™ loadClass()æ–¹æ³•</p><h4 id="æ‰©å±•-tomcat-çš„ç±»åŠ è½½æœºåˆ¶" tabindex="-1"><a class="header-anchor" href="#æ‰©å±•-tomcat-çš„ç±»åŠ è½½æœºåˆ¶" aria-hidden="true">#</a> æ‰©å±•ï¼šTomcat çš„ç±»åŠ è½½æœºåˆ¶</h4><p>Tomcat æ˜¯ä¸»æµçš„ Java Web æœåŠ¡å™¨ä¹‹ä¸€ï¼Œä¸ºäº†å®ç°ä¸€äº›ç‰¹æ®Šçš„åŠŸèƒ½éœ€æ±‚ï¼Œè‡ªå®šä¹‰äº†ä¸€äº›ç±»åŠ è½½å™¨ã€‚</p><p>Tomcatç±»åŠ è½½å™¨</p><figure><img src="/pinkpig/assets/jvm_017-2RRUnBaC.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>Tomcat å®é™…ä¸Šæ˜¯ç ´åäº†åŒäº²å§”æ´¾æ¨¡å‹çš„ã€‚</p><p>Tomact æ˜¯ web å®¹å™¨ï¼Œå¯èƒ½éœ€è¦éƒ¨ç½²å¤šä¸ªåº”ç”¨ç¨‹åºã€‚ä¸åŒçš„åº”ç”¨ç¨‹åºå¯èƒ½ä¼šä¾èµ–åŒä¸€ä¸ªç¬¬ä¸‰æ–¹ç±»åº“çš„ä¸åŒç‰ˆæœ¬ï¼Œä½†æ˜¯ä¸åŒç‰ˆæœ¬çš„ç±»åº“ä¸­æŸä¸€ä¸ªç±»çš„å…¨è·¯å¾„åå¯èƒ½æ˜¯ä¸€æ ·çš„ã€‚å¦‚å¤šä¸ªåº”ç”¨éƒ½è¦ä¾èµ– hollis.jarï¼Œä½†æ˜¯ A åº”ç”¨éœ€è¦ä¾èµ– 1.0.0 ç‰ˆæœ¬ï¼Œä½†æ˜¯ B åº”ç”¨éœ€è¦ä¾èµ– 1.0.1 ç‰ˆæœ¬ã€‚è¿™ä¸¤ä¸ªç‰ˆæœ¬ä¸­éƒ½æœ‰ä¸€ä¸ªç±»æ˜¯ com.hollis.Test.classã€‚å¦‚æœé‡‡ç”¨é»˜è®¤çš„åŒäº²å§”æ´¾ç±»åŠ è½½æœºåˆ¶ï¼Œé‚£ä¹ˆæ— æ³•åŠ è½½å¤šä¸ªç›¸åŒçš„ç±»ã€‚</p><p>æ‰€ä»¥ï¼ŒTomcat ç ´åäº†åŒäº²å§”æ´¾åŸåˆ™ï¼Œæä¾›éš”ç¦»çš„æœºåˆ¶ï¼Œä¸ºæ¯ä¸ª web å®¹å™¨å•ç‹¬æä¾›ä¸€ä¸ª WebAppClassLoader åŠ è½½å™¨ã€‚æ¯ä¸€ä¸ª WebAppClassLoader è´Ÿè´£åŠ è½½æœ¬èº«çš„ç›®å½•ä¸‹çš„ class æ–‡ä»¶ï¼ŒåŠ è½½ä¸åˆ°æ—¶å†äº¤ CommonClassLoader åŠ è½½ï¼Œè¿™å’ŒåŒäº²å§”æ´¾åˆšå¥½ç›¸åã€‚</p><h2 id="_3ã€è‡ªåŠ¨å†…å­˜ç®¡ç†" tabindex="-1"><a class="header-anchor" href="#_3ã€è‡ªåŠ¨å†…å­˜ç®¡ç†" aria-hidden="true">#</a> 3ã€è‡ªåŠ¨å†…å­˜ç®¡ç†</h2><h3 id="å†…å­˜åŒºåŸŸåˆ’åˆ†" tabindex="-1"><a class="header-anchor" href="#å†…å­˜åŒºåŸŸåˆ’åˆ†" aria-hidden="true">#</a> å†…å­˜åŒºåŸŸåˆ’åˆ†</h3><h4 id="åˆ’åˆ†ä¸º5ä¸ªéƒ¨åˆ†" tabindex="-1"><a class="header-anchor" href="#åˆ’åˆ†ä¸º5ä¸ªéƒ¨åˆ†" aria-hidden="true">#</a> åˆ’åˆ†ä¸º5ä¸ªéƒ¨åˆ†</h4><figure><img src="/pinkpig/assets/jvm_018-off4SlhO.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>JDK1.8 å…ƒç©ºé—´æ›¿ä»£äº†æ–¹æ³•åŒºã€‚å…ƒç©ºé—´ä¸åœ¨è™šæ‹Ÿæœºä¸­ï¼Œè€Œæ˜¯ä½¿ç”¨æœ¬åœ°å†…å­˜ã€‚</p><figure><img src="/pinkpig/assets/jvm_019-sdtSNkwG.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><h4 id="çº¿ç¨‹ç§æœ‰åŒº" tabindex="-1"><a class="header-anchor" href="#çº¿ç¨‹ç§æœ‰åŒº" aria-hidden="true">#</a> çº¿ç¨‹ç§æœ‰åŒº</h4><p>ç”Ÿå‘½å‘¨æœŸï¼šéšçº¿ç¨‹ç”Ÿæ­»ï¼Œéšæ–¹æ³•å‡ºå…¥æ ˆ</p><h5 id="è™šæ‹Ÿæœºæ ˆ-vm-stack" tabindex="-1"><a class="header-anchor" href="#è™šæ‹Ÿæœºæ ˆ-vm-stack" aria-hidden="true">#</a> è™šæ‹Ÿæœºæ ˆ VM Stack</h5><p>ï¼ˆæœåŠ¡äºï¼šæ‰§è¡ŒJavaæ–¹æ³•ï¼Œä¹Ÿå°±æ˜¯æ‰§è¡Œå­—èŠ‚ç ï¼‰</p><h6 id="æ ˆå¸§å†…å­˜ç©ºé—´" tabindex="-1"><a class="header-anchor" href="#æ ˆå¸§å†…å­˜ç©ºé—´" aria-hidden="true">#</a> æ ˆå¸§å†…å­˜ç©ºé—´</h6><p>è™šæ‹Ÿæœºæ ˆæè¿°çš„æ˜¯Javaæ–¹æ³•æ‰§è¡Œçš„å†…å­˜æ¨¡å‹ï¼šæ¯ä¸ªJavaæ–¹æ³•è¢«æ‰§è¡Œçš„æ—¶å€™ï¼ŒJVMéƒ½ä¼šåŒæ­¥åˆ›å»ºä¸€ä¸ªæ ˆå¸§ï¼ˆStack Frameï¼‰ã€‚æ¯ä¸€ä¸ªæ–¹æ³•ä»è¢«è°ƒç”¨åˆ°æ‰§è¡Œå®Œæ¯•çš„è¿‡ç¨‹ï¼Œå°±å¯¹åº”ç€ä¸€ä¸ªæ ˆå¸§åœ¨è™šæ‹Ÿæœºæ ˆä¸­ä»å…¥æ ˆåˆ°å‡ºæ ˆçš„è¿‡ç¨‹ã€‚</p><figure><img src="/pinkpig/assets/jvm_020-NdyjlLrw.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>####### å­˜æ”¾ å±€éƒ¨å˜é‡è¡¨</p><p>######## æ“ä½œæ•°æ ˆ æ”¾ä¸´æ—¶çš„æ“ä½œæ•°ï¼Œæ“ä½œå®Œæˆåå‡ºæ ˆèµ‹å€¼ç»™å±€éƒ¨å˜é‡</p><p>åŠ¨æ€é“¾æ¥</p><p>æ–¹æ³•å‡ºå£ä¿¡æ¯</p><h6 id="ä¸¤ç±»å¼‚å¸¸çŠ¶å†µ" tabindex="-1"><a class="header-anchor" href="#ä¸¤ç±»å¼‚å¸¸çŠ¶å†µ" aria-hidden="true">#</a> ä¸¤ç±»å¼‚å¸¸çŠ¶å†µ</h6><p>####### StackOverflowError æ ˆæ·±åº¦è¶…è¿‡å…è®¸çš„æœ€å¤§æ·±åº¦</p><p>####### OutOfMemoryError æ— æ³•ç”³è¯·åˆ°è¶³å¤Ÿå†…å­˜</p><p>HotSpotä¸ä¼šè¿›è¡Œæ ˆçš„åŠ¨æ€æ‰©å±•ï¼Œä½†æ¯ä¸ªæ–¹æ³•åˆæ¬¡ç”³è¯·å¦‚æœå†…å­˜ä¸å¤Ÿï¼Œä¼šæŠ¥OOM</p><h5 id="æœ¬åœ°æ–¹æ³•æ ˆ-cæ ˆ-native-method-stack" tabindex="-1"><a class="header-anchor" href="#æœ¬åœ°æ–¹æ³•æ ˆ-cæ ˆ-native-method-stack" aria-hidden="true">#</a> æœ¬åœ°æ–¹æ³•æ ˆ/Cæ ˆ Native Method Stack</h5><p>ï¼ˆæœåŠ¡äºï¼šæ‰§è¡Œè™šæ‹Ÿæœºæœ¬åœ°ï¼ˆNativeï¼‰æ–¹æ³•ï¼Œå¾ˆå¤šNativeæ–¹æ³•éƒ½æ˜¯ç”¨Cè¯­è¨€å®ç°çš„ï¼‰ HotSpotè™šæ‹ŸæœºæŠŠæœ¬åœ°æ–¹æ³•æ ˆå’Œè™šæ‹Ÿæœºæ ˆåˆäºŒä¸ºä¸€äº†</p><h5 id="ç¨‹åºè®¡æ•°å™¨-program-counter-register" tabindex="-1"><a class="header-anchor" href="#ç¨‹åºè®¡æ•°å™¨-program-counter-register" aria-hidden="true">#</a> ç¨‹åºè®¡æ•°å™¨ Program Counter Register</h5><h6 id="å®šä¹‰" tabindex="-1"><a class="header-anchor" href="#å®šä¹‰" aria-hidden="true">#</a> å®šä¹‰</h6><p>å½“å‰çº¿ç¨‹æ‰€æ‰§è¡Œçš„å­—èŠ‚ç çš„è¡Œå·æŒ‡ç¤ºå™¨</p><p>æ‰§è¡ŒJavaæ–¹æ³•æ—¶ï¼Œç¨‹åºè®¡æ•°å™¨çš„å€¼ä¸ºæ­£åœ¨æ‰§è¡Œçš„è™šæ‹Ÿæœºå­—èŠ‚ç æŒ‡ä»¤çš„åœ°å€ï¼›æ‰§è¡Œæœ¬åœ°ï¼ˆNativeï¼‰æ–¹æ³•æ—¶ï¼Œç¨‹åºè®¡æ•°å™¨å€¼ä¸ºç©ºï¼ˆUndefinedï¼‰</p><h6 id="ä½œç”¨" tabindex="-1"><a class="header-anchor" href="#ä½œç”¨" aria-hidden="true">#</a> ä½œç”¨</h6><p>å­—èŠ‚ç è§£é‡Šå™¨é€šè¿‡æ”¹å˜ç¨‹åºè®¡æ•°å™¨æ¥ä¾æ¬¡è¯»å–å­—èŠ‚ç æŒ‡ä»¤ï¼Œä»è€Œå®ç°ä»£ç çš„æµç¨‹æ§åˆ¶</p><p>å¤šçº¿ç¨‹åœºæ™¯ï¼Œçº¿ç¨‹ä¸Šä¸‹æ–‡åˆ‡æ¢åï¼Œç¨‹åºè®¡æ•°å™¨ç¡®ä¿çº¿ç¨‹æ¢å¤åˆ°æ­£ç¡®çš„æ‰§è¡Œä½ç½®</p><h6 id="ç‰¹ç‚¹" tabindex="-1"><a class="header-anchor" href="#ç‰¹ç‚¹" aria-hidden="true">#</a> ç‰¹ç‚¹</h6><p>æ˜¯ä¸€å—è¾ƒå°çš„å†…å­˜ç©ºé—´</p><p>å”¯ä¸€ä¸€ä¸ªä¸ä¼šå‡ºç°OOMçš„å†…å­˜åŒºåŸŸ</p><h4 id="çº¿ç¨‹å…±äº«åŒº" tabindex="-1"><a class="header-anchor" href="#çº¿ç¨‹å…±äº«åŒº" aria-hidden="true">#</a> çº¿ç¨‹å…±äº«åŒº</h4><h5 id="å †-heap" tabindex="-1"><a class="header-anchor" href="#å †-heap" aria-hidden="true">#</a> å † Heap</h5><p>å­˜æ”¾å®ä¾‹å¯¹è±¡</p><h6 id="å¯¹è±¡ä¸€å®šåˆ†é…åœ¨å †ä¸­å—-æœ‰æ²¡æœ‰äº†è§£é€ƒé€¸åˆ†ææŠ€æœ¯" tabindex="-1"><a class="header-anchor" href="#å¯¹è±¡ä¸€å®šåˆ†é…åœ¨å †ä¸­å—-æœ‰æ²¡æœ‰äº†è§£é€ƒé€¸åˆ†ææŠ€æœ¯" aria-hidden="true">#</a> å¯¹è±¡ä¸€å®šåˆ†é…åœ¨å †ä¸­å—ï¼Ÿæœ‰æ²¡æœ‰äº†è§£é€ƒé€¸åˆ†ææŠ€æœ¯ï¼Ÿ</h6><p>å¹¶ä¸æ˜¯æ‰€æœ‰å®ä¾‹å¯¹è±¡éƒ½åˆ†é…åœ¨å †ä¸Šã€‚ç°åœ¨ï¼Œç”±äºå³æ—¶ç¼–è¯‘æŠ€æœ¯çš„è¿›æ­¥ï¼Œå°¤å…¶æ˜¯é€ƒé€¸åˆ†ææŠ€æœ¯çš„æ—¥æ¸å¼ºå¤§ï¼Œæ ˆä¸Šåˆ†é…ã€æ ‡é‡æ›¿æ¢ä¼˜åŒ–æ‰‹æ®µä½¿å¾—å®ä¾‹å¯¹è±¡ä¸åˆ†é…åœ¨å †ä¸Šã€‚ ####### é€ƒé€¸åˆ†æ åœ¨ç¼–è¯‘æœŸé—´ï¼ŒJIT ä¼šå¯¹ä»£ç åšå¾ˆå¤šä¼˜åŒ–ã€‚å…¶ä¸­æœ‰ä¸€éƒ¨åˆ†ä¼˜åŒ–çš„ç›®çš„å°±æ˜¯å‡å°‘å†…å­˜å †åˆ†é…å‹åŠ›ï¼Œå…¶ä¸­ä¸€ç§é‡è¦çš„æŠ€æœ¯å«åšé€ƒé€¸åˆ†æã€‚</p><p>ç›®çš„ï¼šçœ‹æ˜¯å¦èƒ½è¿›è¡Œä¼˜åŒ–ï¼Œå°†å¯¹è±¡ä¸åˆ†é…åœ¨å †ä¸Šï¼Œä»è€Œå‡å°‘å †å†…å­˜çš„åˆ†é…å‹åŠ›</p><p>######## å®šä¹‰ é€ƒé€¸åˆ†ææ˜¯æŒ‡åˆ†ææŒ‡é’ˆåŠ¨æ€èŒƒå›´çš„æ–¹æ³•ï¼Œå®ƒåŒç¼–è¯‘å™¨ä¼˜åŒ–åŸç†çš„æŒ‡é’ˆåˆ†æå’Œå¤–å½¢åˆ†æç›¸å…³è”ã€‚å½“å˜é‡ï¼ˆæˆ–è€…å¯¹è±¡ï¼‰åœ¨æ–¹æ³•ä¸­åˆ†é…åï¼Œå…¶æŒ‡é’ˆæœ‰å¯èƒ½è¢«è¿”å›æˆ–è€…è¢«å…¨å±€å¼•ç”¨ï¼Œè¿™æ ·å°±ä¼šè¢«å…¶ä»–æ–¹æ³•æˆ–è€…çº¿ç¨‹æ‰€å¼•ç”¨ï¼Œè¿™ç§ç°è±¡ç§°ä½œæŒ‡é’ˆï¼ˆæˆ–è€…å¼•ç”¨ï¼‰çš„é€ƒé€¸(Escape)ã€‚</p><p>é€šä¿—è®²ï¼šå±€éƒ¨å¯¹è±¡è¢«å¤–éƒ¨ï¼ˆå¤–éƒ¨æ–¹æ³•ï¼Œå¤–éƒ¨çº¿ç¨‹ï¼‰æ‰€è°ƒç”¨</p><p>######## é€ƒé€¸å¼ºåº¦</p><figure><img src="/pinkpig/assets/jvm_021-w6BrLpoQ.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>######### ä¸é€ƒé€¸</p><figure><img src="/pinkpig/assets/jvm_022-Y7QcJpBS.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>######### æ–¹æ³•é€ƒé€¸ å½“ä¸€ä¸ªå¯¹è±¡è¢« new å‡ºæ¥ä¹‹åï¼Œå®ƒå¯èƒ½è¢«å¤–éƒ¨æ‰€è°ƒç”¨ï¼Œå¦‚æœæ˜¯ä½œä¸ºå‚æ•°ä¼ é€’åˆ°å¤–éƒ¨äº†ï¼Œå°±ç§°ä¹‹ä¸ºæ–¹æ³•é€ƒé€¸ã€‚</p><p>######### çº¿ç¨‹é€ƒé€¸ å¦‚æœå¯¹è±¡è¿˜æœ‰å¯èƒ½è¢«å¤–éƒ¨çº¿ç¨‹è®¿é—®åˆ°ï¼Œä¾‹å¦‚èµ‹å€¼ç»™å¯ä»¥åœ¨å…¶å®ƒçº¿ç¨‹ä¸­è®¿é—®çš„å®ä¾‹å˜é‡ï¼Œè¿™ç§å°±è¢«ç§°ä¸ºçº¿ç¨‹é€ƒé€¸ã€‚</p><p>####### é€ƒé€¸åˆ†æåçš„ä¼˜åŒ–ç‚¹ ######## æ ˆä¸Šåˆ†é…</p><p>é€‚ç”¨ï¼šä¸é€ƒé€¸&amp;æ–¹æ³•é€ƒé€¸ å¦‚æœç¡®å®šä¸€ä¸ªå¯¹è±¡ä¸ä¼šé€ƒé€¸åˆ°çº¿ç¨‹ä¹‹å¤–ï¼Œé‚£ä¹ˆå°±å¯ä»¥è€ƒè™‘å°†è¿™ä¸ªå¯¹è±¡åœ¨æ ˆä¸Šåˆ†é…ï¼Œå¯¹è±¡å ç”¨çš„å†…å­˜éšç€æ ˆå¸§å‡ºæ ˆè€Œé”€æ¯ï¼Œè¿™æ ·ä¸€æ¥ï¼Œåƒåœ¾æ”¶é›†çš„å‹åŠ›å°±é™ä½å¾ˆå¤šã€‚</p><p>######## åŒæ­¥æ¶ˆé™¤</p><p>é€‚ç”¨ï¼šä¸é€ƒé€¸&amp;æ–¹æ³•é€ƒé€¸ çº¿ç¨‹åŒæ­¥æœ¬èº«æ˜¯ä¸€ä¸ªç›¸å¯¹è€—æ—¶çš„è¿‡ç¨‹ï¼Œå¦‚æœé€ƒé€¸åˆ†æèƒ½å¤Ÿç¡®å®šä¸€ä¸ªå˜é‡ä¸ä¼šé€ƒé€¸å‡ºçº¿ç¨‹ï¼Œæ— æ³•è¢«å…¶ä»–çº¿ç¨‹è®¿é—®ï¼Œé‚£ä¹ˆè¿™ä¸ªå˜é‡çš„è¯»å†™è‚¯å®šå°±ä¸ä¼šæœ‰ç«äº‰ï¼Œ å¯¹è¿™ä¸ªå˜é‡å®æ–½çš„åŒæ­¥æªæ–½ä¹Ÿå°±å¯ä»¥å®‰å…¨åœ°æ¶ˆé™¤æ‰ã€‚</p><p>######## æ ‡é‡æ›¿æ¢</p><p>é€‚ç”¨ï¼šä¸é€ƒé€¸ å¦‚æœä¸€ä¸ªæ•°æ®æ˜¯åŸºæœ¬æ•°æ®ç±»å‹ï¼Œä¸å¯æ‹†åˆ†ï¼Œå®ƒå°±è¢«ç§°ä¹‹ä¸ºæ ‡é‡ã€‚æŠŠä¸€ä¸ª Java å¯¹è±¡æ‹†æ•£ï¼Œå°†å…¶ç”¨åˆ°çš„æˆå‘˜å˜é‡æ¢å¤ä¸ºåŸå§‹ç±»å‹æ¥è®¿é—®ï¼Œè¿™ä¸ªè¿‡ç¨‹å°±ç§°ä¸ºæ ‡é‡æ›¿æ¢ã€‚å‡å¦‚é€ƒé€¸åˆ†æèƒ½å¤Ÿè¯æ˜ä¸€ä¸ªå¯¹è±¡ä¸ä¼šè¢«æ–¹æ³•å¤–éƒ¨è®¿é—®ï¼Œå¹¶ä¸”è¿™ä¸ªå¯¹è±¡å¯ä»¥è¢«æ‹†æ•£ï¼Œé‚£ä¹ˆå¯ä»¥ä¸åˆ›å»ºå¯¹è±¡ï¼Œç›´æ¥ç”¨åˆ›å»ºè‹¥å¹²ä¸ªæˆå‘˜å˜é‡ä»£æ›¿ï¼Œå¯ä»¥è®©å¯¹è±¡çš„æˆå‘˜å˜é‡åœ¨æ ˆä¸Šåˆ†é…å’Œè¯»å†™ã€‚</p><h6 id="ç»†åˆ†" tabindex="-1"><a class="header-anchor" href="#ç»†åˆ†" aria-hidden="true">#</a> ç»†åˆ†</h6><p>####### ç»å…¸åˆ†ä»£ ######## éƒ¨åˆ†åƒåœ¾æ”¶é›†å™¨å…±åŒè®¾è®¡é£æ ¼ Eden : From Survivor : To Survivor=8:1:1</p><figure><img src="/pinkpig/assets/jvm_023-zf2MIi2t.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>1ï¼‰newå‡ºæ¥çš„å¯¹è±¡å…ˆæ”¾EdenåŒº 2ï¼‰EdenåŒºæ»¡äº†ï¼Œå°±æŠŠEdenåŒºå­˜æ´»å¯¹è±¡copyåˆ°From SurvivoråŒºï¼ˆMinor GCï¼‰ 3ï¼‰EdenåŒºå’ŒFrom SurvivoråŒºæ»¡äº†ï¼Œå°±æŠŠä¸¤ä¸ªåŒºå­˜æ´»å¯¹è±¡copyåˆ°To SurvivoråŒºï¼ˆMinor GCï¼‰ 4ï¼‰å¹´è½»ä»£ç©ºé—´éƒ½æ»¡äº†ï¼Œå°±æŠŠå¹´è½»ä»£å­˜æ´»å¯¹è±¡copyåˆ°å¹´è€ä»£ï¼ˆMinor GCï¼‰ 5ï¼‰å¹´è€ä»£æ»¡äº†ï¼Œå¯åŠ¨Full GCï¼Œå¯¹æ‰€æœ‰3ä»£è¿›è¡Œå…¨é¢å›æ”¶ï¼Œè€—æ—¶å¾ˆé•¿</p><p>####### ä¸é‡‡ç”¨åˆ†ä»£ éƒ¨åˆ†åƒåœ¾æ”¶é›†å™¨çš„è®¾è®¡é£æ ¼</p><p>####### çº¿ç¨‹ç§æœ‰çš„åˆ†é…ç¼“å†²åŒºï¼ˆTLABï¼ŒThread Local Allocation Bufferï¼‰ ç›®çš„ï¼šæ›´å¿«åœ°åˆ†é…å†…å­˜ï¼Œæå‡å¯¹è±¡åˆ†é…æ•ˆç‡</p><h6 id="ç‰¹ç‚¹-1" tabindex="-1"><a class="header-anchor" href="#ç‰¹ç‚¹-1" aria-hidden="true">#</a> ç‰¹ç‚¹</h6><p>JVMæ‰€ç®¡ç†çš„å†…å­˜ä¸­æœ€å¤§çš„ä¸€å—</p><p>JVMè°ƒä¼˜ä¸»è¦æ˜¯ä¼˜åŒ–å †åŒºå†…å­˜çš„ä½¿ç”¨æ•ˆç‡</p><p>Javaå †æ˜¯åƒåœ¾æ”¶é›†å™¨ç®¡ç†çš„å†…å­˜åŒºåŸŸï¼Œä¹Ÿè¢«ç§°ä¸ºGCå †</p><h6 id="å †å¤§å°é…ç½®" tabindex="-1"><a class="header-anchor" href="#å †å¤§å°é…ç½®" aria-hidden="true">#</a> å †å¤§å°é…ç½®</h6><p>é€šè¿‡å‚æ•°-Xmxå’Œ-Xmsè®¾å®š</p><figure><img src="/pinkpig/assets/jvm_024-ggePY4U8.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><h6 id="å¼‚å¸¸çŠ¶å†µ" tabindex="-1"><a class="header-anchor" href="#å¼‚å¸¸çŠ¶å†µ" aria-hidden="true">#</a> å¼‚å¸¸çŠ¶å†µ</h6><p>####### OutOfMemoryError Javaå †æ²¡æœ‰è¶³å¤Ÿå†…å­˜è¿›è¡Œå®ä¾‹åˆ†é…ï¼Œå¹¶ä¸”å †ä¹Ÿæ— æ³•å†æ‰©å±•</p><h5 id="jdk7-æ–¹æ³•åŒº-method-area-jdk8-å…ƒç©ºé—´-meta-space" tabindex="-1"><a class="header-anchor" href="#jdk7-æ–¹æ³•åŒº-method-area-jdk8-å…ƒç©ºé—´-meta-space" aria-hidden="true">#</a> JDK7 æ–¹æ³•åŒº Method Areaï¼ˆJDK8 å…ƒç©ºé—´ Meta Spaceï¼‰</h5><h6 id="å­˜æ”¾" tabindex="-1"><a class="header-anchor" href="#å­˜æ”¾" aria-hidden="true">#</a> å­˜æ”¾</h6><p>####### ç±»å‹ä¿¡æ¯ï¼ˆå­—èŠ‚ç æ–‡ä»¶ï¼‰ ######## Noteï¼šç±»åŠ è½½è¿‡ç¨‹ä¸­ç”Ÿæˆçš„Classå¯¹è±¡ï¼Œå­˜åœ¨äºå †ä¸­ï¼Œä¸åœ¨æ–¹æ³•åŒºï¼Œé™æ€å˜é‡å’ŒClasså¯¹è±¡ç»‘å®šåœ¨ä¸€èµ·ï¼Œä¹Ÿåœ¨å †ä¸­ å‘¨å¿—æ˜ã€Šæ·±å…¥ç†è§£JVM-ç¬¬ä¸‰ç‰ˆã€‹é‡Œè¯´æ˜äº†</p><figure><img src="/pinkpig/assets/jvm_025-zkg19S6_.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>####### å¸¸é‡ ######## è¿è¡Œæ—¶å¸¸é‡æ±  Runtime Constant Pool è¿™ä¸ªåŒºåŸŸæ˜¯åŒ…å«åœ¨æ–¹æ³•åŒºé‡Œçš„ï¼Œä¸è¿‡ï¼Œå¯¹äºJVMçš„æ“ä½œè€Œè¨€ï¼Œå®ƒæ˜¯ä¸€ä¸ªæ ¸å¿ƒçš„è§’è‰²ã€‚å› æ­¤åœ¨JVMè§„èŒƒé‡Œç‰¹åˆ«æåˆ°äº†å®ƒçš„é‡è¦æ€§ã€‚é™¤äº†åŒ…å«æ¯ä¸ªç±»å’Œæ¥å£çš„å¸¸é‡ï¼Œå®ƒä¹ŸåŒ…å«äº†æ‰€æœ‰æ–¹æ³•å’Œå˜é‡çš„å¼•ç”¨ã€‚ç®€è€Œè¨€ä¹‹ï¼Œå½“ä¸€ä¸ªæ–¹æ³•æˆ–è€…å˜é‡è¢«å¼•ç”¨æ—¶ï¼ŒJVMé€šè¿‡è¿è¡Œæ—¶å¸¸é‡åŒºæ¥æŸ¥æ‰¾æ–¹æ³•æˆ–è€…å˜é‡åœ¨å†…å­˜é‡Œçš„å®é™…åœ°å€ã€‚</p><p>Classæ–‡ä»¶ä¸­é™¤äº†æœ‰ç±»çš„ç‰ˆæœ¬ã€å­—æ®µã€æ–¹æ³•ã€æ¥å£ç­‰æè¿°ä¿¡æ¯å¤–ï¼Œè¿˜æœ‰ä¸€é¡¹ä¿¡æ¯æ˜¯å¸¸é‡æ± è¡¨ï¼ˆConstant Pool Tableï¼‰ï¼Œç”¨äºå­˜æ”¾ç¼–è¯‘æœŸç”Ÿ æˆçš„å„ç§å­—é¢é‡ä¸ç¬¦å·å¼•ç”¨ï¼Œè¿™éƒ¨åˆ†å†…å®¹å°†åœ¨ç±»åŠ è½½åå­˜æ”¾åˆ°æ–¹æ³•åŒºçš„è¿è¡Œæ—¶å¸¸é‡æ± ä¸­ã€‚</p><p>é™¤äº†ä¿å­˜Classæ–‡ä»¶ä¸­æè¿°çš„ç¬¦å·å¼•ç”¨å¤–ï¼Œè¿˜ä¼šæŠŠç”±ç¬¦å·å¼•ç”¨ç¿»è¯‘å‡ºæ¥çš„ç›´æ¥å¼•ç”¨ä¹Ÿå­˜å‚¨åœ¨è¿è¡Œæ—¶å¸¸é‡æ± ä¸­[</p><p>å¹¶éé¢„ç½®å…¥Classæ–‡ä»¶ä¸­å¸¸é‡æ± çš„å†…å®¹æ‰èƒ½è¿›å…¥æ–¹æ³•åŒºè¿è¡Œæ—¶å¸¸é‡æ± ï¼Œè¿è¡ŒæœŸé—´ä¹Ÿå¯ä»¥å°†æ–°çš„å¸¸é‡æ”¾å…¥æ± ä¸­ï¼Œè¿™ç§ç‰¹æ€§è¢«å¼€å‘äººå‘˜åˆ©ç”¨å¾—æ¯”è¾ƒå¤šçš„ä¾¿æ˜¯Stringç±»çš„intern()æ–¹æ³•ã€‚</p><p>å³æ—¶ç¼–è¯‘å™¨ç¼–è¯‘åçš„ä»£ç ç¼“å­˜</p><p>å†…å­˜å›æ”¶æ•ˆç‡ä½ï¼Œæ–¹æ³•åŒºä¸­çš„ä¿¡æ¯ä¸€èˆ¬éœ€è¦é•¿æœŸå­˜åœ¨ï¼ŒGCåˆ†ä»£åˆ’åˆ†ä½œä¸ºæ°¸ä¹…ä»£ã€‚ä¸»è¦å›æ”¶ç›®æ ‡ï¼šå¸¸é‡æ± çš„å›æ”¶å’Œç±»å‹çš„å¸è½½</p><p>JDK1.8ä»¥åï¼Œå…ƒç©ºé—´æ›¿ä»£äº†æ–¹æ³•åŒº æœ€å¤§åŒºåˆ«ï¼šå…ƒç©ºé—´å¹¶ä¸åœ¨è™šæ‹Ÿæœºä¸­ï¼Œè€Œæ˜¯ä½¿ç”¨æœ¬åœ°å†…å­˜ å› æ­¤ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼Œå…ƒç©ºé—´çš„å¤§å°ä»…å—æœ¬åœ°å†…å­˜é™åˆ¶</p><h3 id="å†…å­˜åˆ†é…" tabindex="-1"><a class="header-anchor" href="#å†…å­˜åˆ†é…" aria-hidden="true">#</a> å†…å­˜åˆ†é…</h3><p>å†…å­˜å›æ”¶å†³å®šå†…å­˜åˆ†é…</p><h4 id="å¯¹è±¡çš„å†…å­˜å¸ƒå±€" tabindex="-1"><a class="header-anchor" href="#å¯¹è±¡çš„å†…å­˜å¸ƒå±€" aria-hidden="true">#</a> å¯¹è±¡çš„å†…å­˜å¸ƒå±€</h4><p>åˆ†ä¸º3å—åŒºåŸŸ</p><figure><img src="/pinkpig/assets/jvm_026-ZWG7Ao3o.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><h5 id="å¯¹è±¡å¤´" tabindex="-1"><a class="header-anchor" href="#å¯¹è±¡å¤´" aria-hidden="true">#</a> å¯¹è±¡å¤´</h5><h6 id="mark-word-è®°å½•è¿è¡Œæ—¶æ•°æ®" tabindex="-1"><a class="header-anchor" href="#mark-word-è®°å½•è¿è¡Œæ—¶æ•°æ®" aria-hidden="true">#</a> Mark Word è®°å½•è¿è¡Œæ—¶æ•°æ®</h6><p>å“ˆå¸Œç </p><p>GCåˆ†ä»£å¹´é¾„</p><p>####### é”ç›¸å…³ä¿¡æ¯ é”çŠ¶æ€æ ‡å¿—</p><p>çº¿ç¨‹æŒæœ‰çš„é”</p><p>åå‘çº¿ç¨‹ID</p><p>åå‘æ—¶é—´æˆ³</p><h6 id="ç±»å‹æŒ‡é’ˆ" tabindex="-1"><a class="header-anchor" href="#ç±»å‹æŒ‡é’ˆ" aria-hidden="true">#</a> ç±»å‹æŒ‡é’ˆ</h6><p>é€šè¿‡è¯¥æŒ‡é’ˆç¡®å®šå¯¹è±¡å±äºå“ªä¸ªç±»</p><p>å¯¹è±¡è®¿é—®æ–¹å¼ä¸ºç›´æ¥æŒ‡é’ˆè®¿é—®æ–¹å¼ï¼ˆHotSpoté‡‡ç”¨æ­¤ï¼‰ï¼Œåˆ™éœ€è¦ï¼› å¯¹è±¡è®¿é—®æ–¹å¼ä¸ºå¥æŸ„è®¿é—®æ–¹å¼ï¼Œåˆ™ä¸éœ€è¦</p><p>å¦‚æœå¯¹è±¡æ˜¯æ•°ç»„ï¼šæ•°ç»„é•¿åº¦</p><h5 id="å®ä¾‹æ•°æ®" tabindex="-1"><a class="header-anchor" href="#å®ä¾‹æ•°æ®" aria-hidden="true">#</a> å®ä¾‹æ•°æ®</h5><h6 id="æˆå‘˜å˜é‡" tabindex="-1"><a class="header-anchor" href="#æˆå‘˜å˜é‡" aria-hidden="true">#</a> æˆå‘˜å˜é‡</h6><p>çˆ¶ç±»çš„æˆå‘˜å˜é‡ä¹ŸåŒ…æ‹¬è¿›æ¥</p><h5 id="å¯¹é½å¡«å……" tabindex="-1"><a class="header-anchor" href="#å¯¹é½å¡«å……" aria-hidden="true">#</a> å¯¹é½å¡«å……</h5><h6 id="ç¡®ä¿æ€»é•¿åº¦æ˜¯8å­—èŠ‚çš„æ•´æ•°å€" tabindex="-1"><a class="header-anchor" href="#ç¡®ä¿æ€»é•¿åº¦æ˜¯8å­—èŠ‚çš„æ•´æ•°å€" aria-hidden="true">#</a> ç¡®ä¿æ€»é•¿åº¦æ˜¯8å­—èŠ‚çš„æ•´æ•°å€</h6><p>å¯¹è±¡å¤´éƒ¨åˆ†æ­£å¥½æ˜¯ 8 å­—èŠ‚çš„å€æ•°ï¼ˆ1 å€æˆ– 2 å€ï¼‰ï¼Œå› æ­¤ï¼Œå½“å¯¹è±¡å®ä¾‹æ•°æ®éƒ¨åˆ†æ²¡æœ‰å¯¹é½æ—¶ï¼Œå°±éœ€è¦é€šè¿‡å¯¹é½å¡«å……æ¥è¡¥å…¨</p><h4 id="å¯¹è±¡çš„åˆ›å»º-newè¿‡ç¨‹-å®ä¾‹åŒ–è¿‡ç¨‹" tabindex="-1"><a class="header-anchor" href="#å¯¹è±¡çš„åˆ›å»º-newè¿‡ç¨‹-å®ä¾‹åŒ–è¿‡ç¨‹" aria-hidden="true">#</a> å¯¹è±¡çš„åˆ›å»º/newè¿‡ç¨‹/å®ä¾‹åŒ–è¿‡ç¨‹</h4><h5 id="ç±»åŠ è½½æ£€æŸ¥" tabindex="-1"><a class="header-anchor" href="#ç±»åŠ è½½æ£€æŸ¥" aria-hidden="true">#</a> ç±»åŠ è½½æ£€æŸ¥</h5><p>æ£€æŸ¥å¸¸é‡æ± ä¸­æ˜¯å¦æœ‰è¿™ä¸ªç±»çš„ç¬¦å·å¼•ç”¨ï¼Œå¹¶ä¸”æ£€æŸ¥è¿™ä¸ªç¬¦å·å¼•ç”¨æ‰€ä»£è¡¨çš„ç±»æ˜¯å¦å·²è¢«åŠ è½½ã€è¿æ¥å’Œåˆå§‹åŒ–è¿‡ã€‚å¦‚æœæ²¡æœ‰ï¼Œé‚£ä¹ˆå¿…é¡»å…ˆæ‰§è¡Œç›¸åº”çš„ç±»åŠ è½½è¿‡ç¨‹ã€‚</p><h5 id="åˆ†é…å†…å­˜" tabindex="-1"><a class="header-anchor" href="#åˆ†é…å†…å­˜" aria-hidden="true">#</a> åˆ†é…å†…å­˜</h5><p>æ‰€éœ€å†…å­˜å¤§å°åœ¨ç±»åŠ è½½å®Œæˆä¾¿å¯ç¡®è®¤ï¼Œåœ¨å †ä¸­åˆ†é…å¯¹åº”å¤§å°å†…å­˜ç©ºé—´</p><p>Noteï¼šé€‰æ‹©åƒåœ¾æ”¶é›†å™¨ä¸åŒï¼Œå†…å­˜åˆ†é…æ–¹å¼ä¸åŒ</p><figure><img src="/pinkpig/assets/jvm_027-ZiLvDCBC.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><h6 id="ä¸¤ç§æ–¹å¼" tabindex="-1"><a class="header-anchor" href="#ä¸¤ç§æ–¹å¼" aria-hidden="true">#</a> ä¸¤ç§æ–¹å¼</h6><p>####### æŒ‡é’ˆç¢°æ’ Bump The Pointer ######## Javaå †å†…å­˜è§„æ•´ åƒåœ¾å›æ”¶ç®—æ³•é‡‡ç”¨çš„æ ‡è®°å¤åˆ¶ç®—æ³•æˆ–æ ‡è®°æ•´ç†ç®—æ³•</p><p>æŒ‡é’ˆä½œä¸ºç©ºé—²å†…å­˜å’Œå·²ä½¿ç”¨å†…å­˜çš„åˆ†ç•Œç‚¹ï¼Œåˆ†é…å†…å­˜åªéœ€ç§»åŠ¨æŒ‡é’ˆï¼Œå‘ç©ºé—²å†…å­˜æ–¹å‘ç§»åŠ¨å¯¹è±¡å¤§å°çš„è·ç¦»</p><p>####### ç©ºé—²åˆ—è¡¨ Free List ######## Javaå †å†…å­˜ä¸è§„æ•´ åƒåœ¾å›æ”¶ç®—æ³•é‡‡ç”¨çš„æ ‡è®°æ¸…é™¤ç®—æ³•</p><p>ç©ºé—²åˆ—è¡¨ç»´æŠ¤äº†ç©ºé—²å¯ç”¨çš„å†…å­˜å—ï¼Œåˆ†é…å†…å­˜åªéœ€ä»ä¸­æ‰¾åˆ°ä¸€å—æ¯”å¯¹è±¡å¤§çš„å†…å­˜åˆ†é…ç»™å¯¹è±¡</p><h6 id="jvm-é‡Œ-new-å¯¹è±¡æ—¶-å †ä¼šå‘ç”ŸæŠ¢å å—-jvm-æ˜¯æ€ä¹ˆè®¾è®¡æ¥ä¿è¯çº¿ç¨‹å®‰å…¨çš„" tabindex="-1"><a class="header-anchor" href="#jvm-é‡Œ-new-å¯¹è±¡æ—¶-å †ä¼šå‘ç”ŸæŠ¢å å—-jvm-æ˜¯æ€ä¹ˆè®¾è®¡æ¥ä¿è¯çº¿ç¨‹å®‰å…¨çš„" aria-hidden="true">#</a> JVM é‡Œ new å¯¹è±¡æ—¶ï¼Œå †ä¼šå‘ç”ŸæŠ¢å å—ï¼ŸJVM æ˜¯æ€ä¹ˆè®¾è®¡æ¥ä¿è¯çº¿ç¨‹å®‰å…¨çš„ï¼Ÿ</h6><p>####### å †æŠ¢å  ä¼šï¼Œå‡è®¾ JVM è™šæ‹Ÿæœºä¸Šï¼Œæ¯ä¸€æ¬¡ new å¯¹è±¡æ—¶ï¼ŒæŒ‡é’ˆå°±ä¼šå‘å³ç§»åŠ¨ä¸€ä¸ªå¯¹è±¡ size çš„è·ç¦»ï¼Œä¸€ä¸ªçº¿ç¨‹æ­£åœ¨ç»™ A å¯¹è±¡åˆ†é…å†…å­˜ï¼ŒæŒ‡é’ˆè¿˜æ²¡æœ‰æ¥çš„åŠä¿®æ”¹ï¼Œå¦ä¸€ä¸ªä¸º B å¯¹è±¡åˆ†é…å†…å­˜çš„çº¿ç¨‹ï¼Œåˆå¼•ç”¨äº†è¿™ä¸ªæŒ‡é’ˆæ¥åˆ†é…å†…å­˜ï¼Œè¿™å°±å‘ç”Ÿäº†æŠ¢å ã€‚</p><figure><img src="/pinkpig/assets/jvm_028-a8kb212d.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>####### 2ç§è§£å†³æ–¹æ¡ˆ â— é‡‡ç”¨ CAS åˆ†é…é‡è¯•çš„æ–¹å¼æ¥ä¿è¯æ›´æ–°æ“ä½œçš„åŸå­æ€§</p><p>â— æ¯ä¸ªçº¿ç¨‹åœ¨ Java å †ä¸­é¢„å…ˆåˆ†é…ä¸€å°å—å†…å­˜ï¼Œä¹Ÿå°±æ˜¯æœ¬åœ°çº¿ç¨‹åˆ†é…ç¼“å†²ï¼ˆThread Local AllocationBufferï¼ŒTLABï¼‰ï¼Œè¦åˆ†é…å†…å­˜çš„çº¿ç¨‹ï¼Œå…ˆåœ¨æœ¬åœ°ç¼“å†²åŒºä¸­åˆ†é…ï¼Œåªæœ‰æœ¬åœ°ç¼“å†²åŒºç”¨å®Œäº†ï¼Œåˆ†é…æ–°çš„ç¼“å­˜åŒºæ—¶æ‰éœ€è¦åŒæ­¥é”å®š</p><h6 id="å†…å­˜åˆ†é…è§„åˆ™" tabindex="-1"><a class="header-anchor" href="#å†…å­˜åˆ†é…è§„åˆ™" aria-hidden="true">#</a> å†…å­˜åˆ†é…è§„åˆ™</h6><p>åˆ†é…è§„åˆ™ä¸å›ºå®šï¼Œåˆ†é…è§„åˆ™å–å†³äºé€‰æ‹©çš„åƒåœ¾æ”¶é›†å™¨ç»„åˆä»¥åŠç›¸å…³çš„å‚æ•°é…ç½®</p><p>####### æ™®éå†…å­˜åˆ†é…è§„åˆ™ å¯¹è±¡ä¼˜å…ˆåœ¨Edenåˆ†é…</p><p>######## å¯¹è±¡è¿›å…¥è€å¹´ä»£4ç§æƒ…å½¢ ######### å¤§å¯¹è±¡ç›´æ¥è¿›è€å¹´ä»£ ä¸€ä¸ªå¤§å¯¹è±¡ï¼ˆå ç”¨å¤§é‡è¿ç»­å†…å­˜ç©ºé—´çš„å¯¹è±¡ï¼Œä¸€èˆ¬æ˜¯æ•°ç»„ï¼Œé•¿å­—ç¬¦ä¸²ç­‰ï¼‰ç›´æ¥è¿›å…¥è€å¹´ä»£ï¼Œé¿å…åœ¨ Eden åŒºåŠä¸¤ä¸ª Survivor åŒºä¹‹é—´å‘ç”Ÿå¤§é‡çš„å†…å­˜å¤åˆ¶</p><p>-XX:PretenureSizeThreshold</p><p>######### é•¿æœŸå­˜æ´»å¯¹è±¡å°†è¿›å…¥è€å¹´ä»£ JVM ç»™æ¯ä¸ªå¯¹è±¡å®šä¹‰äº†ä¸€ä¸ªå¯¹è±¡å¹´é¾„è®¡æ•°å™¨ï¼ˆå¯¹è±¡å¤´é‡Œçš„GCåˆ†ä»£å¹´é¾„ï¼‰ã€‚å½“æ–°ç”Ÿä»£å‘ç”Ÿä¸€æ¬¡ Minor GC åï¼Œå­˜æ´»ä¸‹æ¥çš„å¯¹è±¡å¹´é¾„ +1ï¼Œå½“å¹´é¾„è¶…è¿‡ä¸€å®šå€¼æ—¶ï¼ˆé»˜è®¤æ˜¯15ï¼‰ï¼Œå°±å°†è¶…è¿‡è¯¥å€¼çš„æ‰€æœ‰å¯¹è±¡è½¬ç§»åˆ°è€å¹´ä»£ä¸­å»ã€‚</p><p>-XX:MaxTenuringThreshold</p><p>######### åŠ¨æ€å¯¹è±¡å¹´é¾„åˆ¤å®š å¦‚æœå½“å‰æ–°ç”Ÿä»£çš„ Survivor ä¸­ï¼Œç›¸åŒå¹´é¾„æ‰€æœ‰å¯¹è±¡å¤§å°çš„æ€»å’Œå¤§äº Survivor ç©ºé—´çš„ä¸€åŠï¼ˆä¼—æ•°ï¼‰ï¼Œå¹´é¾„&gt;= è¯¥å¹´é¾„ï¼ˆä¼—æ•°ï¼‰çš„å¯¹è±¡å°±å¯ä»¥ç›´æ¥è¿›å…¥è€å¹´ä»£ï¼Œæ— é¡»ç­‰åˆ° MaxTenuringThreshold ä¸­è¦æ±‚çš„å¹´é¾„ã€‚</p><p>######### ç©ºé—´åˆ†é…æ‹…ä¿ ç©ºé—´åˆ†é…æ‹…ä¿ï¼šæ–°ç”Ÿä»£æœ‰å¤§é‡å¯¹è±¡å­˜æ´»ï¼ŒSurvivoræ— æ³•å®¹çº³çš„å¯¹è±¡ç›´æ¥è¿›å…¥è€å¹´ä»£ã€‚</p><p>åªè¦è€å¹´ä»£çš„è¿ç»­ç©ºé—´&lt;æ–°ç”Ÿä»£å¯¹è±¡æ€»å¤§å°æˆ–è€…å†æ¬¡æ™‹å‡çš„å¹³å‡å¤§å°ï¼Œå³æ— æ³•ç»™æ–°ç”Ÿä»£ä½œæ‹…ä¿ï¼Œå°±ä¼šè¿›è¡Œ Full GCã€‚</p><p>èµ‹é›¶å€¼</p><p>è®¾ç½®å¯¹è±¡å¤´ä¿¡æ¯</p><p>èµ‹åˆå§‹å€¼</p><h4 id="å¯¹è±¡çš„è®¿é—®æ–¹å¼" tabindex="-1"><a class="header-anchor" href="#å¯¹è±¡çš„è®¿é—®æ–¹å¼" aria-hidden="true">#</a> å¯¹è±¡çš„è®¿é—®æ–¹å¼</h4><p>æ ˆä¸Šçš„å¼•ç”¨referenceè®¿é—®å †ä¸­å®ä¾‹å¯¹è±¡çš„æ–¹å¼</p><h5 id="åˆ†ç±»" tabindex="-1"><a class="header-anchor" href="#åˆ†ç±»" aria-hidden="true">#</a> åˆ†ç±»</h5><p>Noteï¼šæ ¹æ®referenceå­˜æ”¾çš„åœ°å€ç±»å‹ä¸åŒï¼Œè®¿é—®å¯¹è±¡æ–¹å¼ä¸åŒ</p><h6 id="ç›´æ¥æŒ‡é’ˆè®¿é—®æ–¹å¼" tabindex="-1"><a class="header-anchor" href="#ç›´æ¥æŒ‡é’ˆè®¿é—®æ–¹å¼" aria-hidden="true">#</a> ç›´æ¥æŒ‡é’ˆè®¿é—®æ–¹å¼</h6><p>Noteï¼šHotSpoté‡‡ç”¨æ­¤ï¼Œä½†æœ‰ä¾‹å¤–æƒ…å†µç”¨å¥æŸ„è®¿é—®æ–¹å¼ referenceå­˜æ”¾å®ä¾‹å¯¹è±¡çš„åœ°å€</p><p>å¯¹è±¡å¤´é‡Œçš„ç±»å‹æŒ‡é’ˆæŒ‡å‘æ–¹æ³•åŒºä¸­çš„ç±»å‹æ•°æ®åœ°å€ï¼ˆNoteï¼šå¯¹è±¡ç±»å‹æ•°æ®åœ°å€ä¸æ˜¯Classå¯¹è±¡çš„åœ°å€ï¼‰</p><figure><img src="/pinkpig/assets/jvm_029-XQeqPWGH.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>ä¼˜ï¼šè®¿é—®å¯¹è±¡åªéœ€è¦ä¸€æ¬¡å¯»å€æ“ä½œï¼Œæ€§èƒ½ä¸Šæ¯”å¥æŸ„è®¿é—®æ–¹å¼å¿«ä¸€å€ï¼›å †ä¸­ä¸éœ€è¦åˆ†é…â€œå¥æŸ„æ± â€çš„å†…å­˜ç©ºé—´</p><p>ç¼ºï¼šå¯¹è±¡å¤´éœ€å­˜å‚¨ç±»å‹æ•°æ®çš„åœ°å€</p><h6 id="å¥æŸ„è®¿é—®æ–¹å¼" tabindex="-1"><a class="header-anchor" href="#å¥æŸ„è®¿é—®æ–¹å¼" aria-hidden="true">#</a> å¥æŸ„è®¿é—®æ–¹å¼</h6><p>referenceå­˜æ”¾å¥æŸ„åœ°å€</p><p>å †ä¸­æœ‰å—â€œå¥æŸ„æ± â€çš„å†…å­˜ç©ºé—´ï¼Œå¥æŸ„åŒ…å«äº†å¯¹è±¡å®ä¾‹æ•°æ®ä¸ç±»å‹æ•°æ®çš„åœ°å€ä¿¡æ¯ã€‚</p><figure><img src="/pinkpig/assets/jvm_030-dsFdMjWm.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>ä¼˜ï¼šå¯¹è±¡å¤´æ— éœ€å­˜å‚¨ç±»å‹æ•°æ®çš„åœ°å€</p><p>ç¼ºï¼šå †ä¸­éœ€è¦åˆ†é…â€œå¥æŸ„æ± â€çš„å†…å­˜ç©ºé—´</p><h3 id="å†…å­˜å›æ”¶" tabindex="-1"><a class="header-anchor" href="#å†…å­˜å›æ”¶" aria-hidden="true">#</a> å†…å­˜å›æ”¶</h3><p>å“ªäº›å†…å­˜éœ€è¦å›æ”¶ï¼šåˆ¤æ–­å¯¹è±¡æ˜¯å¦å­˜æ´» ä»€ä¹ˆæ—¶å€™å›æ”¶ï¼šMnior GC å’Œ Full GC æ€ä¹ˆå›æ”¶ï¼šåƒåœ¾æ”¶é›†å™¨ä¸åƒåœ¾æ”¶é›†ç®—æ³•</p><h4 id="å…³æ³¨åŒºåŸŸ" tabindex="-1"><a class="header-anchor" href="#å…³æ³¨åŒºåŸŸ" aria-hidden="true">#</a> å…³æ³¨åŒºåŸŸ</h4><p>ç¨‹åºè®¡æ•°å™¨ã€è™šæ‹Ÿæœºæ ˆã€æœ¬åœ°æ–¹æ³•æ ˆéšçº¿ç¨‹è€Œç”Ÿï¼Œä¹Ÿéšçº¿ç¨‹è€Œç­ï¼›æ ˆå¸§éšç€æ–¹æ³•çš„å¼€å§‹è€Œå…¥ æ ˆï¼Œéšç€æ–¹æ³•çš„ç»“æŸè€Œå‡ºæ ˆã€‚è¿™å‡ ä¸ªåŒºåŸŸçš„å†…å­˜åˆ†é…å’Œå›æ”¶éƒ½å…·æœ‰ç¡®å®šæ€§ï¼Œåœ¨è¿™å‡ ä¸ªåŒºåŸŸå†…ä¸ éœ€è¦è¿‡å¤šè€ƒè™‘å›æ”¶çš„é—®é¢˜ï¼Œå› ä¸ºæ–¹æ³•ç»“æŸæˆ–è€…çº¿ç¨‹ç»“æŸæ—¶ï¼Œå†…å­˜è‡ªç„¶å°±è·Ÿéšç€å›æ”¶äº†</p><p>è€Œå¯¹äº Java å †å’Œæ–¹æ³•åŒºï¼Œæˆ‘ä»¬åªæœ‰åœ¨ç¨‹åºè¿è¡ŒæœŸé—´æ‰èƒ½çŸ¥é“ä¼šåˆ›å»ºå“ªäº›å¯¹è±¡ï¼Œè¿™éƒ¨åˆ†å†…å­˜çš„åˆ† é…å’Œå›æ”¶éƒ½æ˜¯åŠ¨æ€çš„ï¼Œåƒåœ¾æ”¶é›†å™¨æ‰€å…³æ³¨çš„æ­£æ˜¯è¿™éƒ¨åˆ†å†…å­˜</p><h4 id="å“ªäº›å†…å­˜éœ€è¦å›æ”¶" tabindex="-1"><a class="header-anchor" href="#å“ªäº›å†…å­˜éœ€è¦å›æ”¶" aria-hidden="true">#</a> å“ªäº›å†…å­˜éœ€è¦å›æ”¶</h4><h5 id="å †" tabindex="-1"><a class="header-anchor" href="#å †" aria-hidden="true">#</a> å †</h5><p>åˆ¤å®šå¯¹è±¡æ˜¯å¦å­˜æ´» è‹¥ä¸€ä¸ªå¯¹è±¡ä¸è¢«ä»»ä½•å¯¹è±¡æˆ–å˜é‡å¼•ç”¨ï¼Œé‚£ä¹ˆå®ƒå°±æ˜¯æ— æ•ˆå¯¹è±¡ï¼Œéœ€è¦è¢«å›æ”¶</p><h6 id="å¼•ç”¨" tabindex="-1"><a class="header-anchor" href="#å¼•ç”¨" aria-hidden="true">#</a> å¼•ç”¨</h6><p>JDK2ä¹‹å‰ï¼Œä¸€ä¸ªå¯¹è±¡åªæœ‰ è¢«å¼•ç”¨æˆ–è€…æ²¡æœ‰è¢«å¼•ç”¨ä¸¤ç§çŠ¶æ€</p><p>JDK2ä¹‹åï¼Œå¼•ç”¨åˆ†ä¸º4ç±» 4 ç§å¼•ç”¨å¼ºåº¦ä¾æ¬¡é€æ¸å‡å¼±</p><figure><img src="/pinkpig/assets/jvm_031-YSCV10br.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>####### 4ç§å¼•ç”¨ ######## å¼ºå¼•ç”¨ Strong Referrence å­˜åœ¨å¼•ç”¨å°±ä¸ä¼šè¢«å›æ”¶</p><p>æœ€ä¼ ç»Ÿçš„æ™®éå­˜åœ¨çš„å¼•ç”¨èµ‹å€¼ Object obj = new Object();</p><p>######## è½¯å¼•ç”¨ Soft Reference å†…å­˜æº¢å‡ºå‰å°†è¢«å›æ”¶</p><p>é£Ÿä¹‹æ— å‘³ï¼Œå¼ƒä¹‹å¯æƒœçš„å¯¹è±¡ï¼ˆè¿˜æœ‰ç”¨ï¼Œä½†éå¿…é¡»ï¼‰ï¼Œå†…å­˜å¤Ÿä¿ç•™ï¼Œå†…å­˜ç´§å¼ å¯æŠ›å¼ƒ</p><p>é€šå¸¸ç”¨æ¥å®ç°ç¼“å­˜ï¼Œå¦‚æœæœ‰ç©ºé—²å†…å­˜åˆ™ä¿ç•™ï¼Œå†…å­˜ä¸è¶³æ—¶æ¸…ç†æ‰</p><p>######## å¼±å¼•ç”¨ Weak Reference ä¸‹æ¬¡åƒåœ¾å›æ”¶å°†è¢«å›æ”¶</p><p>######## è™šå¼•ç”¨/å¹½çµå¼•ç”¨/å¹»å½±å¼•ç”¨<br> Phantom Reference ä¸€ä¸ªå¯¹è±¡æ˜¯å¦æœ‰è™šå¼•ç”¨çš„å­˜åœ¨ï¼Œå®Œå…¨ä¸ä¼šå¯¹å…¶ç”Ÿå­˜æ—¶é—´æ„æˆå½±å“ï¼Œä¹Ÿæ— æ³•é€šè¿‡è™šå¼•ç”¨æ¥å–å¾—ä¸€ä¸ªå¯¹è±¡å®ä¾‹ã€‚ä¸ºä¸€ä¸ªå¯¹è±¡è®¾ç½®è™šå¼•ç”¨å…³è”çš„å”¯ä¸€ç›®çš„åªæ˜¯ä¸ºäº†èƒ½åœ¨è¿™ä¸ªå¯¹è±¡è¢«æ”¶é›†å™¨å›æ”¶æ—¶æ”¶åˆ°ä¸€ä¸ªç³»ç»Ÿé€šçŸ¥ã€‚å®ƒä»…ä»…æ˜¯æä¾›äº†ä¸€ç§ç¡®ä¿å¯¹è±¡è¢«finalizeä¹‹åï¼ŒåšæŸäº›äº‹æƒ…çš„æœºåˆ¶ï¼Œæ¯”å¦‚ï¼Œé€šå¸¸ç”¨æ¥åšæ‰€è°“çš„Post-Mortemæ¸…ç†æœºåˆ¶</p><h6 id="ç®—æ³•" tabindex="-1"><a class="header-anchor" href="#ç®—æ³•" aria-hidden="true">#</a> ç®—æ³•</h6><p>####### å¼•ç”¨è®¡æ•°æ³• åœ¨å¯¹è±¡å¤´ç»´æŠ¤ç€ä¸€ä¸ª counter è®¡æ•°å™¨ï¼Œå¯¹è±¡è¢«å¼•ç”¨ä¸€æ¬¡åˆ™è®¡æ•°å™¨ +1ï¼›è‹¥å¼•ç”¨å¤±æ•ˆåˆ™è®¡æ•°å™¨ -1ã€‚ å½“è®¡æ•°å™¨ä¸º 0 æ—¶ï¼Œå°±è®¤ä¸ºè¯¥å¯¹è±¡æ— æ•ˆäº†ã€‚</p><p>å­˜åœ¨é—®é¢˜ï¼šå¾ªç¯å¼•ç”¨</p><p>ä¸»æµJVMä¸€èˆ¬ä¸é‡‡ç”¨æ­¤</p><p>####### å¯è¾¾æ€§åˆ†ææ³• æ‰€æœ‰å’Œ GC Roots ç›´æ¥æˆ–é—´æ¥å…³è”çš„å¯¹è±¡éƒ½æ˜¯æœ‰æ•ˆå¯¹è±¡ï¼Œå’Œ GC Roots æ²¡æœ‰å…³è”çš„å¯¹è±¡å°±æ˜¯æ— æ•ˆ å¯¹è±¡ã€‚</p><p>å°†ä¸€ç³»åˆ— GC Roots ä½œä¸ºåˆå§‹çš„å­˜æ´»å¯¹è±¡åˆé›†ï¼ˆGC Root Setï¼‰ï¼Œç„¶åä»è¯¥åˆé›†å‡ºå‘ï¼Œæ¢ç´¢æ‰€æœ‰èƒ½å¤Ÿè¢«è¯¥é›†åˆå¼•ç”¨åˆ°çš„å¯¹è±¡ï¼Œå¹¶å°†å…¶åŠ å…¥åˆ°è¯¥é›†åˆä¸­ï¼Œè¿™ä¸ªè¿‡ç¨‹æˆ‘ä»¬ä¹Ÿç§°ä¹‹ä¸ºæ ‡è®°ï¼ˆmarkï¼‰ã€‚æœ€ç»ˆï¼Œæœªè¢«æ¢ç´¢åˆ°çš„å¯¹è±¡ä¾¿æ˜¯æ­»äº¡çš„ï¼Œæ˜¯å¯ä»¥å›æ”¶çš„ã€‚</p><figure><img src="/pinkpig/assets/jvm_032-M6iPTYvw.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>######## GC Roots ######### æ ˆå†… è™šæ‹Ÿæœºæ ˆï¼ˆæ ˆå¸§ä¸­çš„æœ¬åœ°å˜é‡è¡¨ï¼‰ä¸­å¼•ç”¨çš„å¯¹è±¡</p><p>æœ¬åœ°æ–¹æ³•æ ˆä¸­å¼•ç”¨çš„å¯¹è±¡</p><p>######### æ–¹æ³•åŒºå†… æ–¹æ³•åŒºä¸­å¸¸é‡å¼•ç”¨çš„å¯¹è±¡</p><p>æ–¹æ³•åŒºä¸­ç±»é™æ€å±æ€§å¼•ç”¨çš„å¯¹è±¡</p><p>å¾ªç¯å¼•ç”¨é—®é¢˜çš„è§£å†³ï¼šGCRootsæ˜¯ä¸ä¼šè¢«å †ä¸­å¯¹è±¡æ‰€å¼•ç”¨çš„ï¼Œè¿™æ ·å°±ä¸ä¼šæœ‰å¾ªç¯å¼•ç”¨çš„é—®é¢˜</p><p>ä¸»æµJVMä¸€èˆ¬é‡‡ç”¨æ­¤</p><h6 id="finalize" tabindex="-1"><a class="header-anchor" href="#finalize" aria-hidden="true">#</a> finalize</h6><p>å¦‚æœå¯¹è±¡é‡å†™äº†finalize()ä¸”æœªè¢«æ‰§è¡Œè¿‡ï¼ˆåªä¼šè¢«ç³»ç»Ÿè°ƒç”¨ä¸€æ¬¡ï¼‰ï¼Œå¯¹è±¡ä¼šè¢«æ”¾å…¥F-Queueé˜Ÿåˆ—ä¸­ï¼Œè™šæ‹Ÿæœºä¼šä»¥è¾ƒä½çš„ä¼˜å…ˆçº§æ‰§è¡Œè¿™äº› finalize()æ–¹æ³•ï¼Œä½†ä¸ä¼šç¡®ä¿æ‰€æœ‰çš„ finalize() æ–¹æ³•éƒ½ä¼šæ‰§è¡Œç»“æŸã€‚å¦‚æœ finalize() æ–¹æ³•å‡ºç°è€—æ—¶æ“ä½œï¼Œè™šæ‹Ÿæœºå°±ç›´æ¥åœæ­¢æŒ‡å‘è¯¥æ–¹æ³•ï¼Œå°†å¯¹è±¡æ¸…é™¤ã€‚å¦‚æœåœ¨æ‰§è¡Œfinalize() æ–¹æ³•æ—¶ï¼Œå°† this èµ‹ç»™äº†æŸä¸€ä¸ªå¼•ç”¨ï¼Œé‚£ä¹ˆè¯¥å¯¹è±¡å°±é‡ç”Ÿäº†ã€‚å¦‚æœæ²¡æœ‰ï¼Œé‚£ä¹ˆå°±ä¼šè¢«åƒåœ¾æ”¶é›†å™¨æ¸…é™¤ã€‚</p><h5 id="æ–¹æ³•åŒº" tabindex="-1"><a class="header-anchor" href="#æ–¹æ³•åŒº" aria-hidden="true">#</a> æ–¹æ³•åŒº</h5><p>ä¸»è¦å›æ”¶ç›®æ ‡ï¼šå¸¸é‡æ± çš„å›æ”¶å’Œç±»å‹çš„å¸è½½</p><h6 id="åˆ¤æ–­åºŸå¼ƒå¸¸é‡" tabindex="-1"><a class="header-anchor" href="#åˆ¤æ–­åºŸå¼ƒå¸¸é‡" aria-hidden="true">#</a> åˆ¤æ–­åºŸå¼ƒå¸¸é‡</h6><p>å¸¸é‡æ± ä¸­ä¸è¢«ä»»ä½•å˜é‡æˆ–å¯¹è±¡å¼•ç”¨çš„å¸¸é‡</p><h6 id="åˆ¤æ–­æ— ç”¨çš„ç±»" tabindex="-1"><a class="header-anchor" href="#åˆ¤æ–­æ— ç”¨çš„ç±»" aria-hidden="true">#</a> åˆ¤æ–­æ— ç”¨çš„ç±»</h6><p>ï¼ˆéœ€åŒæ—¶æ»¡è¶³3ä¸ªæ¡ä»¶æ‰å…è®¸è¢«å›æ”¶ï¼Œè¿™é‡Œè¯´çš„ä»…ä»…æ˜¯â€œè¢«å…è®¸â€ï¼Œè€Œå¹¶ä¸æ˜¯å’Œå¯¹è±¡ä¸€æ ·ï¼Œæ²¡æœ‰å¼•ç”¨äº†å¿…ç„¶ä¼šå›æ”¶ï¼‰ Noteï¼šåœ¨å¤§é‡ä½¿ç”¨åå°„ã€åŠ¨æ€ä»£ç†ã€CGLibç­‰å­—èŠ‚ç æ¡†æ¶ï¼ŒåŠ¨æ€ç”ŸæˆJSPä»¥åŠOSGiè¿™ç±»é¢‘ç¹è‡ªå®šä¹‰ç±»åŠ è½½å™¨çš„åœºæ™¯ä¸­ï¼Œé€šå¸¸éƒ½éœ€è¦Javaè™šæ‹Ÿæœºå…·å¤‡ç±»å‹å¸è½½çš„èƒ½åŠ›ï¼Œä»¥ä¿è¯ä¸ä¼šå¯¹æ–¹æ³•åŒºé€ æˆè¿‡å¤§çš„å†…å­˜å‹åŠ›ã€‚ è¯¥ç±»çš„æ‰€æœ‰å®ä¾‹éƒ½å·²ç»è¢«å›æ”¶</p><p>####### åŠ è½½è¯¥ç±»çš„ ç±»åŠ è½½å™¨ClassLoader å·²ç»è¢«å›æ”¶ è¿™ä¸ªæ¡ä»¶é™¤éæ˜¯ç»è¿‡ç²¾å¿ƒè®¾è®¡çš„å¯æ›¿æ¢ç±»åŠ è½½å™¨çš„åœºæ™¯ï¼Œå¦‚OSGiã€JSPçš„é‡åŠ è½½ç­‰ï¼Œå¦åˆ™é€šå¸¸æ˜¯å¾ˆéš¾è¾¾æˆçš„</p><p>è¯¥ç±»çš„ java.lang.Class å¯¹è±¡æ²¡æœ‰åœ¨ä»»ä½•åœ°æ–¹è¢«å¼•ç”¨ï¼Œæ— æ³•åœ¨ä»»ä½•åœ°æ–¹é€šè¿‡åå°„è®¿é—®è¯¥ç±»çš„æ–¹æ³•</p><p>Noteï¼šä¸€ä¸ªç±»è¢«è™šæ‹ŸæœºåŠ è½½è¿›æ–¹æ³•åŒºï¼Œé‚£ä¹ˆåœ¨å †ä¸­å°±ä¼šæœ‰ä¸€ä¸ªä»£è¡¨è¯¥ç±»çš„å¯¹è±¡ï¼šjava.lang.Classã€‚è¿™ä¸ªå¯¹è±¡åœ¨ç±»è¢«åŠ è½½è¿›æ–¹æ³•åŒºæ—¶åˆ›å»ºï¼Œåœ¨æ–¹æ³•åŒºè¯¥ç±»è¢«åˆ é™¤æ—¶æ¸…é™¤ã€‚</p><h4 id="gc" tabindex="-1"><a class="header-anchor" href="#gc" aria-hidden="true">#</a> GC</h4><p>ä»€ä¹ˆæ—¶å€™å›æ”¶</p><h5 id="minor-gc-è½»é‡çº§å›æ”¶" tabindex="-1"><a class="header-anchor" href="#minor-gc-è½»é‡çº§å›æ”¶" aria-hidden="true">#</a> Minor GC è½»é‡çº§å›æ”¶</h5><p>å›æ”¶æ–°ç”Ÿä»£ï¼Œæ¯”è¾ƒé¢‘ç¹ï¼Œä¸€èˆ¬é€Ÿåº¦æ¯”è¾ƒå¿«</p><h6 id="é¢‘ç¹minor-gc" tabindex="-1"><a class="header-anchor" href="#é¢‘ç¹minor-gc" aria-hidden="true">#</a> é¢‘ç¹minor gc</h6><p>æ ¹å› ï¼šæ–°ç”Ÿä»£ç©ºé—´å¤ªå°ï¼ŒEdenåŒºå¾ˆå¿«è¢«å¡«æ»¡ è§£å†³ï¼šå¢å¤§æ–°ç”Ÿä»£ç©ºé—´ï¼ˆ-Xmnï¼‰</p><h5 id="full-gc-major-gc-é‡é‡çº§å›æ”¶" tabindex="-1"><a class="header-anchor" href="#full-gc-major-gc-é‡é‡çº§å›æ”¶" aria-hidden="true">#</a> Full GC/Major GC é‡é‡çº§å›æ”¶</h5><p>å›æ”¶æ•´ä¸ªJavaå †å’Œæ–¹æ³•åŒºï¼Œé€Ÿåº¦ä¸€èˆ¬ä¼šæ¯” Minor GC æ…¢ 10 å€ä»¥ä¸Š</p><h6 id="è§¦å‘full-gcçš„æƒ…å½¢" tabindex="-1"><a class="header-anchor" href="#è§¦å‘full-gcçš„æƒ…å½¢" aria-hidden="true">#</a> è§¦å‘Full GCçš„æƒ…å½¢</h6><p>####### è€å¹´ä»£ç©ºé—´ä¸è¶³ è‹¥Full GCåç©ºé—´ä¾æ—§ä¸è¶³ï¼Œåˆ™ä¼šæŠ›å‡ºå¦‚ä¸‹é”™è¯¯ï¼š java.lang.OutOfMemoryError: Java heap space</p><p>####### æ°¸ä¹…ä»£ç©ºé—´ä¸è¶³ å½“ç³»ç»Ÿè¦åŠ è½½çš„ç±»ã€åå°„çš„ç±»å’Œ è°ƒç”¨çš„æ–¹æ³•è¾ƒå¤šæ—¶ï¼Œæ°¸ä¹…ä»£å¯èƒ½ä¼šè¢«å æ»¡ï¼Œä¼šè§¦å‘ Full GC</p><p>è‹¥Full GCåç©ºé—´ä¾æ—§ä¸è¶³ï¼Œåˆ™ä¼šæŠ›å‡ºå¦‚ä¸‹é”™è¯¯ï¼š java.lang.OutOfMemoryError: PermGen space</p><p>####### æ˜¾å¼è°ƒç”¨System.gc()æ–¹æ³• æ­¤æ–¹æ³•çš„è°ƒç”¨æ˜¯å»ºè®® JVM è¿›è¡Œ Full GCï¼Œæ³¨æ„è¿™åªæ˜¯å»ºè®®è€Œéä¸€å®šï¼Œä½†åœ¨å¾ˆå¤šæƒ…å†µä¸‹å®ƒä¼š è§¦å‘ Full GCï¼Œä»è€Œå¢åŠ  Full GC çš„é¢‘ç‡ã€‚</p><p>é€šå¸¸æƒ…å†µä¸‹æˆ‘ä»¬åªéœ€è¦è®©è™šæ‹Ÿæœºè‡ªå·±å»ç®¡ç†å†…å­˜å³å¯ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ -XX:+ DisableExplicitGC æ¥ç¦æ­¢è°ƒç”¨ System.gc()ã€‚</p><p>####### è€å¹´ä»£ä¼°è®¡æ‹…ä¿ä¼šå¤±è´¥ è€å¹´ä»£çš„è¿ç»­ç©ºé—´å°äºæ–°ç”Ÿä»£å¯¹è±¡æ€»å¤§å°æˆ–è€…å†æ¬¡æ™‹å‡çš„å¹³å‡å¤§å°</p><p>é€šè¿‡javaå‘½ä»¤æ”¹å˜åˆ†é…å †ç©ºé—´çš„è¿è¡Œç­–ç•¥</p><h6 id="é¢‘ç¹full-gc" tabindex="-1"><a class="header-anchor" href="#é¢‘ç¹full-gc" aria-hidden="true">#</a> é¢‘ç¹full gc</h6><p>####### æ¸…æ¥šå“ªäº›åŸå› è§¦å‘full gc å¤§å¯¹è±¡ï¼ˆæ¯”å¦‚ SQL æŸ¥è¯¢æœªåšåˆ†é¡µï¼‰ é•¿ç”Ÿå‘½å‘¨æœŸå¯¹è±¡ å†…å­˜æ³„æ¼ï¼ˆæ¯”å¦‚ IO å¯¹è±¡ä½¿ç”¨å®Œåæœªè°ƒç”¨ close æ–¹æ³•é‡Šæ”¾èµ„æºï¼‰ æ˜¾å¼è°ƒç”¨gcæ–¹æ³• JVMå‚æ•°è®¾ç½®é—®é¢˜ï¼šåŒ…æ‹¬æ€»å†…å­˜å¤§å°ã€æ–°ç”Ÿä»£å’Œè€å¹´ä»£çš„å¤§å°ã€Eden åŒºå’Œ S åŒºçš„å¤§å°ã€å…ƒç©ºé—´å¤§å°ã€åƒåœ¾å›æ”¶ç®—æ³•ç­‰ç­‰ã€‚</p><p>####### æ¸…æ¥šå¯ç”¨çš„æ’æŸ¥å·¥å…· â— å…¬å¸ç›‘æ§ç³»ç»Ÿï¼šå¤§éƒ¨åˆ†å…¬å¸éƒ½ä¼šæœ‰ï¼Œå¯å…¨æ–¹ä½ç›‘æ§JVMçš„å„é¡¹æŒ‡æ ‡</p><p>â— å¯è§†åŒ–å †å†…å­˜åˆ†æå·¥å…·ï¼šJVisualVMã€MATç­‰</p><p>â— JDKè‡ªå¸¦å·¥å…·ï¼šjmapã€jstatç­‰å¸¸ç”¨å‘½ä»¤</p><h1 id="æŸ¥çœ‹å †å†…å­˜å„åŒºåŸŸçš„ä½¿ç”¨ç‡ä»¥åŠgcæƒ…å†µ" tabindex="-1"><a class="header-anchor" href="#æŸ¥çœ‹å †å†…å­˜å„åŒºåŸŸçš„ä½¿ç”¨ç‡ä»¥åŠgcæƒ…å†µ" aria-hidden="true">#</a> æŸ¥çœ‹å †å†…å­˜å„åŒºåŸŸçš„ä½¿ç”¨ç‡ä»¥åŠGCæƒ…å†µ</h1><p>jstat -gcutil -h20 pid 1000</p><h1 id="æŸ¥çœ‹å †å†…å­˜ä¸­çš„å­˜æ´»å¯¹è±¡-å¹¶æŒ‰ç©ºé—´æ’åº" tabindex="-1"><a class="header-anchor" href="#æŸ¥çœ‹å †å†…å­˜ä¸­çš„å­˜æ´»å¯¹è±¡-å¹¶æŒ‰ç©ºé—´æ’åº" aria-hidden="true">#</a> æŸ¥çœ‹å †å†…å­˜ä¸­çš„å­˜æ´»å¯¹è±¡ï¼Œå¹¶æŒ‰ç©ºé—´æ’åº</h1><p>jmap -histo pid | head -n20</p><h1 id="dumpå †å†…å­˜æ–‡ä»¶" tabindex="-1"><a class="header-anchor" href="#dumpå †å†…å­˜æ–‡ä»¶" aria-hidden="true">#</a> dumpå †å†…å­˜æ–‡ä»¶</h1><p>jmap -dump:format=b,file=heap pid</p><p>####### æ’æŸ¥æŒ‡å— â— æŸ¥çœ‹ç›‘æ§ï¼Œä»¥äº†è§£å‡ºç°é—®é¢˜çš„æ—¶é—´ç‚¹ä»¥åŠå½“å‰ FGC çš„é¢‘ç‡ï¼ˆå¯å¯¹æ¯”æ­£å¸¸æƒ…å†µçœ‹é¢‘ç‡æ˜¯å¦æ­£å¸¸ï¼‰ â— äº†è§£è¯¥æ—¶é—´ç‚¹ä¹‹å‰æœ‰æ²¡æœ‰ç¨‹åºä¸Šçº¿ã€åŸºç¡€ç»„ä»¶å‡çº§ç­‰æƒ…å†µã€‚ â— äº†è§£ JVM çš„å‚æ•°è®¾ç½®ï¼ŒåŒ…æ‹¬ï¼šå †ç©ºé—´å„ä¸ªåŒºåŸŸçš„å¤§å°è®¾ç½®ï¼Œæ–°ç”Ÿä»£å’Œè€å¹´ä»£åˆ†åˆ«é‡‡ç”¨äº†å“ªäº›åƒåœ¾æ”¶é›†å™¨ï¼Œç„¶ååˆ†æ JVM å‚æ•°è®¾ç½®æ˜¯å¦åˆç†ã€‚ â— å†å¯¹æ­¥éª¤ 1 ä¸­åˆ—å‡ºçš„å¯èƒ½åŸå› åšæ’é™¤æ³•ï¼Œå…¶ä¸­å…ƒç©ºé—´è¢«æ‰“æ»¡ã€å†…å­˜æ³„æ¼ã€ä»£ç æ˜¾å¼è°ƒç”¨ gc æ–¹æ³•æ¯”è¾ƒå®¹æ˜“æ’æŸ¥ã€‚ â— é’ˆå¯¹å¤§å¯¹è±¡æˆ–è€…é•¿ç”Ÿå‘½å‘¨æœŸå¯¹è±¡å¯¼è‡´çš„ FGCï¼Œå¯é€šè¿‡ jmap -histo å‘½ä»¤å¹¶ç»“åˆ dump å †å†…å­˜æ–‡ä»¶ä½œè¿›ä¸€æ­¥åˆ†æï¼Œéœ€è¦å…ˆå®šä½åˆ°å¯ç–‘å¯¹è±¡ã€‚ â— é€šè¿‡å¯ç–‘å¯¹è±¡å®šä½åˆ°å…·ä½“ä»£ç å†æ¬¡åˆ†æï¼Œè¿™æ—¶å€™è¦ç»“åˆ GC åŸç†å’Œ JVM å‚æ•°è®¾ç½®ï¼Œå¼„æ¸…æ¥šå¯ç–‘å¯¹è±¡æ˜¯å¦æ»¡è¶³äº†è¿›å…¥åˆ°è€å¹´ä»£çš„æ¡ä»¶æ‰èƒ½ä¸‹ç»“è®ºã€‚</p><h4 id="æ€ä¹ˆå›æ”¶" tabindex="-1"><a class="header-anchor" href="#æ€ä¹ˆå›æ”¶" aria-hidden="true">#</a> æ€ä¹ˆå›æ”¶</h4><p>ç•¥ åƒåœ¾æ”¶é›†ç®—æ³•</p><p>åƒåœ¾æ”¶é›†å™¨</p><h3 id="å†…å­˜æ³„æ¼ã€å†…å­˜æº¢å‡º" tabindex="-1"><a class="header-anchor" href="#å†…å­˜æ³„æ¼ã€å†…å­˜æº¢å‡º" aria-hidden="true">#</a> å†…å­˜æ³„æ¼ã€å†…å­˜æº¢å‡º</h3><h4 id="ä¸¤è€…å…³ç³»" tabindex="-1"><a class="header-anchor" href="#ä¸¤è€…å…³ç³»" aria-hidden="true">#</a> ä¸¤è€…å…³ç³»</h4><h5 id="å†…å­˜æ³„æ¼-ç”³è¯·çš„å†…å­˜ç©ºé—´æ²¡æœ‰è¢«æ­£ç¡®é‡Šæ”¾-ç©ºé—´ä¸ç”¨äº†ä½†è¿˜å ç€-å ç€èŒ…å‘ä¸æ‹‰å±" tabindex="-1"><a class="header-anchor" href="#å†…å­˜æ³„æ¼-ç”³è¯·çš„å†…å­˜ç©ºé—´æ²¡æœ‰è¢«æ­£ç¡®é‡Šæ”¾-ç©ºé—´ä¸ç”¨äº†ä½†è¿˜å ç€-å ç€èŒ…å‘ä¸æ‹‰å±" aria-hidden="true">#</a> å†…å­˜æ³„æ¼ï¼šç”³è¯·çš„å†…å­˜ç©ºé—´æ²¡æœ‰è¢«æ­£ç¡®é‡Šæ”¾ï¼Œç©ºé—´ä¸ç”¨äº†ä½†è¿˜å ç€ï¼ˆå ç€èŒ…å‘ä¸æ‹‰å±ï¼‰</h5><p>å†…å­˜æº¢å‡ºï¼šç”³è¯·å†…å­˜æ—¶ï¼Œå‘ç°å†…å­˜æ»¡äº†ï¼Œä¸å¤Ÿç”¨äº†ï¼ˆå‘å…¨æ»¡äº†ï¼‰ ä¸¤è€…å…³ç³»ï¼šå†…å­˜æ³„æ¼ä¼šå¯¼è‡´å†…å­˜æº¢å‡º å›¾è§£ï¼šè¹²å‘ æ­£å¸¸æƒ…å†µï¼šå å‘çš„éƒ½æ˜¯åœ¨ç”¨çš„ï¼Œä¹Ÿæœ‰å¾ˆå¤šç©ºç€çš„ å†…å­˜æ³„æ¼ï¼šéƒ¨åˆ†å å‘çš„æ²¡åœ¨ç”¨äº†ï¼Œä½†ä»å ç€å‘ï¼ˆé‚£ä¸¤ä¸ªç¬‘è„¸ï¼‰ å†…å­˜æº¢å‡ºï¼šå‘å…¨æ»¡äº†</p><figure><img src="/pinkpig/assets/jvm_033-jbE3SZMB.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><h4 id="å†…å­˜æº¢å‡ºå¼‚å¸¸-oom-outofmemeryerror" tabindex="-1"><a class="header-anchor" href="#å†…å­˜æº¢å‡ºå¼‚å¸¸-oom-outofmemeryerror" aria-hidden="true">#</a> å†…å­˜æº¢å‡ºå¼‚å¸¸ OOM ï¼ˆOutOfMemeryErrorï¼‰</h4><p>é™¤ç¨‹åºè®¡æ•°å™¨ä»¥å¤–çš„å†…å­˜åŒºåŸŸï¼Œéƒ½æœ‰å¯èƒ½OOM</p><p>åƒåœ¾æ”¶é›†æœºåˆ¶é¿å…äº†å¤§éƒ¨åˆ†çš„å†…å­˜æº¢å‡ºå¼‚å¸¸</p><p>å½“éœ€è¦æ’æŸ¥å†…å­˜æº¢å‡ºã€å†…å­˜æ³„æ¼çš„é—®é¢˜ï¼Œå½“åƒåœ¾æ”¶é›†æˆä¸ºç³»ç»Ÿè¾¾åˆ°æ›´é«˜å¹¶å‘é‡çš„ç“¶é¢ˆæ—¶ï¼Œå¿…é¡»å¯¹å†…å­˜åŠ¨æ€åˆ†é…å’Œå†…å­˜å›æ”¶æŠ€æœ¯å®æ–½å¿…è¦çš„ç›‘æ§å’Œè°ƒèŠ‚</p><h5 id="æ‰‹å†™å†…å­˜æº¢å‡º" tabindex="-1"><a class="header-anchor" href="#æ‰‹å†™å†…å­˜æº¢å‡º" aria-hidden="true">#</a> æ‰‹å†™å†…å­˜æº¢å‡º</h5><figure><img src="/pinkpig/assets/jvm_034-Mzj0oJa7.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><figure><img src="/pinkpig/assets/jvm_035-EXKrpjEK.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><h4 id="å†…å­˜æ³„éœ²" tabindex="-1"><a class="header-anchor" href="#å†…å­˜æ³„éœ²" aria-hidden="true">#</a> å†…å­˜æ³„éœ²</h4><h5 id="æƒ…å½¢" tabindex="-1"><a class="header-anchor" href="#æƒ…å½¢" aria-hidden="true">#</a> æƒ…å½¢</h5><h6 id="" tabindex="-1"><a class="header-anchor" href="#" aria-hidden="true">#</a></h6><figure><img src="/pinkpig/assets/jvm_036-GdJd3-Pn.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>â— é™æ€é›†åˆç±»ï¼šé™æ€é›†åˆçš„ç”Ÿå‘½å‘¨æœŸå’Œ JVM ä¸€è‡´ï¼Œæ‰€ä»¥é™æ€é›†åˆå¼•ç”¨çš„å¯¹è±¡ä¸èƒ½è¢«é‡Šæ”¾ã€‚</p><p>â— å•ä¾‹æ¨¡å¼ï¼šå•ä¾‹å¯¹è±¡åœ¨åˆå§‹åŒ–åä¼šä»¥é™æ€å˜é‡çš„æ–¹å¼åœ¨JVMçš„æ•´ä¸ªç”Ÿå‘½å‘¨æœŸä¸­å­˜åœ¨ã€‚å¦‚æœå•ä¾‹å¯¹è±¡æŒæœ‰å¤–éƒ¨çš„å¼•ç”¨ï¼Œé‚£ä¹ˆè¿™ä¸ªå¤–éƒ¨å¯¹è±¡å°†ä¸èƒ½è¢«GCå›æ”¶ã€‚</p><p>â— è¿æ¥æœªé‡Šæ”¾ï¼šåˆ›å»ºçš„è¿æ¥ä¸å†ä½¿ç”¨æ—¶ï¼Œéœ€è¦è°ƒç”¨ close æ–¹æ³•å…³é—­è¿æ¥ï¼Œåªæœ‰è¿æ¥è¢«å…³é—­åï¼ŒGC æ‰ä¼šå›æ”¶å¯¹åº”çš„å¯¹è±¡ã€‚</p><p>â— å˜é‡ä½œç”¨åŸŸå¤ªå¤§ï¼šå˜é‡å®šä¹‰çš„ä½œç”¨åŸŸå¤§äºå…¶ä½¿ç”¨èŒƒå›´ï¼Œå¾ˆå¯èƒ½å­˜åœ¨å†…å­˜æ³„æ¼ï¼›æˆ–ä¸å†ä½¿ç”¨å¯¹è±¡æ²¡æœ‰åŠæ—¶å°†å¯¹è±¡è®¾ç½®ä¸º nullï¼Œå¾ˆå¯èƒ½å¯¼è‡´å†…å­˜æ³„æ¼çš„å‘ç”Ÿã€‚</p><p>â— hashå€¼å‘ç”Ÿå˜åŒ–ï¼šå¯¹è±¡ Hash å€¼æ”¹å˜ï¼Œä½¿ç”¨ HashMapã€HashSet ç­‰å®¹å™¨ä¸­æ—¶å€™ï¼Œç”±äºå¯¹è±¡ä¿®æ”¹ä¹‹åçš„ Hash å€¼å’Œå­˜å‚¨è¿›å®¹å™¨æ—¶çš„ Hash å€¼ä¸åŒï¼Œæ‰€ä»¥æ— æ³•æ‰¾åˆ°å­˜å…¥çš„å¯¹è±¡ï¼Œè‡ªç„¶ä¹Ÿæ— æ³•å•ç‹¬åˆ é™¤äº†ï¼Œè¿™ä¹Ÿä¼šé€ æˆå†…å­˜æ³„æ¼ã€‚è¯´å¥é¢˜å¤–è¯ï¼Œè¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆ String ç±»å‹è¢«è®¾ç½®æˆäº†ä¸å¯å˜ç±»å‹ã€‚</p><p>â— ThreadLocal ä½¿ç”¨ä¸å½“ï¼šThreadLocal çš„å¼±å¼•ç”¨å¯¼è‡´å†…å­˜æ³„æ¼ä¹Ÿæ˜¯ä¸ªè€ç”Ÿå¸¸è°ˆçš„è¯é¢˜äº†ï¼Œä½¿ç”¨å®Œ ThreadLocal ä¸€å®šè¦è®°å¾—ä½¿ç”¨ remove æ–¹æ³•æ¥è¿›è¡Œæ¸…é™¤ã€‚</p><h5 id="å¦‚ä½•å®šä½" tabindex="-1"><a class="header-anchor" href="#å¦‚ä½•å®šä½" aria-hidden="true">#</a> å¦‚ä½•å®šä½</h5><p>æ€ä¹ˆå¤„ç† å†…å­˜æ³„æ¼æ˜¯å†…åœ¨ç—…æºï¼Œå¤–åœ¨ç—…ç—‡è¡¨ç°å¯èƒ½æœ‰ï¼š</p><ul><li>åº”ç”¨ç¨‹åºé•¿æ—¶é—´è¿ç»­è¿è¡Œæ—¶æ€§èƒ½ä¸¥é‡ä¸‹é™</li><li>CPU ä½¿ç”¨ç‡é£™å‡ï¼Œç”šè‡³åˆ° 100%</li><li>é¢‘ç¹ Full GCï¼Œå„ç§æŠ¥è­¦ï¼Œä¾‹å¦‚æ¥å£è¶…æ—¶æŠ¥è­¦ç­‰</li><li>åº”ç”¨ç¨‹åºæŠ›å‡º OutOfMemoryError é”™è¯¯</li><li>åº”ç”¨ç¨‹åºå¶å°”ä¼šè€—å°½è¿æ¥å¯¹è±¡</li></ul><figure><img src="/pinkpig/assets/jvm_037-oO0gMXFI.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><figure><img src="/pinkpig/assets/jvm_038-WirS90WT.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><h3 id="jvmè°ƒä¼˜" tabindex="-1"><a class="header-anchor" href="#jvmè°ƒä¼˜" aria-hidden="true">#</a> JVMè°ƒä¼˜</h3><h4 id="æœ‰å“ªäº›å¸¸ç”¨çš„å‘½ä»¤è¡Œæ€§èƒ½ç›‘æ§å’Œæ•…éšœå¤„ç†å·¥å…·" tabindex="-1"><a class="header-anchor" href="#æœ‰å“ªäº›å¸¸ç”¨çš„å‘½ä»¤è¡Œæ€§èƒ½ç›‘æ§å’Œæ•…éšœå¤„ç†å·¥å…·" aria-hidden="true">#</a> æœ‰å“ªäº›å¸¸ç”¨çš„å‘½ä»¤è¡Œæ€§èƒ½ç›‘æ§å’Œæ•…éšœå¤„ç†å·¥å…·ï¼Ÿ</h4><h5 id="æ“ä½œç³»ç»Ÿå·¥å…·" tabindex="-1"><a class="header-anchor" href="#æ“ä½œç³»ç»Ÿå·¥å…·" aria-hidden="true">#</a> æ“ä½œç³»ç»Ÿå·¥å…·</h5><p>topï¼šæ˜¾ç¤ºç³»ç»Ÿæ•´ä½“èµ„æºä½¿ç”¨æƒ…å†µ vmstatï¼šç›‘æ§å†…å­˜å’Œ CPU iostatï¼šç›‘æ§ IO ä½¿ç”¨ netstatï¼šç›‘æ§ç½‘ç»œä½¿ç”¨</p><h5 id="jdkæ€§èƒ½ç›‘æ§å·¥å…·" tabindex="-1"><a class="header-anchor" href="#jdkæ€§èƒ½ç›‘æ§å·¥å…·" aria-hidden="true">#</a> JDKæ€§èƒ½ç›‘æ§å·¥å…·</h5><p>jpsï¼šè™šæ‹Ÿæœºè¿›ç¨‹æŸ¥çœ‹ jstatï¼šè™šæ‹Ÿæœºè¿è¡Œæ—¶ä¿¡æ¯æŸ¥çœ‹ jinfoï¼šè™šæ‹Ÿæœºé…ç½®æŸ¥çœ‹ jmapï¼šå†…å­˜æ˜ åƒï¼ˆå¯¼å‡ºï¼‰ jhatï¼šå †è½¬å‚¨å¿«ç…§åˆ†æ jstackï¼šJava å †æ ˆè·Ÿè¸ª jcmdï¼šå®ç°ä¸Šé¢é™¤äº† jstat å¤–æ‰€æœ‰å‘½ä»¤çš„åŠŸèƒ½</p><h4 id="äº†è§£å“ªäº›å¯è§†åŒ–çš„æ€§èƒ½ç›‘æ§å’Œæ•…éšœå¤„ç†å·¥å…·" tabindex="-1"><a class="header-anchor" href="#äº†è§£å“ªäº›å¯è§†åŒ–çš„æ€§èƒ½ç›‘æ§å’Œæ•…éšœå¤„ç†å·¥å…·" aria-hidden="true">#</a> äº†è§£å“ªäº›å¯è§†åŒ–çš„æ€§èƒ½ç›‘æ§å’Œæ•…éšœå¤„ç†å·¥å…·ï¼Ÿ</h4><h5 id="jdkè‡ªå¸¦çš„" tabindex="-1"><a class="header-anchor" href="#jdkè‡ªå¸¦çš„" aria-hidden="true">#</a> JDKè‡ªå¸¦çš„</h5><p>JConsole</p><p>VisualVM</p><p>Java Mission Control</p><h5 id="ç¬¬ä¸‰æ–¹å·¥å…·" tabindex="-1"><a class="header-anchor" href="#ç¬¬ä¸‰æ–¹å·¥å…·" aria-hidden="true">#</a> ç¬¬ä¸‰æ–¹å·¥å…·</h5><p>MATï¼šJavaå †å†…å­˜åˆ†æå·¥å…·</p><p>GCistoï¼šGCæ—¥å¿—åˆ†æå·¥å…·</p><p>GCViewerï¼šGCæ—¥å¿—åˆ†æå·¥å…·</p><p>JProfilerï¼šå•†ç”¨çš„æ€§èƒ½åˆ†æå·¥å…·</p><p>arthasï¼šé˜¿é‡Œå¼€æºè¯Šæ–­å·¥å…·</p><p>async-profilerï¼šJavaåº”ç”¨æ€§èƒ½åˆ†æå·¥å…·ï¼Œå¼€æºã€ç«ç„°å›¾ã€è·¨å¹³å°</p><h4 id="jvmå¸¸è§å‚æ•°é…ç½®" tabindex="-1"><a class="header-anchor" href="#jvmå¸¸è§å‚æ•°é…ç½®" aria-hidden="true">#</a> JVMå¸¸è§å‚æ•°é…ç½®</h4><h5 id="å †é…ç½®" tabindex="-1"><a class="header-anchor" href="#å †é…ç½®" aria-hidden="true">#</a> å †é…ç½®</h5><p>-Xms:åˆå§‹å †å¤§å° -Xmx:æœ€å¤§å †å¤§å° -Xmn:è®¾ç½®æ–°ç”Ÿä»£ï¼ˆå¹´è½»ä»£ï¼‰å¤§å° -XX:NewSize=n:è®¾ç½®å¹´è½»ä»£å¤§å° -XX:NewRatio=n:è®¾ç½®å¹´è½»ä»£å’Œå¹´è€ä»£çš„æ¯”å€¼ã€‚å¦‚ï¼šä¸º 3 è¡¨ç¤ºå¹´è½»ä»£å’Œå¹´è€ä»£æ¯”å€¼ä¸º 1ï¼š3ï¼Œå¹´è½»ä»£å æ•´ä¸ªå¹´è½»ä»£å¹´è€ä»£å’Œçš„ 1/4 -XX:SurvivorRatio=n:å¹´è½»ä»£ä¸­ Eden åŒºä¸ä¸¤ä¸ª Survivor åŒºçš„æ¯”å€¼ã€‚æ³¨æ„ Survivor åŒºæœ‰ä¸¤ä¸ªã€‚å¦‚ 3 è¡¨ç¤º Edenï¼š 3 Survivorï¼š2ï¼Œä¸€ä¸ª Survivor åŒºå æ•´ä¸ªå¹´è½»ä»£çš„ 1/5 -XX:MaxPermSize=n:è®¾ç½®æŒä¹…ä»£å¤§å°</p><h5 id="æ”¶é›†å™¨é…ç½®" tabindex="-1"><a class="header-anchor" href="#æ”¶é›†å™¨é…ç½®" aria-hidden="true">#</a> æ”¶é›†å™¨é…ç½®</h5><p>-XX:+UseSerialGC:ä½¿ç”¨Serialæ”¶é›†å™¨ -XX:+UseParallelGC:ä½¿ç”¨Parallelæ”¶é›†å™¨ -XX:+UseParalledlOldGC:ä½¿ç”¨ParalledlOldæ”¶é›†å™¨ -XX:+UseConcMarkSweepGC:ä½¿ç”¨CMSæ”¶é›†å™¨</p><h5 id="parallelæ”¶é›†å™¨é…ç½®" tabindex="-1"><a class="header-anchor" href="#parallelæ”¶é›†å™¨é…ç½®" aria-hidden="true">#</a> Parallelæ”¶é›†å™¨é…ç½®</h5><p>-XX:ParallelGCThreads=n:è®¾ç½®å¹¶è¡Œæ”¶é›†å™¨æ”¶é›†æ—¶ä½¿ç”¨çš„ CPU æ•°ã€‚å¹¶è¡Œæ”¶é›†çº¿ç¨‹æ•° -XX:MaxGCPauseMillis=n:è®¾ç½®å¹¶è¡Œæ”¶é›†æœ€å¤§çš„æš‚åœæ—¶é—´ï¼ˆå¦‚æœåˆ°è¿™ä¸ªæ—¶é—´äº†ï¼Œåƒåœ¾å›æ”¶å™¨ä¾ç„¶æ²¡æœ‰å›æ”¶å®Œï¼Œä¹Ÿä¼šåœæ­¢å›æ”¶ï¼‰ -XX:GCTimeRatio=n:è®¾ç½®åƒåœ¾å›æ”¶æ—¶é—´å ç¨‹åºè¿è¡Œæ—¶é—´çš„ç™¾åˆ†æ¯”ã€‚å…¬å¼ä¸ºï¼š1/(1+n) -XX:+CMSIncrementalMode:è®¾ç½®ä¸ºå¢é‡æ¨¡å¼ã€‚é€‚ç”¨äºå• CPU æƒ…å†µ -XX:ParallelGCThreads=n:è®¾ç½®å¹¶å‘æ”¶é›†å™¨å¹´è½»ä»£æ‰‹æœºæ–¹å¼ä¸ºå¹¶è¡Œæ”¶é›†æ—¶ï¼Œä½¿ç”¨çš„ CPU æ•°ã€‚å¹¶è¡Œæ”¶é›†çº¿ç¨‹æ•°</p><h5 id="æ‰“å°gcå›æ”¶çš„è¿‡ç¨‹æ—¥å¿—ä¿¡æ¯" tabindex="-1"><a class="header-anchor" href="#æ‰“å°gcå›æ”¶çš„è¿‡ç¨‹æ—¥å¿—ä¿¡æ¯" aria-hidden="true">#</a> æ‰“å°GCå›æ”¶çš„è¿‡ç¨‹æ—¥å¿—ä¿¡æ¯</h5><p>-XX:+PrintGC -XX:+PrintGCDetails -XX:+PrintGCTimeStamps -Xloggc:filename</p><h4 id="jvmè°ƒä¼˜æµç¨‹" tabindex="-1"><a class="header-anchor" href="#jvmè°ƒä¼˜æµç¨‹" aria-hidden="true">#</a> JVMè°ƒä¼˜æµç¨‹</h4><figure><img src="/pinkpig/assets/jvm_039-a-M5j0WX.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>æ¡ˆä¾‹ï¼šç”µå•†å…¬å¸çš„è¿è¥åå°ç³»ç»Ÿï¼Œå¶å‘æ€§çš„å¼•å‘ OOM å¼‚å¸¸ï¼Œå †å†…å­˜æº¢å‡º</p><figure><img src="/pinkpig/assets/jvm_040-j8fG6Pzv.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><h4 id="çº¿ä¸ŠæœåŠ¡-cpu-å ç”¨è¿‡é«˜æ€ä¹ˆæ’æŸ¥" tabindex="-1"><a class="header-anchor" href="#çº¿ä¸ŠæœåŠ¡-cpu-å ç”¨è¿‡é«˜æ€ä¹ˆæ’æŸ¥" aria-hidden="true">#</a> çº¿ä¸ŠæœåŠ¡ CPU å ç”¨è¿‡é«˜æ€ä¹ˆæ’æŸ¥ï¼Ÿ</h4><p>é—®é¢˜åˆ†æï¼šCPU é«˜ä¸€å®šæ˜¯æŸä¸ªç¨‹åºé•¿æœŸå ç”¨äº† CPU èµ„æºã€‚</p><figure><img src="/pinkpig/assets/jvm_041-0hBISfmp.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><figure><img src="/pinkpig/assets/jvm_042-jQyRUx9D.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><h4 id="å†…å­˜é£™é«˜é—®é¢˜æ€ä¹ˆæ’æŸ¥" tabindex="-1"><a class="header-anchor" href="#å†…å­˜é£™é«˜é—®é¢˜æ€ä¹ˆæ’æŸ¥" aria-hidden="true">#</a> å†…å­˜é£™é«˜é—®é¢˜æ€ä¹ˆæ’æŸ¥ï¼Ÿ</h4><figure><img src="/pinkpig/assets/jvm_043-bNWdSK4x.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>é¢‘ç¹ minor gc æ€ä¹ˆåŠï¼Ÿ</p><p>é¢‘ç¹ Full GC æ€ä¹ˆåŠï¼Ÿ</p><p>å†…å­˜æ³„æ¼ï¼Œå†…å­˜æº¢å‡ºé—®é¢˜å¦‚ä½•å®šä½ï¼Ÿ</p><h2 id="_4ã€æ€ä¹ˆå›æ”¶" tabindex="-1"><a class="header-anchor" href="#_4ã€æ€ä¹ˆå›æ”¶" aria-hidden="true">#</a> 4ã€æ€ä¹ˆå›æ”¶</h2><p>åƒåœ¾æ”¶é›†å™¨ åƒåœ¾æ”¶é›†ç®—æ³•æ˜¯å†…å­˜å›æ”¶çš„æ–¹æ³•è®º åƒåœ¾æ”¶é›†å™¨å°±æ˜¯å†…å­˜å›æ”¶çš„å…·ä½“å®ç°</p><h3 id="åƒåœ¾æ”¶é›†ç®—æ³•" tabindex="-1"><a class="header-anchor" href="#åƒåœ¾æ”¶é›†ç®—æ³•" aria-hidden="true">#</a> åƒåœ¾æ”¶é›†ç®—æ³•</h3><h4 id="æ ‡è®°å¤åˆ¶ç®—æ³•-mark-copy" tabindex="-1"><a class="header-anchor" href="#æ ‡è®°å¤åˆ¶ç®—æ³•-mark-copy" aria-hidden="true">#</a> æ ‡è®°å¤åˆ¶ç®—æ³• Mark-Copy</h4><p>å°†å­˜æ´»å¯¹è±¡å¤åˆ¶åˆ°å¦ä¸€å—ï¼Œç„¶åæŠŠå½“å‰å—å†…å­˜ç©ºé—´å…¨éƒ¨æ¸…ç©º</p><figure><img src="/pinkpig/assets/jvm_044-1nFlWXVq.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>é€‚ç”¨äºæ–°ç”Ÿä»£ï¼Œå­˜æ´»å¯¹è±¡æ¯”è¾ƒå°‘çš„æƒ…å½¢</p><p>ç¼ºç‚¹ï¼šå­˜åœ¨ç©ºé—´çš„æµªè´¹</p><h5 id="å®é™…åº”ç”¨" tabindex="-1"><a class="header-anchor" href="#å®é™…åº”ç”¨" aria-hidden="true">#</a> å®é™…åº”ç”¨</h5><h6 id="è§£å†³ç©ºé—´åˆ©ç”¨ç‡é—®é¢˜" tabindex="-1"><a class="header-anchor" href="#è§£å†³ç©ºé—´åˆ©ç”¨ç‡é—®é¢˜" aria-hidden="true">#</a> è§£å†³ç©ºé—´åˆ©ç”¨ç‡é—®é¢˜</h6><p>æ–°ç”Ÿä»£åˆ†åŒºåŠå…¶æ¯”ä¾‹ Eden : From Survivor: To Survivor = 8:1:1</p><p>è¿™æ ·åªæœ‰10%çš„å†…å­˜è¢«æµªè´¹</p><p>ä½†æ— æ³•æŒ‰ä¿è¯æ¯æ¬¡å›æ”¶å­˜æ´»å¯¹è±¡ä¸è¶…è¿‡10%çš„ç©ºé—´ï¼Œå½“Survivorç©ºé—´ä¸å¤Ÿï¼Œéœ€è¦ä¾èµ–è€å¹´ä»£è¿›è¡Œåˆ†é…æ‹…ä¿</p><h6 id="åˆ†é…æ‹…ä¿" tabindex="-1"><a class="header-anchor" href="#åˆ†é…æ‹…ä¿" aria-hidden="true">#</a> åˆ†é…æ‹…ä¿</h6><p>æµªè´¹çš„å†…å­˜ç©ºé—´å°‘äº†ï¼Œå°±éœ€è¦è€å¹´ä»£è¿›è¡Œåˆ†é…æ‹…ä¿</p><h4 id="æ ‡è®°æ¸…é™¤ç®—æ³•-mark-sweep" tabindex="-1"><a class="header-anchor" href="#æ ‡è®°æ¸…é™¤ç®—æ³•-mark-sweep" aria-hidden="true">#</a> æ ‡è®°æ¸…é™¤ç®—æ³• Mark-Sweep</h4><p>å°†å¯å›æ”¶å¯¹è±¡æ¸…é™¤</p><figure><img src="/pinkpig/assets/jvm_045-KiEUOwb-.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>é€‚ç”¨äºè€å¹´ä»£ï¼Œå­˜æ´»å¯¹è±¡æ¯”è¾ƒå¤šçš„æƒ…å½¢</p><h5 id="ç¼ºç‚¹-å†…å­˜ç©ºé—´çš„ç¢ç‰‡åŒ–é—®é¢˜" tabindex="-1"><a class="header-anchor" href="#ç¼ºç‚¹-å†…å­˜ç©ºé—´çš„ç¢ç‰‡åŒ–é—®é¢˜" aria-hidden="true">#</a> ç¼ºç‚¹ï¼šå†…å­˜ç©ºé—´çš„ç¢ç‰‡åŒ–é—®é¢˜</h5><p>äº§ç”Ÿå¤§é‡ä¸è¿ç»­çš„å†…å­˜ç¢ç‰‡ä¼šå¯¼è‡´ä¹‹åéœ€è¦åˆ†é…è¾ƒå¤§å¯¹è±¡æ—¶æ— æ³•æ‰¾åˆ°è¶³å¤Ÿçš„è¿ç»­å†…å­˜è€Œä¸å¾—ä¸æå‰è§¦å‘ä¸€æ¬¡åƒåœ¾æ”¶é›†åŠ¨ä½œ</p><h4 id="æ ‡è®°æ•´ç†ç®—æ³•-mark-compact" tabindex="-1"><a class="header-anchor" href="#æ ‡è®°æ•´ç†ç®—æ³•-mark-compact" aria-hidden="true">#</a> æ ‡è®°æ•´ç†ç®—æ³• Mark-Compact</h4><p>è®©æ‰€æœ‰å­˜æ´»çš„å¯¹è±¡éƒ½å‘å†…å­˜ç©ºé—´ä¸€ç«¯ç§»åŠ¨ï¼Œç„¶åç›´æ¥æ¸…ç†æ‰è¾¹ç•Œä»¥å¤–çš„å†…å­˜</p><figure><img src="/pinkpig/assets/jvm_046-jzByKoim.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>é€‚ç”¨äºè€å¹´ä»£ï¼Œå­˜æ´»å¯¹è±¡æ¯”è¾ƒå¤šçš„æƒ…å½¢</p><p>ç¼ºç‚¹ï¼šç§»åŠ¨å­˜æ´»å¯¹è±¡æ“ä½œæä¸ºè´Ÿé‡</p><h3 id="è¯„ä¼°" tabindex="-1"><a class="header-anchor" href="#è¯„ä¼°" aria-hidden="true">#</a> è¯„ä¼°</h3><p>åœé¡¿æ—¶é—´ vs ååé‡</p><h4 id="å»¶è¿Ÿ-åœé¡¿æ—¶é—´" tabindex="-1"><a class="header-anchor" href="#å»¶è¿Ÿ-åœé¡¿æ—¶é—´" aria-hidden="true">#</a> å»¶è¿Ÿ/åœé¡¿æ—¶é—´</h4><p>çœ‹å•æ¬¡å½±å“ ç”¨æˆ·çº¿ç¨‹æ— æ³•å·¥ä½œçš„æ—¶é—´</p><p>é€‚ç”¨ï¼šä¸ç”¨æˆ·äº¤äº’åœºæ™¯</p><p>ç»éªŒï¼šä½äºä¸€ç§’çš„ï¼ˆå³æ¯«ç§’çº§åˆ«çš„ï¼‰åœé¡¿æ—¶é—´ç”¨æˆ·æ˜¯å¯ä»¥æ¥å—çš„</p><h4 id="ååé‡" tabindex="-1"><a class="header-anchor" href="#ååé‡" aria-hidden="true">#</a> ååé‡</h4><p>çœ‹æ•´ä½“å½±å“ CPUè¿è¡Œç”¨æˆ·ä»£ç æ—¶é—´/CPUæ€»æ¶ˆè€—æ—¶é—´</p><p>å…¶ä¸­ï¼Œæ€»æ¶ˆè€—æ—¶é—´=CPUè¿è¡Œç”¨æˆ·ä»£ç æ—¶é—´+åƒåœ¾æ”¶é›†æ—¶é—´ éç”¨æˆ·ç¨‹åºæ—¶é—´ï¼šCompile Time, Class Load Time, GC Time</p><p>é€‚ç”¨ï¼šåå°è¿ç®—åœºæ™¯</p><p>åƒåœ¾æ”¶é›†å™¨ç»„åˆ</p><p>è¿™äº›æ”¶é›†å™¨é‡Œï¼Œé¢è¯•çš„é‡ç‚¹æ˜¯ä¸¤ä¸ªâ€”â€”CMSå’ŒG1</p><p>æ–°ç”Ÿä»£åƒåœ¾æ”¶é›†å™¨éƒ½æ˜¯æ ‡è®°å¤åˆ¶ç®—æ³•ï¼ˆå› ä¸ºå­˜æ´»å¯¹è±¡æ¯”è¾ƒå°‘ï¼‰ è€å¹´ä»£åƒåœ¾æ”¶é›†å™¨ï¼Œé™¤äº†CMSæ˜¯æ ‡è®°æ¸…é™¤ç®—æ³•ï¼ŒSerial Oldï¼ŒPrallel Oldï¼ŒG1ï¼ˆæ–°ç”Ÿä»£å’Œè€å¹´ä»£é€šç”¨ï¼‰éƒ½æ˜¯æ ‡è®°æ•´ç†ç®—æ³•</p><figure><img src="/pinkpig/assets/jvm_047-LWDFoA2B.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>HotSpotè™šæ‹Ÿæœºçš„åƒåœ¾æ”¶é›†å™¨</p><p>Noteï¼šJDK9å¼€å§‹ï¼ŒSerial+CMSå’ŒParNew+Serial Oldä¸¤ç§ç»„åˆè¢«å–æ¶ˆ</p><p>ä»€ä¹ˆæ˜¯Stop the Worldï¼šåƒåœ¾å›æ”¶æ—¶ï¼Œç”¨æˆ·çº¿ç¨‹å…¨éƒ¨æš‚åœ ä»€ä¹ˆæ˜¯SafePointï¼ˆå®‰å…¨ç‚¹ï¼‰ï¼šç”¨æˆ·çº¿ç¨‹éœ€è¦èµ°åˆ°æœ€è¿‘çš„å®‰å…¨ç‚¹æ‰å¯ä»¥æš‚åœ</p><figure><img src="/pinkpig/assets/jvm_048-7tdmCQyR.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><h3 id="é€‰æ‹©æ–¹æ¡ˆ" tabindex="-1"><a class="header-anchor" href="#é€‰æ‹©æ–¹æ¡ˆ" aria-hidden="true">#</a> é€‰æ‹©æ–¹æ¡ˆ</h3><h4 id="é€‰æ‹©ä¸€" tabindex="-1"><a class="header-anchor" href="#é€‰æ‹©ä¸€" aria-hidden="true">#</a> é€‰æ‹©ä¸€</h4><p>ç‰¹ç‚¹ï¼šé€‚ç”¨å®¢æˆ·ç«¯ï¼Œé€‚åˆå°å†…å­˜</p><p>å®¢æˆ·ç«¯æ¨¡å¼ä¸‹çš„é»˜è®¤åƒåœ¾æ”¶é›†å™¨ <img src="/pinkpig/assets/jvm_049-L55yhEI3.png" alt="" loading="lazy"></p><h5 id="serial" tabindex="-1"><a class="header-anchor" href="#serial" aria-hidden="true">#</a> Serial</h5><p>æ–°ç”Ÿä»£ï¼Œå•çº¿ç¨‹ï¼Œæ ‡è®°å¤åˆ¶ç®—æ³• åªå¼€å¯ä¸€æ¡ GC çº¿ç¨‹è¿›è¡Œåƒåœ¾å›æ”¶ï¼Œå¹¶ä¸”åœ¨åƒåœ¾æ”¶é›†è¿‡ç¨‹ä¸­åœæ­¢ä¸€åˆ‡ç”¨æˆ·çº¿ç¨‹(Stop The World)</p><figure><img src="/pinkpig/assets/jvm_050-wx1wiQAs.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>é¿å…çº¿ç¨‹åˆ‡æ¢å¼€é”€ï¼Œç®€å•é«˜æ•ˆ</p><p>é€‚ç”¨å†…å­˜è¾ƒå°çš„åœºæ™¯ã€‚å®¢æˆ·ç«¯å†…å­˜ä¸€èˆ¬è¾ƒå°ï¼Œé€‚åˆå®¢æˆ·ç«¯åº”ç”¨ã€‚</p><h5 id="serial-old" tabindex="-1"><a class="header-anchor" href="#serial-old" aria-hidden="true">#</a> Serial Old</h5><p>è€å¹´ä»£ï¼Œå•çº¿ç¨‹ï¼Œæ ‡è®°æ•´ç†ç®—æ³• Serial çš„è€å¹´ä»£ç‰ˆæœ¬ï¼Œå”¯ä¸€çš„åŒºåˆ«å°±æ˜¯ï¼šSerial Old å·¥ä½œåœ¨è€å¹´ä»£ï¼Œä½¿ç”¨æ ‡è®°æ•´ç†ç®—æ³•ï¼›Serial å·¥ä½œåœ¨æ–°ç”Ÿä»£ï¼Œä½¿ç”¨æ ‡è®°å¤åˆ¶ç®—æ³•ã€‚</p><h4 id="é€‰æ‹©äºŒ" tabindex="-1"><a class="header-anchor" href="#é€‰æ‹©äºŒ" aria-hidden="true">#</a> é€‰æ‹©äºŒ</h4><p>ç‰¹ç‚¹ï¼šé€‚ç”¨æœåŠ¡ç«¯ï¼Œè¿½æ±‚ä½åœé¡¿</p><h5 id="parnew" tabindex="-1"><a class="header-anchor" href="#parnew" aria-hidden="true">#</a> ParNew</h5><p>æ–°ç”Ÿä»£ï¼Œå¤šçº¿ç¨‹ï¼Œè¿½æ±‚ä½åœé¡¿ï¼Œæ ‡è®°å¤åˆ¶ç®—æ³• Serialçš„å¤šçº¿ç¨‹ç‰ˆæœ¬ï¼Œä¸ Serial å”¯ä¸€åŒºåˆ«å°±æ˜¯ä½¿ç”¨äº†å¤šçº¿ç¨‹è¿›è¡Œåƒåœ¾æ”¶é›†</p><figure><img src="/pinkpig/assets/jvm_051-3YM-rXOj.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>è¿½æ±‚ä½å»¶è¿Ÿ/ä½åœé¡¿ï¼Œé€‚åˆäº¤äº’å¼åº”ç”¨</p><p>å•æ ¸CPUä¸‹ï¼Œç”±äºçº¿ç¨‹åˆ‡æ¢ï¼Œæ€§èƒ½ä¸å¦‚Serial; å¤šæ ¸CPUä¸‹ï¼Œæ€§èƒ½æ¯”Serialå¥½</p><p>åªæœ‰å®ƒèƒ½ä¸CMSæ”¶é›†å™¨é…åˆå·¥ä½œï¼Œæ‰€ä»¥å®ƒæ˜¯ä¸å°‘è¿è¡Œåœ¨æœåŠ¡ç«¯æ¨¡å¼ä¸‹çš„HotSpotè™šæ‹Ÿæœºï¼Œå°¤å…¶æ˜¯JDK 7ä¹‹å‰çš„é—ç•™ç³»ç»Ÿä¸­é¦–é€‰çš„æ–°ç”Ÿä»£æ”¶é›†å™¨</p><p>ParNewæ”¶é›†å™¨æ˜¯æ¿€æ´»CMSåï¼ˆä½¿ç”¨-XXï¼š+UseConcMarkSweepGCé€‰é¡¹ï¼‰çš„é»˜ è®¤æ–°ç”Ÿä»£æ”¶é›†å™¨ã€‚JDK9å¼€å§‹ï¼ŒParNewåˆå¹¶å…¥CMSï¼Œæˆä¸ºå®ƒä¸“é—¨å¤„ç†æ–°ç”Ÿä»£çš„ç»„æˆéƒ¨ åˆ†</p><h5 id="cms-concurrent-mark-sweep-å¹¶å‘æ ‡è®°æ¸…é™¤-ç§°ä¸º-å¹¶å‘ä½åœé¡¿æ”¶é›†å™¨" tabindex="-1"><a class="header-anchor" href="#cms-concurrent-mark-sweep-å¹¶å‘æ ‡è®°æ¸…é™¤-ç§°ä¸º-å¹¶å‘ä½åœé¡¿æ”¶é›†å™¨" aria-hidden="true">#</a> CMS ï¼ˆConcurrent Mark Sweepï¼Œå¹¶å‘æ ‡è®°æ¸…é™¤ï¼‰ï¼ˆç§°ä¸ºï¼Œå¹¶å‘ä½åœé¡¿æ”¶é›†å™¨ï¼‰</h5><p>è€å¹´ä»£ï¼Œå¤šçº¿ç¨‹ï¼Œè¿½æ±‚ä½åœé¡¿ï¼Œæ ‡è®°æ¸…é™¤ç®—æ³• è¿½æ±‚ä½åœé¡¿ï¼Œå®ƒåœ¨åƒåœ¾æ”¶é›†æ—¶ä½¿å¾—ç”¨æˆ·çº¿ç¨‹å’ŒGCçº¿ç¨‹å¹¶å‘æ‰§è¡Œï¼Œå› æ­¤åœ¨åƒåœ¾æ”¶é›†è¿‡ç¨‹ä¸­ç”¨æˆ·ä¹Ÿä¸ä¼šæ„Ÿåˆ°æ˜æ˜¾åœé¡¿</p><figure><img src="/pinkpig/assets/jvm_052-5ha3NPkE.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><h6 id="è¿‡ç¨‹" tabindex="-1"><a class="header-anchor" href="#è¿‡ç¨‹" aria-hidden="true">#</a> è¿‡ç¨‹</h6><p>####### åˆå§‹æ ‡è®° Stop The Worldï¼Œä½¿ç”¨ä¸€æ¡æ ‡è®°çº¿ç¨‹å¯¹æ‰€æœ‰ä¸GC Rootsç›´æ¥å…³è”çš„å¯¹è±¡è¿›è¡Œæ ‡è®°ã€‚é€Ÿåº¦å¾ˆå¿«ã€‚</p><p>####### å¹¶å‘æ ‡è®° ä½¿ç”¨å¤šæ¡æ ‡è®°çº¿ç¨‹ï¼Œä¸ç”¨æˆ·çº¿ç¨‹å¹¶å‘æ‰§è¡Œã€‚æ­¤è¿‡ç¨‹ä»GC Rootsçš„ç›´æ¥å…³è”å¯¹è±¡å¼€å§‹éå†æ•´ä¸ªå¯¹è±¡å›¾ï¼Œè¿›è¡Œå¯è¾¾æ€§åˆ†æï¼Œæ ‡è®°å‡ºæ‰€æœ‰åºŸå¼ƒå¯¹è±¡ã€‚é€Ÿåº¦å¾ˆæ…¢ã€‚</p><p>####### é‡æ–°æ ‡è®° Stop The Worldï¼Œä½¿ç”¨å¤šæ¡æ ‡è®°çº¿ç¨‹ï¼Œå°†ä¸Šä¸€æ­¥å¹¶å‘æ ‡è®°é˜¶æ®µæ–°å‡ºç°çš„åºŸå¼ƒå¯¹è±¡æ ‡è®°å‡ºæ¥ã€‚é€Ÿåº¦å¾ˆå¿«ï¼Œä»…æ¯”åˆå§‹æ ‡è®°æ…¢ä¸€ç‚¹ã€‚</p><p>####### å¹¶å‘æ¸…é™¤ ä½¿ç”¨ä¸€æ¡GCçº¿ç¨‹ï¼Œä¸ç”¨æˆ·çº¿ç¨‹å¹¶å‘æ‰§è¡Œï¼Œæ¸…é™¤å‰ä¸¤æ­¥æ‰€æœ‰æ ‡è®°å‡ºçš„åºŸå¼ƒå¯¹è±¡ã€‚è¿™ä¸ªè¿‡ç¨‹éå¸¸è€—æ—¶ã€‚</p><p>å¹¶å‘æ ‡è®°å’Œå¹¶å‘æ¸…é™¤è¿‡ç¨‹è€—æ—¶æœ€é•¿ï¼Œä½†å¯ä»¥ä¸ç”¨æˆ·çº¿ç¨‹ä¸€èµ·å·¥ä½œï¼Œå› æ­¤ï¼Œæ€»ä½“ä¸Šè¯´ï¼ŒCMSçš„å†…å­˜å›æ”¶è¿‡ç¨‹æ˜¯ä¸ç”¨æˆ·çº¿ç¨‹ä¸€èµ·å¹¶å‘æ‰§è¡Œçš„</p><h6 id="ç¼ºç‚¹" tabindex="-1"><a class="header-anchor" href="#ç¼ºç‚¹" aria-hidden="true">#</a> ç¼ºç‚¹</h6><p>ååé‡ä½</p><p>####### æ— æ³•å¤„ç†æµ®åŠ¨åƒåœ¾ï¼Œä¸”éœ€è¦é¢„ç•™å†…å­˜ç©ºé—´ä¾›ç”¨æˆ·çº¿ç¨‹åˆ†é…æ–°å¯¹è±¡ï¼Œæ‰€ä»¥æ²¡æ³•ç­‰è€å¹´ä»£å‡ ä¹å®Œå…¨è¢«å¡«æ»¡å†è¿›è¡Œå›æ”¶ï¼Œè€Œæ˜¯è€å¹´ä»£è¾¾åˆ°ä¸€å®šé˜ˆå€¼å°±è¿›è¡Œå›æ”¶ã€‚JDK5é»˜è®¤68%ï¼ŒJDK6é»˜è®¤92% åœ¨CMSçš„å¹¶å‘æ ‡è®°å’Œå¹¶å‘æ¸…ç†é˜¶æ®µï¼Œç”¨æˆ·çº¿ç¨‹æ˜¯è¿˜åœ¨ç»§ç»­è¿è¡Œçš„ï¼Œç¨‹åºåœ¨è¿è¡Œè‡ªç„¶å°±è¿˜ä¼šä¼´éšæœ‰æ–°çš„åƒåœ¾å¯¹è±¡ä¸æ–­äº§ç”Ÿï¼Œä½†è¿™ä¸€éƒ¨åˆ†åƒåœ¾å¯¹è±¡æ˜¯å‡ºç°åœ¨æ ‡è®°è¿‡ç¨‹ç»“æŸä»¥åï¼ŒCMSæ— æ³•åœ¨å½“æ¬¡æ”¶é›†ä¸­å¤„ç†æ‰å®ƒä»¬ï¼Œåªå¥½ç•™å¾…ä¸‹ä¸€æ¬¡åƒåœ¾æ”¶é›†æ—¶å†æ¸…ç†æ‰ã€‚è¿™ä¸€éƒ¨åˆ†åƒåœ¾å°±ç§°ä¸ºâ€œæµ®åŠ¨åƒåœ¾â€ã€‚</p><p>å‚æ•°-XXï¼šCMSInitiatingOccupancyFractionç”¨äºè®¾ç½®è¿™ä¸ªé˜ˆå€¼ï¼Œç”¨æˆ·åº”åœ¨ç”Ÿäº§ç¯å¢ƒä¸­æ ¹æ®å®é™…åº”ç”¨æƒ…å†µæ¥æƒè¡¡è®¾ç½®ã€‚ è®¾ç½®å¤ªä½ï¼Œè§¦å‘å›æ”¶çš„é¢‘ç‡ä¼šå¢é«˜ã€‚ è®¾ç½®å¤ªé«˜å°†ä¼šå¾ˆå®¹æ˜“å¯¼è‡´å¤§é‡çš„å¹¶å‘å¤±è´¥äº§ç”Ÿï¼Œæ€§èƒ½åè€Œé™ä½ã€‚</p><p>å¹¶å‘å¤±è´¥ï¼šè¦æ˜¯CMSè¿è¡ŒæœŸé—´é¢„ç•™çš„å†…å­˜æ— æ³•æ»¡ è¶³ç¨‹åºåˆ†é…æ–°å¯¹è±¡çš„éœ€è¦ï¼Œå°±ä¼šå‡ºç°ä¸€æ¬¡â€œå¹¶å‘å¤±è´¥â€ï¼ˆConcurrent Mode Failureï¼‰ï¼Œè¿™æ—¶å€™è™šæ‹Ÿæœºå°†ä¸å¾—ä¸å¯åŠ¨åå¤‡é¢„æ¡ˆï¼šå†»ç»“ç”¨æˆ·çº¿ç¨‹çš„æ‰§è¡Œï¼Œä¸´æ—¶å¯ç”¨Serial Oldæ”¶é›†å™¨æ¥é‡æ–°è¿›è¡Œè€å¹´ä»£çš„åƒåœ¾æ”¶é›†ï¼Œä½†è¿™æ ·åœé¡¿æ—¶é—´å°±å¾ˆé•¿äº†ã€‚</p><p>ä½¿ç”¨æ ‡è®°æ¸…é™¤ç®—æ³•äº§ç”Ÿå¤§é‡ç¢ç‰‡ç©ºé—´</p><h4 id="é€‰æ‹©ä¸‰" tabindex="-1"><a class="header-anchor" href="#é€‰æ‹©ä¸‰" aria-hidden="true">#</a> é€‰æ‹©ä¸‰</h4><p>ç‰¹ç‚¹ï¼šé€‚ç”¨æœåŠ¡ç«¯ï¼Œè¿½æ±‚é«˜ååï¼Œè‡ªé€‚åº”è°ƒèŠ‚ <img src="/pinkpig/assets/jvm_053-Hq-slqd3.png" alt="" loading="lazy"></p><h5 id="parallel-scavenge-ç§°ä¸º-ååé‡ä¼˜å…ˆæ”¶é›†å™¨" tabindex="-1"><a class="header-anchor" href="#parallel-scavenge-ç§°ä¸º-ååé‡ä¼˜å…ˆæ”¶é›†å™¨" aria-hidden="true">#</a> Parallel Scavenge ï¼ˆç§°ä¸ºï¼Œååé‡ä¼˜å…ˆæ”¶é›†å™¨ï¼‰</h5><p>æ–°ç”Ÿä»£ï¼Œå¤šçº¿ç¨‹ï¼Œè¿½æ±‚é«˜ååï¼Œæ ‡è®°å¤åˆ¶ç®—æ³• è¿½æ±‚é«˜ååé‡ï¼Œé€‚åˆæ²¡æœ‰äº¤äº’çš„åå°è®¡ç®—</p><h6 id="é…ç½®" tabindex="-1"><a class="header-anchor" href="#é…ç½®" aria-hidden="true">#</a> é…ç½®</h6><p>é€šè¿‡å‚æ•° -XX:GCTimeRadio è®¾ç½®åƒåœ¾å›æ”¶æ—¶é—´å æ€» CPU æ—¶é—´çš„ç™¾åˆ†æ¯”ã€‚</p><p>é€šè¿‡å‚æ•° -XX:MaxGCPauseMillis è®¾ç½®åƒåœ¾å¤„ç†è¿‡ç¨‹æœ€ä¹…åœé¡¿æ—¶é—´ã€‚</p><p>é€šè¿‡å‘½ä»¤ -XX:+UseAdaptiveSizePolicy å¼€å¯è‡ªé€‚åº”è°ƒèŠ‚ç­–ç•¥ã€‚æˆ‘ä»¬åªè¦è®¾ç½®å¥½å †çš„å¤§å°å’ŒMaxGCPauseMillis æˆ– GCTimeRadioï¼Œæ”¶é›†å™¨ä¼šè‡ªåŠ¨è°ƒæ•´æ–°ç”Ÿä»£çš„å¤§å°ã€Eden å’Œ Survivor çš„æ¯”ä¾‹ã€å¯¹è±¡è¿›å…¥è€å¹´ä»£çš„å¹´é¾„ï¼Œä»¥æœ€å¤§ç¨‹åº¦ä¸Šæ¥è¿‘æˆ‘ä»¬è®¾ç½®çš„ MaxGCPauseMillis æˆ– GCTimeRadioã€‚</p><h5 id="parallel-old" tabindex="-1"><a class="header-anchor" href="#parallel-old" aria-hidden="true">#</a> Parallel Old</h5><p>è€å¹´ä»£ï¼Œå¤šçº¿ç¨‹ï¼Œè¿½æ±‚é«˜ååï¼Œæ ‡è®°æ•´ç†ç®—æ³• Parallel Scavenge çš„è€å¹´ä»£ç‰ˆæœ¬ï¼Œè¿½æ±‚ CPU ååé‡</p><h4 id="é€‰æ‹©å››" tabindex="-1"><a class="header-anchor" href="#é€‰æ‹©å››" aria-hidden="true">#</a> é€‰æ‹©å››</h4><p>ç‰¹ç‚¹ï¼šé€‚ç”¨æœåŠ¡ç«¯ï¼Œé€šç”¨&amp;ä¸åˆ†ä»£ï¼ŒåŸºäºRegionçš„å †å†…å­˜å¸ƒå±€ï¼Œå¯ä»¥ç”±ç”¨æˆ·æŒ‡å®šæœŸæœ›çš„åœé¡¿æ—¶é—´(å®ƒé»˜è®¤çš„åœé¡¿ç›®æ ‡ä¸ºä¸¤ç™¾æ¯«ç§’ï¼Œé€šå¸¸æŠŠæœŸæœ›åœé¡¿æ—¶é—´è®¾ç½®ä¸ºä¸€ä¸¤ç™¾æ¯«ç§’æˆ–è€…ä¸¤ä¸‰ç™¾æ¯«ç§’ä¼šæ˜¯æ¯”è¾ƒåˆç†çš„)ï¼ŒæŒ‰æ”¶ç›ŠåŠ¨æ€ç¡®å®šå›æ”¶é›†ï¼Œç›®æ ‡æ˜¯åœ¨å»¶è¿Ÿå¯æ§çš„æƒ…å†µä¸‹è·å¾—å°½å¯èƒ½é«˜çš„ååé‡</p><p>JDK9å¼€å§‹ï¼Œæˆä¸ºæœåŠ¡ç«¯æ¨¡å¼ä¸‹çš„é»˜è®¤åƒåœ¾æ”¶é›†å™¨</p><h5 id="g1-garbage-first-ç®€ç§°g1-ç§°ä¸º-å…¨åŠŸèƒ½åƒåœ¾æ”¶é›†å™¨-fully-featured-garbage-collector" tabindex="-1"><a class="header-anchor" href="#g1-garbage-first-ç®€ç§°g1-ç§°ä¸º-å…¨åŠŸèƒ½åƒåœ¾æ”¶é›†å™¨-fully-featured-garbage-collector" aria-hidden="true">#</a> G1 ï¼ˆGarbage Firstï¼Œç®€ç§°G1ï¼‰ï¼ˆç§°ä¸ºï¼Œå…¨åŠŸèƒ½åƒåœ¾æ”¶é›†å™¨ï¼ŒFully-Featured Garbage Collectorï¼‰</h5><p>é€šç”¨&amp;ä¸åˆ†ä»£ï¼Œå¤šçº¿ç¨‹ï¼Œè¿½æ±‚åœ¨å»¶è¿Ÿå¯æ§çš„æƒ…å†µä¸‹è·å¾—å°½å¯èƒ½é«˜çš„ååé‡ï¼Œä»æ•´ä½“æ¥çœ‹æ˜¯åŸºäºâ€œæ ‡è®°-æ•´ç†â€ç®—æ³•å®ç°çš„æ”¶é›†å™¨ï¼Œä½†ä»å±€éƒ¨ï¼ˆä¸¤ä¸ªRegionä¹‹é—´ï¼‰ä¸Šçœ‹åˆæ˜¯åŸºäºâ€œæ ‡è®°-å¤åˆ¶â€ç®—æ³•å®ç° G1 æ˜¯ä¸€æ¬¾é¢å‘æœåŠ¡ç«¯åº”ç”¨çš„åƒåœ¾æ”¶é›†å™¨</p><p>G1æ”¶é›†å™¨é™¤äº†å¹¶å‘æ ‡è®°å¤–ï¼Œå…¶ä½™é˜¶æ®µä¹Ÿæ˜¯è¦å®Œå…¨æš‚åœç”¨æˆ·çº¿ç¨‹çš„ï¼Œæ¢è¨€ä¹‹ï¼Œå®ƒå¹¶éçº¯ç²¹åœ°è¿½æ±‚ä½å»¶è¿Ÿï¼Œå®˜æ–¹ç»™å®ƒè®¾å®šçš„ç›®æ ‡æ˜¯â€œåœ¨å»¶è¿Ÿå¯æ§çš„æƒ…å†µä¸‹è·å¾—å°½å¯èƒ½é«˜çš„ååé‡â€œï¼Œæ‰€ä»¥æ‰èƒ½æ‹…å½“èµ·â€œå…¨åŠŸèƒ½æ”¶é›†å™¨â€çš„é‡ä»»ä¸æœŸæœ›ã€‚è®¾ç½®ä¸åŒçš„æœŸæœ›åœé¡¿æ—¶é—´ï¼Œå¯ä½¿å¾—G1åœ¨ä¸åŒåº”ç”¨åœºæ™¯ä¸­å–å¾—å…³æ³¨ååé‡å’Œå…³æ³¨å»¶è¿Ÿä¹‹é—´çš„æœ€ä½³å¹³è¡¡</p><p>G1è¿ä½œæœŸé—´ä¸ä¼šäº§ç”Ÿå†…å­˜ç©ºé—´ç¢ç‰‡ï¼Œåƒåœ¾æ”¶é›†å®Œæˆä¹‹åèƒ½æä¾›è§„æ•´çš„å¯ç”¨å†…å­˜</p><p>ç¼ºï¼šå†…å­˜å ç”¨é«˜</p><h6 id="g1å¼€åˆ›äº†åŸºäºregionçš„å †å†…å­˜å¸ƒå±€" tabindex="-1"><a class="header-anchor" href="#g1å¼€åˆ›äº†åŸºäºregionçš„å †å†…å­˜å¸ƒå±€" aria-hidden="true">#</a> G1å¼€åˆ›äº†åŸºäºRegionçš„å †å†…å­˜å¸ƒå±€</h6><p>ï¼ˆG1ä¹Ÿä»æ˜¯éµå¾ªåˆ†ä»£æ”¶é›†ç†è®ºï¼‰ <img src="/pinkpig/assets/jvm_054-V-bC-iFH.png" alt="" loading="lazy"></p><p>æŠŠè¿ç»­çš„Javaå †åˆ’åˆ†ä¸ºå¤šä¸ªå¤§å°ç›¸ç­‰çš„ç‹¬ç«‹åŒºåŸŸï¼ˆRegionï¼‰ï¼Œæ¯ä¸€ä¸ªRegionéƒ½å¯ä»¥æ ¹æ®éœ€è¦ï¼Œæ‰®æ¼”æ–°ç”Ÿä»£çš„Edenç©ºé—´ã€Survivorç©ºé—´ï¼Œæˆ–è€…è€å¹´ä»£ç©ºé—´ã€‚æ”¶é›†å™¨èƒ½å¤Ÿå¯¹æ‰®æ¼”ä¸åŒè§’è‰²çš„ Regioné‡‡ç”¨ä¸åŒçš„ç­–ç•¥å»å¤„ç†ï¼Œ</p><p>Regionä¸­è¿˜æœ‰ä¸€ç±»ç‰¹æ®Šçš„HumongousåŒºåŸŸï¼Œä¸“é—¨ç”¨æ¥å­˜å‚¨å¤§å¯¹è±¡ã€‚G1è®¤ä¸ºåªè¦å¤§å°è¶…è¿‡äº†ä¸€ä¸ª Regionå®¹é‡ä¸€åŠçš„å¯¹è±¡å³å¯åˆ¤å®šä¸ºå¤§å¯¹è±¡ã€‚æ¯ä¸ªRegionçš„å¤§å°å¯ä»¥é€šè¿‡å‚æ•° -XXï¼šG1HeapRegionSizeè®¾å®šï¼Œå–å€¼èŒƒå›´ä¸º1MBï½32MBï¼Œä¸”åº”ä¸º2çš„Næ¬¡å¹‚ã€‚è€Œå¯¹äºé‚£äº›è¶…è¿‡äº†æ•´ä¸ªRegionå®¹é‡çš„è¶…çº§å¤§å¯¹è±¡ï¼Œå°†ä¼šè¢«å­˜æ”¾åœ¨Nä¸ªè¿ç»­çš„Humongous Regionä¹‹ä¸­ï¼ŒG1çš„å¤§å¤šæ•°è¡Œä¸ºéƒ½æŠŠHumongous Regionä½œä¸ºè€å¹´ä»£çš„ä¸€éƒ¨åˆ†æ¥è¿›è¡Œçœ‹å¾…</p><p>è™½ç„¶G1ä»ç„¶ä¿ç•™æ–°ç”Ÿä»£å’Œè€å¹´ä»£çš„æ¦‚å¿µï¼Œä½†æ–°ç”Ÿä»£å’Œè€å¹´ä»£ä¸å†æ˜¯å›ºå®šçš„äº†ï¼Œå®ƒä»¬éƒ½æ˜¯ä¸€ç³»åˆ—åŒº åŸŸï¼ˆä¸éœ€è¦è¿ç»­ï¼‰çš„åŠ¨æ€é›†åˆã€‚G1æ”¶é›†å™¨ä¹‹æ‰€ä»¥èƒ½å»ºç«‹å¯é¢„æµ‹çš„åœé¡¿æ—¶é—´æ¨¡å‹ï¼Œæ˜¯å› ä¸ºå®ƒå°†Regionä½œä¸ºå•æ¬¡å›æ”¶çš„æœ€å°å•å…ƒï¼Œå³æ¯æ¬¡æ”¶é›†åˆ°çš„å†…å­˜ç©ºé—´éƒ½æ˜¯Regionå¤§å°çš„æ•´æ•°å€ï¼Œè¿™æ ·å¯ä»¥æœ‰è®¡åˆ’åœ°é¿å…åœ¨æ•´ä¸ªJavaå †ä¸­è¿›è¡Œå…¨åŒºåŸŸçš„åƒåœ¾æ”¶é›†ã€‚æ›´å…·ä½“çš„å¤„ç†æ€è·¯æ˜¯è®©G1æ”¶é›†å™¨å»è·Ÿè¸ªå„ä¸ªRegioné‡Œé¢çš„åƒåœ¾å †ç§¯çš„â€œä»·å€¼â€å¤§å°ï¼Œä»·å€¼å³å›æ”¶æ‰€è·å¾—çš„ç©ºé—´å¤§å°ä»¥åŠå›æ”¶æ‰€éœ€æ—¶é—´çš„ç»éªŒå€¼ï¼Œç„¶ååœ¨åå°ç»´æŠ¤ä¸€ä¸ªä¼˜å…ˆçº§åˆ—è¡¨ï¼Œæ¯æ¬¡æ ¹æ®ç”¨æˆ·è®¾å®šå…è®¸çš„æ”¶é›†åœé¡¿æ—¶é—´ï¼ˆä½¿ç”¨å‚æ•°-XXï¼šMaxGCPauseMillisæŒ‡å®šï¼Œé»˜è®¤å€¼æ˜¯200æ¯«ç§’ï¼‰ï¼Œä¼˜å…ˆå¤„ç†å›æ”¶ä»·å€¼æ”¶ç›Šæœ€å¤§çš„é‚£äº›Regionï¼Œè¿™ä¹Ÿå°±æ˜¯â€œGarbage Firstâ€åå­—çš„ç”±æ¥ã€‚è¿™ç§ä½¿ç”¨Regionåˆ’åˆ†å†…å­˜ç©ºé—´ï¼Œä»¥åŠå…·æœ‰ä¼˜å…ˆçº§çš„åŒºåŸŸå›æ”¶æ–¹å¼ï¼Œä¿è¯äº†G1æ”¶é›†å™¨åœ¨æœ‰é™çš„æ—¶é—´å†…è·å–å°½å¯èƒ½é«˜çš„æ”¶é›†æ•ˆç‡ã€‚</p><p>é™¤äº†å¹¶å‘æ ‡è®°é˜¶æ®µä¸ç”¨æˆ·çº¿ç¨‹å¹¶å‘æ‰§è¡Œï¼Œå…¶ä½™é˜¶æ®µéœ€Stop The World</p><figure><img src="/pinkpig/assets/jvm_055-PPnVfwi8.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><h6 id="_4ä¸ªè¿‡ç¨‹" tabindex="-1"><a class="header-anchor" href="#_4ä¸ªè¿‡ç¨‹" aria-hidden="true">#</a> 4ä¸ªè¿‡ç¨‹</h6><p>####### åˆå§‹æ ‡è®° å’ŒCMSåˆå§‹æ ‡è®°ä¸€è‡´ã€‚Stop The Worldï¼Œä½¿ç”¨ä¸€æ¡æ ‡è®°çº¿ç¨‹å¯¹æ‰€æœ‰ä¸GC Rootsç›´æ¥å…³è”çš„å¯¹è±¡è¿›è¡Œæ ‡è®°ã€‚</p><p>####### å¹¶å‘æ ‡è®° å’ŒCMSå¹¶å‘æ ‡è®°ä¸€è‡´ã€‚ä½¿ç”¨å¤šæ¡æ ‡è®°çº¿ç¨‹ï¼Œä¸ç”¨æˆ·çº¿ç¨‹å¹¶å‘æ‰§è¡Œã€‚æ­¤è¿‡ç¨‹è¿›è¡Œå¯è¾¾æ€§åˆ†æï¼Œæ ‡è®°å‡ºæ‰€æœ‰åºŸå¼ƒå¯¹è±¡ã€‚é€Ÿåº¦å¾ˆæ…¢ã€‚</p><p>####### æœ€ç»ˆæ ‡è®° å’ŒCMSé‡æ–°æ ‡è®°ä¸€è‡´ã€‚Stop The Worldï¼Œä½¿ç”¨å¤šæ¡æ ‡è®°çº¿ç¨‹ï¼Œå°†ä¸Šä¸€æ­¥å¹¶å‘æ ‡è®°é˜¶æ®µæ–°å‡ºç°çš„åºŸå¼ƒå¯¹è±¡æ ‡è®°å‡ºæ¥ã€‚</p><p>####### ç­›é€‰å›æ”¶ Stop The Worldï¼Œå¯¹å„ä¸ªRegionçš„å›æ”¶ä»·å€¼å’Œæˆæœ¬è¿›è¡Œæ’åºï¼Œæ ¹æ®ç”¨æˆ·æ‰€æœŸæœ›çš„åœé¡¿æ—¶é—´æ¥åˆ¶å®šå›æ”¶è®¡åˆ’ï¼Œå¯ä»¥è‡ªç”±é€‰æ‹©ä»»æ„å¤šä¸ªRegionæ„æˆå›æ”¶é›†ï¼Œç„¶åæŠŠå†³å®šå›æ”¶çš„é‚£ä¸€éƒ¨åˆ†Regionçš„å­˜æ´»å¯¹è±¡å¤åˆ¶åˆ°ç©ºçš„Regionä¸­ï¼Œå†æ¸…ç†æ‰æ•´ä¸ªæ—§Regionçš„å…¨éƒ¨ç©ºé—´ã€‚è¿™é‡Œçš„æ“ä½œæ¶‰åŠå­˜æ´»å¯¹è±¡çš„ç§»åŠ¨ï¼Œæ˜¯å¿…é¡»æš‚åœç”¨æˆ·çº¿ç¨‹ï¼Œç”±å¤šæ¡æ”¶é›†å™¨çº¿ç¨‹å¹¶è¡Œå®Œæˆçš„ã€‚</p><p>è¿™é‡ŒæŠ›ä¸ªé—®é¢˜ğŸ‘‡ ä¸€ä¸ªå¯¹è±¡å’Œå®ƒå†…éƒ¨æ‰€å¼•ç”¨çš„å¯¹è±¡å¯èƒ½ä¸åœ¨åŒä¸€ä¸ª Region ä¸­ï¼Œé‚£ä¹ˆå½“åƒåœ¾å›æ”¶æ—¶ï¼Œæ˜¯å¦éœ€è¦æ‰«æ æ•´ä¸ªå †å†…å­˜æ‰èƒ½å®Œæ•´åœ°è¿›è¡Œä¸€æ¬¡å¯è¾¾æ€§åˆ†æï¼Ÿ å¹¶ä¸ï¼æ¯ä¸ª Region éƒ½æœ‰ä¸€ä¸ª Remembered Setï¼Œç”¨äºè®°å½•æœ¬åŒºåŸŸä¸­æ‰€æœ‰å¯¹è±¡å¼•ç”¨çš„å¯¹è±¡æ‰€åœ¨çš„åŒºåŸŸï¼Œè¿›è¡Œå¯è¾¾æ€§åˆ†ææ—¶ï¼Œåªè¦åœ¨ GC Roots ä¸­å†åŠ ä¸Š Remembered Set å³å¯é˜²æ­¢å¯¹æ•´ä¸ªå †å†…å­˜è¿›è¡Œéå†ã€‚</p><h4 id="é€‰æ‹©äº”" tabindex="-1"><a class="header-anchor" href="#é€‰æ‹©äº”" aria-hidden="true">#</a> é€‰æ‹©äº”</h4><p>Parallel Scavenge</p><p>æ–°ç”Ÿä»£ï¼Œå¤šçº¿ç¨‹ï¼Œè¿½æ±‚é«˜åå</p><p>Serial Old</p><p>è€å¹´ä»£ï¼Œå•çº¿ç¨‹ï¼Œæ ‡è®°æ•´ç†ç®—æ³•</p><h1 id="central-topic" tabindex="-1"><a class="header-anchor" href="#central-topic" aria-hidden="true">#</a> Central Topic</h1><p>Main Topic 1</p><p>Main Topic 2</p><p>Main Topic 3</p><p>Main Topic 4</p></div><!--[--><!----><!--]--><footer class="page-meta"><!----><div class="meta-item git-info"><!----><!----></div></footer><!----><!----><!--[--><!----><!--]--><!--]--></main><!--]--><!----></div><!--]--><!--]--><!----><!--]--></div>
    <script type="module" src="/pinkpig/assets/app-vfVXwivP.js" defer></script>
  </body>
</html>
